{"version":3,"file":"stegaEncodeSourceMap-Urlawt4L.js","sources":["../../node_modules/@sanity/client/dist/_chunks-es/stegaEncodeSourceMap.js"],"sourcesContent":["import { isRecord, C } from \"./stegaClean.js\";\nconst reKeySegment = /_key\\s*==\\s*['\"](.*)['\"]/;\nfunction isKeySegment(segment) {\n  return typeof segment == \"string\" ? reKeySegment.test(segment.trim()) : typeof segment == \"object\" && \"_key\" in segment;\n}\nfunction toString(path) {\n  if (!Array.isArray(path))\n    throw new Error(\"Path is not an array\");\n  return path.reduce((target, segment, i) => {\n    const segmentType = typeof segment;\n    if (segmentType === \"number\")\n      return `${target}[${segment}]`;\n    if (segmentType === \"string\")\n      return `${target}${i === 0 ? \"\" : \".\"}${segment}`;\n    if (isKeySegment(segment) && segment._key)\n      return `${target}[_key==\"${segment._key}\"]`;\n    if (Array.isArray(segment)) {\n      const [from, to] = segment;\n      return `${target}[${from}:${to}]`;\n    }\n    throw new Error(`Unsupported path segment \\`${JSON.stringify(segment)}\\``);\n  }, \"\");\n}\nconst ESCAPE = {\n  \"\\f\": \"\\\\f\",\n  \"\\n\": \"\\\\n\",\n  \"\\r\": \"\\\\r\",\n  \"\t\": \"\\\\t\",\n  \"'\": \"\\\\'\",\n  \"\\\\\": \"\\\\\\\\\"\n}, UNESCAPE = {\n  \"\\\\f\": \"\\f\",\n  \"\\\\n\": `\n`,\n  \"\\\\r\": \"\\r\",\n  \"\\\\t\": \"\t\",\n  \"\\\\'\": \"'\",\n  \"\\\\\\\\\": \"\\\\\"\n};\nfunction jsonPath(path) {\n  return `$${path.map((segment) => typeof segment == \"string\" ? `['${segment.replace(/[\\f\\n\\r\\t'\\\\]/g, (match) => ESCAPE[match])}']` : typeof segment == \"number\" ? `[${segment}]` : segment._key !== \"\" ? `[?(@._key=='${segment._key.replace(/['\\\\]/g, (match) => ESCAPE[match])}')]` : `[${segment._index}]`).join(\"\")}`;\n}\nfunction parseJsonPath(path) {\n  const parsed = [], parseRe = /\\['(.*?)'\\]|\\[(\\d+)\\]|\\[\\?\\(@\\._key=='(.*?)'\\)\\]/g;\n  let match;\n  for (; (match = parseRe.exec(path)) !== null; ) {\n    if (match[1] !== void 0) {\n      const key = match[1].replace(/\\\\(\\\\|f|n|r|t|')/g, (m) => UNESCAPE[m]);\n      parsed.push(key);\n      continue;\n    }\n    if (match[2] !== void 0) {\n      parsed.push(parseInt(match[2], 10));\n      continue;\n    }\n    if (match[3] !== void 0) {\n      const _key = match[3].replace(/\\\\(\\\\')/g, (m) => UNESCAPE[m]);\n      parsed.push({\n        _key,\n        _index: -1\n      });\n      continue;\n    }\n  }\n  return parsed;\n}\nfunction jsonPathToStudioPath(path) {\n  return path.map((segment) => {\n    if (typeof segment == \"string\" || typeof segment == \"number\")\n      return segment;\n    if (segment._key !== \"\")\n      return { _key: segment._key };\n    if (segment._index !== -1)\n      return segment._index;\n    throw new Error(`invalid segment:${JSON.stringify(segment)}`);\n  });\n}\nfunction jsonPathToMappingPath(path) {\n  return path.map((segment) => {\n    if (typeof segment == \"string\" || typeof segment == \"number\")\n      return segment;\n    if (segment._index !== -1)\n      return segment._index;\n    throw new Error(`invalid segment:${JSON.stringify(segment)}`);\n  });\n}\nfunction resolveMapping(resultPath, csm) {\n  if (!csm?.mappings)\n    return;\n  const resultMappingPath = jsonPath(jsonPathToMappingPath(resultPath));\n  if (csm.mappings[resultMappingPath] !== void 0)\n    return {\n      mapping: csm.mappings[resultMappingPath],\n      matchedPath: resultMappingPath,\n      pathSuffix: \"\"\n    };\n  const mappings = Object.entries(csm.mappings).filter(([key]) => resultMappingPath.startsWith(key)).sort(([key1], [key2]) => key2.length - key1.length);\n  if (mappings.length == 0)\n    return;\n  const [matchedPath, mapping] = mappings[0], pathSuffix = resultMappingPath.substring(matchedPath.length);\n  return { mapping, matchedPath, pathSuffix };\n}\nfunction isArray(value) {\n  return value !== null && Array.isArray(value);\n}\nfunction walkMap(value, mappingFn, path = []) {\n  if (isArray(value))\n    return value.map((v, idx) => {\n      if (isRecord(v)) {\n        const _key = v._key;\n        if (typeof _key == \"string\")\n          return walkMap(v, mappingFn, path.concat({ _key, _index: idx }));\n      }\n      return walkMap(v, mappingFn, path.concat(idx));\n    });\n  if (isRecord(value)) {\n    if (value._type === \"block\" || value._type === \"span\") {\n      const result = { ...value };\n      return value._type === \"block\" ? result.children = walkMap(value.children, mappingFn, path.concat(\"children\")) : value._type === \"span\" && (result.text = walkMap(value.text, mappingFn, path.concat(\"text\"))), result;\n    }\n    return Object.fromEntries(\n      Object.entries(value).map(([k, v]) => [k, walkMap(v, mappingFn, path.concat(k))])\n    );\n  }\n  return mappingFn(value, path);\n}\nfunction encodeIntoResult(result, csm, encoder) {\n  return walkMap(result, (value, path) => {\n    if (typeof value != \"string\")\n      return value;\n    const resolveMappingResult = resolveMapping(path, csm);\n    if (!resolveMappingResult)\n      return value;\n    const { mapping, matchedPath } = resolveMappingResult;\n    if (mapping.type !== \"value\" || mapping.source.type !== \"documentValue\")\n      return value;\n    const sourceDocument = csm.documents[mapping.source.document], sourcePath = csm.paths[mapping.source.path], matchPathSegments = parseJsonPath(matchedPath), fullSourceSegments = parseJsonPath(sourcePath).concat(path.slice(matchPathSegments.length));\n    return encoder({\n      sourcePath: fullSourceSegments,\n      sourceDocument,\n      resultPath: path,\n      value\n    });\n  });\n}\nconst DRAFTS_FOLDER = \"drafts\", VERSION_FOLDER = \"versions\", PATH_SEPARATOR = \".\", DRAFTS_PREFIX = `${DRAFTS_FOLDER}${PATH_SEPARATOR}`, VERSION_PREFIX = `${VERSION_FOLDER}${PATH_SEPARATOR}`;\nfunction isDraftId(id) {\n  return id.startsWith(DRAFTS_PREFIX);\n}\nfunction isVersionId(id) {\n  return id.startsWith(VERSION_PREFIX);\n}\nfunction isPublishedId(id) {\n  return !isDraftId(id) && !isVersionId(id);\n}\nfunction getVersionFromId(id) {\n  if (!isVersionId(id)) return;\n  const [_versionPrefix, versionId, ..._publishedId] = id.split(PATH_SEPARATOR);\n  return versionId;\n}\nfunction getPublishedId(id) {\n  return isVersionId(id) ? id.split(PATH_SEPARATOR).slice(2).join(PATH_SEPARATOR) : isDraftId(id) ? id.slice(DRAFTS_PREFIX.length) : id;\n}\nfunction createEditUrl(options) {\n  const {\n    baseUrl,\n    workspace: _workspace = \"default\",\n    tool: _tool = \"default\",\n    id: _id,\n    type,\n    path,\n    projectId,\n    dataset\n  } = options;\n  if (!baseUrl)\n    throw new Error(\"baseUrl is required\");\n  if (!path)\n    throw new Error(\"path is required\");\n  if (!_id)\n    throw new Error(\"id is required\");\n  if (baseUrl !== \"/\" && baseUrl.endsWith(\"/\"))\n    throw new Error(\"baseUrl must not end with a slash\");\n  const workspace = _workspace === \"default\" ? void 0 : _workspace, tool = _tool === \"default\" ? void 0 : _tool, id = getPublishedId(_id), stringifiedPath = Array.isArray(path) ? toString(jsonPathToStudioPath(path)) : path, searchParams = new URLSearchParams({\n    baseUrl,\n    id,\n    type,\n    path: stringifiedPath\n  });\n  if (workspace && searchParams.set(\"workspace\", workspace), tool && searchParams.set(\"tool\", tool), projectId && searchParams.set(\"projectId\", projectId), dataset && searchParams.set(\"dataset\", dataset), isPublishedId(_id))\n    searchParams.set(\"perspective\", \"published\");\n  else if (isVersionId(_id)) {\n    const versionId = getVersionFromId(_id);\n    searchParams.set(\"perspective\", versionId);\n  }\n  const segments = [baseUrl === \"/\" ? \"\" : baseUrl];\n  workspace && segments.push(workspace);\n  const routerParams = [\n    \"mode=presentation\",\n    `id=${id}`,\n    `type=${type}`,\n    `path=${encodeURIComponent(stringifiedPath)}`\n  ];\n  return tool && routerParams.push(`tool=${tool}`), segments.push(\"intent\", \"edit\", `${routerParams.join(\";\")}?${searchParams}`), segments.join(\"/\");\n}\nfunction resolveStudioBaseRoute(studioUrl) {\n  let baseUrl = typeof studioUrl == \"string\" ? studioUrl : studioUrl.baseUrl;\n  return baseUrl !== \"/\" && (baseUrl = baseUrl.replace(/\\/$/, \"\")), typeof studioUrl == \"string\" ? { baseUrl } : { ...studioUrl, baseUrl };\n}\nconst filterDefault = ({ sourcePath, resultPath, value }) => {\n  if (isValidDate(value) || isValidURL(value))\n    return !1;\n  const endPath = sourcePath.at(-1);\n  return !(sourcePath.at(-2) === \"slug\" && endPath === \"current\" || typeof endPath == \"string\" && (endPath.startsWith(\"_\") || endPath.endsWith(\"Id\")) || sourcePath.some(\n    (path) => path === \"meta\" || path === \"metadata\" || path === \"openGraph\" || path === \"seo\"\n  ) || hasTypeLike(sourcePath) || hasTypeLike(resultPath) || typeof endPath == \"string\" && denylist.has(endPath));\n}, denylist = /* @__PURE__ */ new Set([\n  \"color\",\n  \"colour\",\n  \"currency\",\n  \"email\",\n  \"format\",\n  \"gid\",\n  \"hex\",\n  \"href\",\n  \"hsl\",\n  \"hsla\",\n  \"icon\",\n  \"id\",\n  \"index\",\n  \"key\",\n  \"language\",\n  \"layout\",\n  \"link\",\n  \"linkAction\",\n  \"locale\",\n  \"lqip\",\n  \"page\",\n  \"path\",\n  \"ref\",\n  \"rgb\",\n  \"rgba\",\n  \"route\",\n  \"secret\",\n  \"slug\",\n  \"status\",\n  \"tag\",\n  \"template\",\n  \"theme\",\n  \"type\",\n  \"textTheme\",\n  \"unit\",\n  \"url\",\n  \"username\",\n  \"variant\",\n  \"website\"\n]);\nfunction isValidDate(dateString) {\n  return /^\\d{4}-\\d{2}-\\d{2}/.test(dateString) ? !!Date.parse(dateString) : !1;\n}\nfunction isValidURL(url) {\n  try {\n    new URL(url, url.startsWith(\"/\") ? \"https://acme.com\" : void 0);\n  } catch {\n    return !1;\n  }\n  return !0;\n}\nfunction hasTypeLike(path) {\n  return path.some((segment) => typeof segment == \"string\" && segment.match(/type/i) !== null);\n}\nconst TRUNCATE_LENGTH = 20;\nfunction stegaEncodeSourceMap(result, resultSourceMap, config) {\n  const { filter, logger, enabled } = config;\n  if (!enabled) {\n    const msg = \"config.enabled must be true, don't call this function otherwise\";\n    throw logger?.error?.(`[@sanity/client]: ${msg}`, { result, resultSourceMap, config }), new TypeError(msg);\n  }\n  if (!resultSourceMap)\n    return logger?.error?.(\"[@sanity/client]: Missing Content Source Map from response body\", {\n      result,\n      resultSourceMap,\n      config\n    }), result;\n  if (!config.studioUrl) {\n    const msg = \"config.studioUrl must be defined\";\n    throw logger?.error?.(`[@sanity/client]: ${msg}`, { result, resultSourceMap, config }), new TypeError(msg);\n  }\n  const report = {\n    encoded: [],\n    skipped: []\n  }, resultWithStega = encodeIntoResult(\n    result,\n    resultSourceMap,\n    ({ sourcePath, sourceDocument, resultPath, value }) => {\n      if ((typeof filter == \"function\" ? filter({ sourcePath, resultPath, filterDefault, sourceDocument, value }) : filterDefault({ sourcePath, resultPath, value })) === !1)\n        return logger && report.skipped.push({\n          path: prettyPathForLogging(sourcePath),\n          value: `${value.slice(0, TRUNCATE_LENGTH)}${value.length > TRUNCATE_LENGTH ? \"...\" : \"\"}`,\n          length: value.length\n        }), value;\n      logger && report.encoded.push({\n        path: prettyPathForLogging(sourcePath),\n        value: `${value.slice(0, TRUNCATE_LENGTH)}${value.length > TRUNCATE_LENGTH ? \"...\" : \"\"}`,\n        length: value.length\n      });\n      const { baseUrl, workspace, tool } = resolveStudioBaseRoute(\n        typeof config.studioUrl == \"function\" ? config.studioUrl(sourceDocument) : config.studioUrl\n      );\n      if (!baseUrl) return value;\n      const { _id: id, _type: type, _projectId: projectId, _dataset: dataset } = sourceDocument;\n      return C(\n        value,\n        {\n          origin: \"sanity.io\",\n          href: createEditUrl({\n            baseUrl,\n            workspace,\n            tool,\n            id,\n            type,\n            path: sourcePath,\n            ...!config.omitCrossDatasetReferenceData && { dataset, projectId }\n          })\n        },\n        // We use custom logic to determine if we should skip encoding\n        !1\n      );\n    }\n  );\n  if (logger) {\n    const isSkipping = report.skipped.length, isEncoding = report.encoded.length;\n    if ((isSkipping || isEncoding) && ((logger?.groupCollapsed || logger.log)?.(\"[@sanity/client]: Encoding source map into result\"), logger.log?.(\n      `[@sanity/client]: Paths encoded: ${report.encoded.length}, skipped: ${report.skipped.length}`\n    )), report.encoded.length > 0 && (logger?.log?.(\"[@sanity/client]: Table of encoded paths\"), (logger?.table || logger.log)?.(report.encoded)), report.skipped.length > 0) {\n      const skipped = /* @__PURE__ */ new Set();\n      for (const { path } of report.skipped)\n        skipped.add(path.replace(reKeySegment, \"0\").replace(/\\[\\d+\\]/g, \"[]\"));\n      logger?.log?.(\"[@sanity/client]: List of skipped paths\", [...skipped.values()]);\n    }\n    (isSkipping || isEncoding) && logger?.groupEnd?.();\n  }\n  return resultWithStega;\n}\nfunction prettyPathForLogging(path) {\n  return toString(jsonPathToStudioPath(path));\n}\nvar stegaEncodeSourceMap$1 = /* @__PURE__ */ Object.freeze({\n  __proto__: null,\n  stegaEncodeSourceMap\n});\nexport {\n  encodeIntoResult,\n  stegaEncodeSourceMap,\n  stegaEncodeSourceMap$1\n};\n//# sourceMappingURL=stegaEncodeSourceMap.js.map\n"],"names":["reKeySegment","toString","path","Array","isArray","Error","reduce","target","segment","i","segmentType","test","trim","isKeySegment","_key","from","to","JSON","stringify","ESCAPE","UNESCAPE","parseJsonPath","parsed","parseRe","match","exec","key","replace","m","push","_index","parseInt","jsonPathToStudioPath","map","resolveMapping","resultPath","csm","mappings","resultMappingPath","join","jsonPath","mapping","matchedPath","pathSuffix","Object","entries","filter","startsWith","sort","key1","key2","length","substring","walkMap","value","mappingFn","v","idx","isRecord","concat","_type","result","children","text","fromEntries","k","encodeIntoResult","encoder","resolveMappingResult","type","source","sourceDocument","documents","document","sourcePath","paths","matchPathSegments","fullSourceSegments","slice","PATH_SEPARATOR","DRAFTS_PREFIX","VERSION_PREFIX","isDraftId","id","isVersionId","createEditUrl","options","baseUrl","workspace","_workspace","tool","_tool","_id","projectId","dataset","endsWith","split","getPublishedId","stringifiedPath","searchParams","URLSearchParams","set","isPublishedId","versionId","_versionPrefix","_publishedId","getVersionFromId","segments","routerParams","encodeURIComponent","filterDefault","dateString","Date","parse","url","URL","isValidURL","endPath","at","some","hasTypeLike","denylist","has","Set","stegaEncodeSourceMap","resultSourceMap","config","logger","enabled","msg","_a","error","call","TypeError","_b","studioUrl","_c","report","encoded","skipped","resultWithStega","prettyPathForLogging","resolveStudioBaseRoute","_projectId","_dataset","C","origin","href","omitCrossDatasetReferenceData","isSkipping","isEncoding","_d","groupCollapsed","log","_e","_f","_g","table","add","_h","values","_i","groupEnd","stegaEncodeSourceMap$1","freeze","__proto__"],"mappings":"gDACA,MAAMA,EAAe,2BAIrB,SAASC,EAASC,GAChB,IAAKC,MAAMC,QAAQF,GACjB,MAAM,IAAIG,MAAM,wBAClB,OAAOH,EAAKI,OAAO,CAACC,EAAQC,EAASC,KACnC,MAAMC,SAAqBF,EAC3B,GAAoB,WAAhBE,EACF,MAAO,GAAGH,KAAUC,KACtB,GAAoB,WAAhBE,EACF,MAAO,GAAGH,IAAe,IAANE,EAAU,GAAK,MAAMD,IAC1C,GAZJ,SAAsBA,GACpB,MAAyB,iBAAXA,EAAsBR,EAAaW,KAAKH,EAAQI,QAA4B,iBAAXJ,GAAuB,SAAUA,CAClH,CAUQK,CAAaL,IAAYA,EAAQM,KACnC,MAAO,GAAGP,YAAiBC,EAAQM,SACrC,GAAIX,MAAMC,QAAQI,GAAU,CAC1B,MAAOO,EAAMC,GAAMR,EACnB,MAAO,GAAGD,KAAUQ,KAAQC,IAC9B,CACA,MAAM,IAAIX,MAAM,8BAA8BY,KAAKC,UAAUV,SAC5D,GACL,CACA,MAAMW,EAAS,CACb,KAAM,MACN,KAAM,MACN,KAAM,MACN,KAAK,MACL,IAAK,MACL,KAAM,QACLC,EAAW,CACZ,MAAO,KACP,MAAO,KAEP,MAAO,KACP,MAAO,KACP,MAAO,IACP,OAAQ,MAKV,SAASC,EAAcnB,GACrB,MAAMoB,EAAS,GAAIC,EAAU,oDAC7B,IAAIC,EACJ,KAAwC,QAAhCA,EAAQD,EAAQE,KAAKvB,KAAmB,CAC9C,QAAiB,IAAbsB,EAAM,GAAe,CACvB,MAAME,EAAMF,EAAM,GAAGG,QAAQ,oBAAsBC,GAAMR,EAASQ,IAClEN,EAAOO,KAAKH,GACZ,QACF,CACA,QAAiB,IAAbF,EAAM,IAIV,QAAiB,IAAbA,EAAM,GAAe,CACvB,MAAMV,EAAOU,EAAM,GAAGG,QAAQ,WAAaC,GAAMR,EAASQ,IAC1DN,EAAOO,KAAK,CACVf,OACAgB,QAAQ,IAEV,QACF,OAVER,EAAOO,KAAKE,SAASP,EAAM,GAAI,IAWnC,CACA,OAAOF,CACT,CACA,SAASU,EAAqB9B,GAC5B,OAAOA,EAAK+B,IAAKzB,IACf,GAAsB,iBAAXA,GAAyC,iBAAXA,EACvC,OAAOA,EACT,GAAqB,KAAjBA,EAAQM,KACV,MAAO,CAAEA,KAAMN,EAAQM,MACzB,IAAuB,IAAnBN,EAAQsB,OACV,OAAOtB,EAAQsB,OACjB,MAAM,IAAIzB,MAAM,mBAAmBY,KAAKC,UAAUV,OAEtD,CAUA,SAAS0B,EAAeC,EAAYC,GAClC,KAAK,MAAAA,OAAA,EAAAA,EAAKC,UACR,OACF,MAAMC,EAlDR,SAAkBpC,GAChB,MAAO,IAAIA,EAAK+B,IAAKzB,GAA8B,iBAAXA,EAAsB,KAAKA,EAAQmB,QAAQ,iBAAmBH,GAAUL,EAAOK,QAAgC,iBAAXhB,EAAsB,IAAIA,KAA8B,KAAjBA,EAAQM,KAAc,eAAeN,EAAQM,KAAKa,QAAQ,SAAWH,GAAUL,EAAOK,SAAe,IAAIhB,EAAQsB,WAAWS,KAAK,KACtT,CAgD4BC,CAA+BL,EAX7CF,IAAKzB,IACf,GAAsB,iBAAXA,GAAyC,iBAAXA,EACvC,OAAOA,EACT,IAAuB,IAAnBA,EAAQsB,OACV,OAAOtB,EAAQsB,OACjB,MAAM,IAAIzB,MAAM,mBAAmBY,KAAKC,UAAUV,SAOpD,QAAwC,IAApC4B,EAAIC,SAASC,GACf,MAAO,CACLG,QAASL,EAAIC,SAASC,GACtBI,YAAaJ,EACbK,WAAY,IAEhB,MAAMN,EAAWO,OAAOC,QAAQT,EAAIC,UAAUS,OAAO,EAAEpB,KAASY,EAAkBS,WAAWrB,IAAMsB,KAAK,EAAEC,IAAQC,KAAUA,EAAKC,OAASF,EAAKE,QAC/I,GAAuB,GAAnBd,EAASc,OACX,OACF,MAAOT,EAAaD,GAAWJ,EAAS,GACxC,MAAO,CAAEI,UAASC,cAAaC,WAD0BL,EAAkBc,UAAUV,EAAYS,QAEnG,CAIA,SAASE,EAAQC,EAAOC,EAAWrD,EAAO,IACxC,GAJF,SAAiBoD,GACf,OAAiB,OAAVA,GAAkBnD,MAAMC,QAAQkD,EACzC,CAEMlD,CAAQkD,GACV,OAAOA,EAAMrB,IAAI,CAACuB,EAAGC,KACnB,GAAIC,EAASF,GAAI,CACf,MAAM1C,EAAO0C,EAAE1C,KACf,GAAmB,iBAARA,EACT,OAAOuC,EAAQG,EAAGD,EAAWrD,EAAKyD,OAAO,CAAE7C,OAAMgB,OAAQ2B,IAC7D,CACA,OAAOJ,EAAQG,EAAGD,EAAWrD,EAAKyD,OAAOF,MAE7C,GAAIC,EAASJ,GAAQ,CACnB,GAAoB,UAAhBA,EAAMM,OAAqC,SAAhBN,EAAMM,MAAkB,CACrD,MAAMC,EAAS,IAAKP,GACpB,MAAuB,UAAhBA,EAAMM,MAAoBC,EAAOC,SAAWT,EAAQC,EAAMQ,SAAUP,EAAWrD,EAAKyD,OAAO,aAA+B,SAAhBL,EAAMM,QAAqBC,EAAOE,KAAOV,EAAQC,EAAMS,KAAMR,EAAWrD,EAAKyD,OAAO,UAAWE,CAClN,CACA,OAAOjB,OAAOoB,YACZpB,OAAOC,QAAQS,GAAOrB,IAAI,EAAEgC,EAAGT,KAAO,CAACS,EAAGZ,EAAQG,EAAGD,EAAWrD,EAAKyD,OAAOM,MAEhF,CACA,OAAOV,EAAUD,EAAOpD,EAC1B,CACA,SAASgE,EAAiBL,EAAQzB,EAAK+B,GACrC,OAAOd,EAAQQ,EAAQ,CAACP,EAAOpD,KAC7B,GAAoB,iBAAToD,EACT,OAAOA,EACT,MAAMc,EAAuBlC,EAAehC,EAAMkC,GAClD,IAAKgC,EACH,OAAOd,EACT,MAAMb,QAAEA,EAAAC,YAASA,GAAgB0B,EACjC,GAAqB,UAAjB3B,EAAQ4B,MAA4C,kBAAxB5B,EAAQ6B,OAAOD,KAC7C,OAAOf,EACT,MAAMiB,EAAiBnC,EAAIoC,UAAU/B,EAAQ6B,OAAOG,UAAWC,EAAatC,EAAIuC,MAAMlC,EAAQ6B,OAAOpE,MAAO0E,EAAoBvD,EAAcqB,GAAcmC,EAAqBxD,EAAcqD,GAAYf,OAAOzD,EAAK4E,MAAMF,EAAkBzB,SAC/O,OAAOgB,EAAQ,CACbO,WAAYG,EACZN,iBACApC,WAAYjC,EACZoD,WAGN,CACA,MAA6DyB,EAAiB,IAAKC,EAAgB,SAAmBD,IAAkBE,EAAiB,WAAoBF,IAC7K,SAASG,EAAUC,GACjB,OAAOA,EAAGpC,WAAWiC,EACvB,CACA,SAASI,EAAYD,GACnB,OAAOA,EAAGpC,WAAWkC,EACvB,CAYA,SAASI,EAAcC,GACrB,MAAMC,QACJA,EACAC,UAAWC,EAAa,UACxBC,KAAMC,EAAQ,UACdR,GAAIS,EAAAvB,KACJA,EAAAnE,KACAA,EAAA2F,UACAA,EAAAC,QACAA,GACER,EACJ,IAAKC,EACH,MAAM,IAAIlF,MAAM,uBAClB,IAAKH,EACH,MAAM,IAAIG,MAAM,oBAClB,IAAKuF,EACH,MAAM,IAAIvF,MAAM,kBAClB,GAAgB,MAAZkF,GAAmBA,EAAQQ,SAAS,KACtC,MAAM,IAAI1F,MAAM,qCAClB,MAAMmF,EAA2B,YAAfC,OAA2B,EAASA,EAAYC,EAAiB,YAAVC,OAAsB,EAASA,EAAOR,EAtBjH,SAAwBA,GACtB,OAAOC,EAAYD,GAAMA,EAAGa,MAAMjB,GAAgBD,MAAM,GAAGvC,KAAKwC,GAAkBG,EAAUC,GAAMA,EAAGL,MAAME,EAAc7B,QAAUgC,CACrI,CAoBsHc,CAAeL,GAAMM,EAAkB/F,MAAMC,QAAQF,GAAQD,EAAS+B,EAAqB9B,IAASA,EAAMiG,EAAe,IAAIC,gBAAgB,CAC/Pb,UACAJ,KACAd,OACAnE,KAAMgG,IAER,GAAIV,GAAaW,EAAaE,IAAI,YAAab,GAAYE,GAAQS,EAAaE,IAAI,OAAQX,GAAOG,GAAaM,EAAaE,IAAI,YAAaR,GAAYC,GAAWK,EAAaE,IAAI,UAAWP,GApCnM,SAAuBX,GACrB,OAAQD,EAAUC,KAAQC,EAAYD,EACxC,CAkC6MmB,CAAcV,GACvNO,EAAaE,IAAI,cAAe,kBAAW,GACpCjB,EAAYQ,GAAM,CACzB,MAAMW,EApCV,SAA0BpB,GACxB,IAAKC,EAAYD,GAAK,OACtB,MAAOqB,EAAgBD,KAAcE,GAAgBtB,EAAGa,MAAMjB,GAC9D,OAAOwB,CACT,CAgCsBG,CAAiBd,GACnCO,EAAaE,IAAI,cAAeE,EAClC,CACA,MAAMI,EAAW,CAAa,MAAZpB,EAAkB,GAAKA,GACzCC,GAAamB,EAAS9E,KAAK2D,GAC3B,MAAMoB,EAAe,CACnB,oBACA,MAAMzB,IACN,QAAQd,IACR,QAAQwC,mBAAmBX,MAE7B,OAAOR,GAAQkB,EAAa/E,KAAK,QAAQ6D,KAASiB,EAAS9E,KAAK,SAAU,OAAQ,GAAG+E,EAAarE,KAAK,QAAQ4D,KAAiBQ,EAASpE,KAAK,IAChJ,CAKA,MAAMuE,EAAgB,EAAGpC,aAAYvC,aAAYmB,YAC/C,GAgDO,qBAAqB3C,KADToG,EA/CHzD,IAgDiC0D,KAAKC,MAAMF,IAE9D,SAAoBG,GAClB,IACE,IAAIC,IAAID,EAAKA,EAAInE,WAAW,KAAO,wBAAqB,EAC1D,CAAA,MACE,OAAO,CACT,CACA,OAAO,CACT,CAzD4BqE,CAAW9D,GACnC,OAAO,EA8CX,IAAqByD,EA7CnB,MAAMM,EAAU3C,EAAW4C,IAAG,GAC9B,QAA+B,SAAtB5C,EAAW4C,QAAiC,YAAZD,GAA2C,iBAAXA,IAAwBA,EAAQtE,WAAW,MAAQsE,EAAQtB,SAAS,QAAUrB,EAAW6C,KAC/JrH,GAAkB,SAATA,GAA4B,aAATA,GAAgC,cAATA,GAAiC,QAATA,IACzEsH,EAAY9C,IAAe8C,EAAYrF,IAAiC,iBAAXkF,GAAuBI,EAASC,IAAIL,KACrGI,MAA+BE,IAAI,CACpC,QACA,SACA,WACA,QACA,SACA,MACA,MACA,OACA,MACA,OACA,OACA,KACA,QACA,MACA,WACA,SACA,OACA,aACA,SACA,OACA,OACA,OACA,MACA,MACA,OACA,QACA,SACA,OACA,SACA,MACA,WACA,QACA,OACA,YACA,OACA,MACA,WACA,UACA,YAaF,SAASH,EAAYtH,GACnB,OAAOA,EAAKqH,KAAM/G,GAA8B,iBAAXA,GAAkD,OAA3BA,EAAQgB,MAAM,SAC5E,CAEA,SAASoG,EAAqB/D,EAAQgE,EAAiBC,yBACrD,MAAMhF,OAAEA,EAAAiF,OAAQA,EAAAC,QAAQA,GAAYF,EACpC,IAAKE,EAAS,CACZ,MAAMC,EAAM,kEACZ,MAAM,OAAAC,EAAA,MAAAH,OAAA,EAAAA,EAAQI,QAARD,EAAAE,KAAAL,EAAgB,qBAAqBE,IAAO,CAAEpE,SAAQgE,kBAAiBC,WAAW,IAAIO,UAAUJ,EACxG,CACA,IAAKJ,EACH,OAAO,OAAAS,EAAA,MAAAP,OAAA,EAAAA,EAAQI,QAARG,EAAAF,KAAAL,EAAgB,kEAAmE,CACxFlE,SACAgE,kBACAC,WACEjE,EACN,IAAKiE,EAAOS,UAAW,CACrB,MAAMN,EAAM,mCACZ,MAAM,OAAAO,EAAA,MAAAT,OAAA,EAAAA,EAAQI,QAARK,EAAAJ,KAAAL,EAAgB,qBAAqBE,IAAO,CAAEpE,SAAQgE,kBAAiBC,WAAW,IAAIO,UAAUJ,EACxG,CACA,MAAMQ,EAAS,CACbC,QAAS,GACTC,QAAS,IACRC,EAAkB1E,EACnBL,EACAgE,EACA,EAAGnD,aAAYH,iBAAgBpC,aAAYmB,YACzC,IAAoK,KAA9I,mBAAVR,EAAuBA,EAAO,CAAE4B,aAAYvC,aAAY2E,gBAAevC,iBAAgBjB,UAAWwD,EAAc,CAAEpC,aAAYvC,aAAYmB,WACpJ,OAAOyE,GAAUU,EAAOE,QAAQ9G,KAAK,CACnC3B,KAAM2I,EAAqBnE,GAC3BpB,MAAO,GAAGA,EAAMwB,MAAM,EA3BR,MA2B8BxB,EAAMH,OA3BpC,GA2B+D,MAAQ,KACrFA,OAAQG,EAAMH,SACZG,EACNyE,GAAUU,EAAOC,QAAQ7G,KAAK,CAC5B3B,KAAM2I,EAAqBnE,GAC3BpB,MAAO,GAAGA,EAAMwB,MAAM,EAhCN,MAgC4BxB,EAAMH,OAhClC,GAgC6D,MAAQ,KACrFA,OAAQG,EAAMH,SAEhB,MAAMoC,QAAEA,EAAAC,UAASA,EAAAE,KAAWA,GArGlC,SAAgC6C,GAC9B,IAAIhD,EAA8B,iBAAbgD,EAAwBA,EAAYA,EAAUhD,QACnE,MAAmB,MAAZA,IAAoBA,EAAUA,EAAQ5D,QAAQ,MAAO,KAA0B,iBAAb4G,EAAwB,CAAEhD,WAAY,IAAKgD,EAAWhD,UACjI,CAkG2CuD,CACR,mBAApBhB,EAAOS,UAA0BT,EAAOS,UAAUhE,GAAkBuD,EAAOS,WAEpF,IAAKhD,EAAS,OAAOjC,EACrB,MAAQsC,IAAKT,EAAIvB,MAAOS,EAAM0E,WAAYlD,EAAWmD,SAAUlD,GAAYvB,EAC3E,OAAO0E,EACL3F,EACA,CACE4F,OAAQ,YACRC,KAAM9D,EAAc,CAClBE,UACAC,YACAE,OACAP,KACAd,OACAnE,KAAMwE,MACFoD,EAAOsB,+BAAiC,CAAEtD,UAASD,iBAI3D,KAIN,GAAIkC,EAAQ,CACV,MAAMsB,EAAaZ,EAAOE,QAAQxF,OAAQmG,EAAab,EAAOC,QAAQvF,OACtE,IAAKkG,GAAcC,KAAiB,OAAAC,GAAA,MAAAxB,OAAA,EAAAA,EAAQyB,iBAAkBzB,EAAO0B,MAAjCF,EAAwC,qDAAsD,OAAAG,EAAA3B,EAAO0B,MAAPC,EAAAtB,KAAAL,EAChI,oCAAoCU,EAAOC,QAAQvF,oBAAoBsF,EAAOE,QAAQxF,WACpFsF,EAAOC,QAAQvF,OAAS,IAAM,OAAAwG,EAAA,MAAA5B,OAAA,EAAAA,EAAQ0B,eAAM,4CAA8C,OAAAG,GAAA,MAAA7B,OAAA,EAAAA,EAAQ8B,QAAS9B,EAAO0B,MAAxBG,EAA+BnB,EAAOC,UAAWD,EAAOE,QAAQxF,OAAS,EAAG,CACxK,MAAMwF,MAA8BhB,IACpC,IAAA,MAAWzH,KAAEA,KAAUuI,EAAOE,QAC5BA,EAAQmB,IAAI5J,EAAKyB,QAAQ3B,EAAc,KAAK2B,QAAQ,WAAY,OAClE,OAAAoI,EAAA,MAAAhC,OAAA,EAAAA,EAAQ0B,MAARM,EAAA3B,KAAAL,EAAc,0CAA2C,IAAIY,EAAQqB,UACvE,EACCX,GAAcC,KAAe,OAAAW,EAAA,MAAAlC,OAAA,EAAAA,EAAQmC,WAARD,EAAA7B,KAAAL,GAChC,CACA,OAAOa,CACT,CACA,SAASC,EAAqB3I,GAC5B,OAAOD,EAAS+B,EAAqB9B,GACvC,CACG,IAACiK,SAAgDC,OAAO,CACzDC,UAAW,KACXzC","x_google_ignoreList":[0]}