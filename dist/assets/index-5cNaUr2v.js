import{r as e,a as t,g as s,b as n,u as r,L as i,c as a,N as o,R as l,d as c,e as d,B as u,f as h,h as p}from"./react-B9P95a-F.js";import{c as m}from"./vendor-Cf5CFPVz.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var f,g,y={exports:{}},x={};var v,b=(g||(g=1,y.exports=function(){if(f)return x;f=1;var t=e(),s=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function o(e,t,n){var o,l={},c=null,d=null;for(o in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)r.call(t,o)&&!a.hasOwnProperty(o)&&(l[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===l[o]&&(l[o]=t[o]);return{$$typeof:s,type:e,key:c,ref:d,props:l,_owner:i.current}}return x.Fragment=n,x.jsx=o,x.jsxs=o,x}()),y.exports),w={};const N=s(function(){if(v)return w;v=1;var e=t();return w.createRoot=e.createRoot,w.hydrateRoot=e.hydrateRoot,w}()),S=n.createContext(),E=({children:e})=>{const[t,s]=n.useState([]),[r,i]=n.useState(!1);n.useEffect(()=>{const e=localStorage.getItem("svasamCart");if(e)try{s(JSON.parse(e))}catch(t){console.error("Failed to parse cart from localStorage",t),localStorage.removeItem("svasamCart")}},[]),n.useEffect(()=>{t.length>0?localStorage.setItem("svasamCart",JSON.stringify(t)):localStorage.removeItem("svasamCart")},[t]);const a=e=>{s(t=>t.filter(t=>t.id!==e))},o=t.reduce((e,t)=>e+t.price*t.quantity,0),l=t.reduce((e,t)=>e+t.quantity,0);return b.jsx(S.Provider,{value:{cart:t,isOpen:r,setIsOpen:i,addToCart:e=>{s(t=>{const s=t.findIndex(t=>t.id===e.id);if(s>=0){const n=[...t];return n[s]={...n[s],quantity:n[s].quantity+e.quantity},n}return[...t,e]}),i(!0)},removeFromCart:a,updateQuantity:(e,t)=>{t<=0?a(e):s(s=>s.map(s=>s.id===e?{...s,quantity:t}:s))},clearCart:()=>{s([]),localStorage.removeItem("svasamCart")},cartTotal:o,itemCount:l},children:e})},j=()=>{const e=n.useContext(S);if(!e)throw new Error("useCart must be used within a CartProvider");return e};var T={};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _=function(e){const t=[];let s=0;for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);r<128?t[s++]=r:r<2048?(t[s++]=r>>6|192,t[s++]=63&r|128):55296==(64512&r)&&n+1<e.length&&56320==(64512&e.charCodeAt(n+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++n)),t[s++]=r>>18|240,t[s++]=r>>12&63|128,t[s++]=r>>6&63|128,t[s++]=63&r|128):(t[s++]=r>>12|224,t[s++]=r>>6&63|128,t[s++]=63&r|128)}return t},I={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let r=0;r<e.length;r+=3){const t=e[r],i=r+1<e.length,a=i?e[r+1]:0,o=r+2<e.length,l=o?e[r+2]:0,c=t>>2,d=(3&t)<<4|a>>4;let u=(15&a)<<2|l>>6,h=63&l;o||(h=64,i||(u=64)),n.push(s[c],s[d],s[u],s[h])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(_(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let s=0,n=0;for(;s<e.length;){const r=e[s++];if(r<128)t[n++]=String.fromCharCode(r);else if(r>191&&r<224){const i=e[s++];t[n++]=String.fromCharCode((31&r)<<6|63&i)}else if(r>239&&r<365){const i=((7&r)<<18|(63&e[s++])<<12|(63&e[s++])<<6|63&e[s++])-65536;t[n++]=String.fromCharCode(55296+(i>>10)),t[n++]=String.fromCharCode(56320+(1023&i))}else{const i=e[s++],a=e[s++];t[n++]=String.fromCharCode((15&r)<<12|(63&i)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const s=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let r=0;r<e.length;){const t=s[e.charAt(r++)],i=r<e.length?s[e.charAt(r)]:0;++r;const a=r<e.length?s[e.charAt(r)]:64;++r;const o=r<e.length?s[e.charAt(r)]:64;if(++r,null==t||null==i||null==a||null==o)throw new C;const l=t<<2|i>>4;if(n.push(l),64!==a){const e=i<<4&240|a>>2;if(n.push(e),64!==o){const e=a<<6&192|o;n.push(e)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class C extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const k=function(e){return function(e){const t=_(e);return I.encodeByteArray(t,!0)}(e).replace(/\./g,"")},A=function(e){try{return I.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const P=()=>
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,O=()=>{try{return P()||(()=>{if("undefined"==typeof process)return;const e=T.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(s){return}const t=e&&A(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},R=e=>O()?.emulatorHosts?.[e],L=()=>O()?.config,M=e=>O()?.[`_${e}`];
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class D{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,s))}}}
/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function F(e){return(await fetch(e,{credentials:"include"})).ok}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V={};let B=!1;function z(e,t){if("undefined"==typeof window||"undefined"==typeof document||!U(window.location.host)||V[e]===t||V[e]||B)return;function s(e){return`__firebase__banner__${e}`}V[e]=t;const n="__firebase__banner",r=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(V))V[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function i(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{B=!0,function(){const e=document.getElementById(n);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),s=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),s=!0),{created:s,element:t}}(n),t=s("text"),a=document.getElementById(t)||document.createElement("span"),o=s("learnmore"),l=document.getElementById(o)||document.createElement("a"),c=s("preprendIcon"),d=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,o);const s=i();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(d,c),t.append(d,a,l,s),document.body.appendChild(t)}r?(a.innerText="Preview backend disconnected.",d.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(d.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function $(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function H(){return!function(){const e=O()?.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function W(){try{return"object"==typeof indexedDB}catch(e){return!1}}function G(){return new Promise((e,t)=>{try{let s=!0;const n="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(n);r.onsuccess=()=>{r.result.close(),s||self.indexedDB.deleteDatabase(n),e(!0)},r.onupgradeneeded=()=>{s=!1},r.onerror=()=>{t(r.error?.message||"")}}catch(s){t(s)}})}class K extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name="FirebaseError",Object.setPrototypeOf(this,K.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Y.prototype.create)}}class Y{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(Q,(e,s)=>{const n=t[s];return null!=n?String(n):`<${s}?>`})}(r,s):"Error",a=`${this.serviceName}: ${i} (${n}).`;return new K(n,a,s)}}const Q=/\{\$([^}]+)}/g;function X(e,t){if(e===t)return!0;const s=Object.keys(e),n=Object.keys(t);for(const r of s){if(!n.includes(r))return!1;const s=e[r],i=t[r];if(J(s)&&J(i)){if(!X(s,i))return!1}else if(s!==i)return!1}for(const r of n)if(!s.includes(r))return!1;return!0}function J(e){return null!==e&&"object"==typeof e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(e){const t=[];for(const[s,n]of Object.entries(e))Array.isArray(n)?n.forEach(e=>{t.push(encodeURIComponent(s)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(s)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function ee(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[s,n]=e.split("=");t[decodeURIComponent(s)]=decodeURIComponent(n)}}),t}function te(e){const t=e.indexOf("?");if(!t)return"";const s=e.indexOf("#",t);return e.substring(t,s>0?s:void 0)}class se{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let n;if(void 0===e&&void 0===t&&void 0===s)throw new Error("Missing Observer.");n=function(e,t){if("object"!=typeof e||null===e)return!1;for(const s of t)if(s in e&&"function"==typeof e[s])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:s},void 0===n.next&&(n.next=ne),void 0===n.error&&(n.error=ne),void 0===n.complete&&(n.complete=ne);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?n.error(this.finalError):n.complete()}catch(e){}}),this.observers.push(n),r}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(s){"undefined"!=typeof console&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ne(){}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function re(e,t=1e3,s=2){const n=t*Math.pow(s,e),r=Math.round(.5*n*(Math.random()-.5)*2);return Math.min(144e5,n+r)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ie(e){return e&&e._delegate?e._delegate:e}class ae{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new D;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&e.resolve(s)}catch(s){}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(!this.isInitialized(t)&&!this.shouldAutoInitialize()){if(s)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:t})}catch(n){if(s)return null;throw n}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e))try{this.getOrInitializeService({instanceIdentifier:oe})}catch(t){}for(const[e,s]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});s.resolve(e)}catch(t){}}}}clearInstance(e=oe){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=oe){return this.instances.has(e)}getOptions(e=oe){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const n=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[r,i]of this.instancesDeferred.entries()){s===this.normalizeInstanceIdentifier(r)&&i.resolve(n)}return n}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),n=this.onInitCallbacks.get(s)??new Set;n.add(e),this.onInitCallbacks.set(s,n);const r=this.instances.get(s);return r&&e(r,s),()=>{n.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const n of s)try{n(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===oe?void 0:n),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}var n;return s||null}normalizeInstanceIdentifier(e=oe){return this.component?this.component.multipleInstances?e:oe:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ce{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new le(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var de,ue;(ue=de||(de={}))[ue.DEBUG=0]="DEBUG",ue[ue.VERBOSE=1]="VERBOSE",ue[ue.INFO=2]="INFO",ue[ue.WARN=3]="WARN",ue[ue.ERROR=4]="ERROR",ue[ue.SILENT=5]="SILENT";const he={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},pe=de.INFO,me={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},fe=(e,t,...s)=>{if(t<e.logLevel)return;const n=(new Date).toISOString(),r=me[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[r](`[${n}]  ${e.name}:`,...s)};class ge{constructor(e){this.name=e,this._logLevel=pe,this._logHandler=fe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?he[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}}let ye,xe;const ve=new WeakMap,be=new WeakMap,we=new WeakMap,Ne=new WeakMap,Se=new WeakMap;let Ee={get(e,t,s){if(e instanceof IDBTransaction){if("done"===t)return be.get(e);if("objectStoreNames"===t)return e.objectStoreNames||we.get(e);if("store"===t)return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return _e(e[t])},set:(e,t,s)=>(e[t]=s,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function je(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(xe||(xe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(Ie(this),t),_e(ve.get(this))}:function(...t){return _e(e.apply(Ie(this),t))}:function(t,...s){const n=e.call(Ie(this),t,...s);return we.set(n,t.sort?t.sort():[t]),_e(n)}}function Te(e){return"function"==typeof e?je(e):(e instanceof IDBTransaction&&function(e){if(be.has(e))return;const t=new Promise((t,s)=>{const n=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",i),e.removeEventListener("abort",i)},r=()=>{t(),n()},i=()=>{s(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",r),e.addEventListener("error",i),e.addEventListener("abort",i)});be.set(e,t)}(e),t=e,(ye||(ye=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Ee):e);var t}function _e(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,s)=>{const n=()=>{e.removeEventListener("success",r),e.removeEventListener("error",i)},r=()=>{t(_e(e.result)),n()},i=()=>{s(e.error),n()};e.addEventListener("success",r),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&ve.set(t,e)}).catch(()=>{}),Se.set(t,e),t}(e);if(Ne.has(e))return Ne.get(e);const t=Te(e);return t!==e&&(Ne.set(e,t),Se.set(t,e)),t}const Ie=e=>Se.get(e);function Ce(e,t,{blocked:s,upgrade:n,blocking:r,terminated:i}={}){const a=indexedDB.open(e,t),o=_e(a);return n&&a.addEventListener("upgradeneeded",e=>{n(_e(a.result),e.oldVersion,e.newVersion,_e(a.transaction),e)}),s&&a.addEventListener("blocked",e=>s(e.oldVersion,e.newVersion,e)),o.then(e=>{i&&e.addEventListener("close",()=>i()),r&&e.addEventListener("versionchange",e=>r(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}const ke=["get","getKey","getAll","getAllKeys","count"],Ae=["put","add","delete","clear"],Pe=new Map;function Oe(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(Pe.get(t))return Pe.get(t);const s=t.replace(/FromIndex$/,""),n=t!==s,r=Ae.includes(s);if(!(s in(n?IDBIndex:IDBObjectStore).prototype)||!r&&!ke.includes(s))return;const i=async function(e,...t){const i=this.transaction(e,r?"readwrite":"readonly");let a=i.store;return n&&(a=a.index(t.shift())),(await Promise.all([a[s](...t),r&&i.done]))[0]};return Pe.set(t,i),i}Ee=(e=>({...e,get:(t,s,n)=>Oe(t,s)||e.get(t,s,n),has:(t,s)=>!!Oe(t,s)||e.has(t,s)}))(Ee);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Re{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===t?.type}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const Le="@firebase/app",Me="0.14.2",De=new ge("@firebase/app"),Ue="@firebase/app-compat",Fe="@firebase/analytics-compat",Ve="@firebase/analytics",Be="@firebase/app-check-compat",ze="@firebase/app-check",qe="@firebase/auth",$e="@firebase/auth-compat",He="@firebase/database",We="@firebase/data-connect",Ge="@firebase/database-compat",Ke="@firebase/functions",Ye="@firebase/functions-compat",Qe="@firebase/installations",Xe="@firebase/installations-compat",Je="@firebase/messaging",Ze="@firebase/messaging-compat",et="@firebase/performance",tt="@firebase/performance-compat",st="@firebase/remote-config",nt="@firebase/remote-config-compat",rt="@firebase/storage",it="@firebase/storage-compat",at="@firebase/firestore",ot="@firebase/ai",lt="@firebase/firestore-compat",ct="firebase",dt="[DEFAULT]",ut={[Le]:"fire-core",[Ue]:"fire-core-compat",[Ve]:"fire-analytics",[Fe]:"fire-analytics-compat",[ze]:"fire-app-check",[Be]:"fire-app-check-compat",[qe]:"fire-auth",[$e]:"fire-auth-compat",[He]:"fire-rtdb",[We]:"fire-data-connect",[Ge]:"fire-rtdb-compat",[Ke]:"fire-fn",[Ye]:"fire-fn-compat",[Qe]:"fire-iid",[Xe]:"fire-iid-compat",[Je]:"fire-fcm",[Ze]:"fire-fcm-compat",[et]:"fire-perf",[tt]:"fire-perf-compat",[st]:"fire-rc",[nt]:"fire-rc-compat",[rt]:"fire-gcs",[it]:"fire-gcs-compat",[at]:"fire-fst",[lt]:"fire-fst-compat",[ot]:"fire-vertex","fire-js":"fire-js",[ct]:"fire-js-all"},ht=new Map,pt=new Map,mt=new Map;function ft(e,t){try{e.container.addComponent(t)}catch(s){De.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,s)}}function gt(e){const t=e.name;if(mt.has(t))return De.debug(`There were multiple attempts to register component ${t}.`),!1;mt.set(t,e);for(const s of ht.values())ft(s,e);for(const s of pt.values())ft(s,e);return!0}function yt(e,t){const s=e.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),e.container.getProvider(t)}function xt(e){return null!=e&&void 0!==e.settings}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vt=new Y("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class bt{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ae("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vt.create("app-deleted",{appName:this._name})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wt="12.2.0";function Nt(e,t={}){let s=e;if("object"!=typeof t){t={name:t}}const n={name:dt,automaticDataCollectionEnabled:!0,...t},r=n.name;if("string"!=typeof r||!r)throw vt.create("bad-app-name",{appName:String(r)});if(s||(s=L()),!s)throw vt.create("no-options");const i=ht.get(r);if(i){if(X(s,i.options)&&X(n,i.config))return i;throw vt.create("duplicate-app",{appName:r})}const a=new ce(r);for(const l of mt.values())a.addComponent(l);const o=new bt(s,n,a);return ht.set(r,o),o}function St(e=dt){const t=ht.get(e);if(!t&&e===dt&&L())return Nt();if(!t)throw vt.create("no-app",{appName:e});return t}function Et(e,t,s){let n=ut[e]??e;s&&(n+=`-${s}`);const r=n.match(/\s|\//),i=t.match(/\s|\//);if(r||i){const e=[`Unable to register library "${n}" with version "${t}":`];return r&&e.push(`library name "${n}" contains illegal characters (whitespace or "/")`),r&&i&&e.push("and"),i&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void De.warn(e.join(" "))}gt(new ae(`${n}-version`,()=>({library:n,version:t}),"VERSION"))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jt="firebase-heartbeat-store";let Tt=null;function _t(){return Tt||(Tt=Ce("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(jt)}catch(s){console.warn(s)}}}).catch(e=>{throw vt.create("idb-open",{originalErrorMessage:e.message})})),Tt}async function It(e,t){try{const s=(await _t()).transaction(jt,"readwrite"),n=s.objectStore(jt);await n.put(t,Ct(e)),await s.done}catch(s){if(s instanceof K)De.warn(s.message);else{const e=vt.create("idb-set",{originalErrorMessage:s?.message});De.warn(e.message)}}}function Ct(e){return`${e.name}!${e.options.appId}`}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Pt(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=At();if(null==this._heartbeatsCache?.heartbeats&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==this._heartbeatsCache?.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===t||this._heartbeatsCache.heartbeats.some(e=>e.date===t))return;if(this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,s=e[0].date;for(let n=1;n<e.length;n++)e[n].date<s&&(s=e[n].date,t=n);return t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){De.warn(e)}}async getHeartbeatsHeader(){try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==this._heartbeatsCache?.heartbeats||0===this._heartbeatsCache.heartbeats.length)return"";const e=At(),{heartbeatsToSend:t,unsentEntries:s}=function(e,t=1024){const s=[];let n=e.slice();for(const r of e){const e=s.find(e=>e.agent===r.agent);if(e){if(e.dates.push(r.date),Ot(s)>t){e.dates.pop();break}}else if(s.push({agent:r.agent,dates:[r.date]}),Ot(s)>t){s.pop();break}n=n.slice(1)}return{heartbeatsToSend:s,unsentEntries:n}}(this._heartbeatsCache.heartbeats),n=k(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),n}catch(e){return De.warn(e),""}}}function At(){return(new Date).toISOString().substring(0,10)}class Pt{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!W()&&G().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await _t()).transaction(jt),s=await t.objectStore(jt).get(Ct(e));return await t.done,s}catch(t){if(t instanceof K)De.warn(t.message);else{const e=vt.create("idb-get",{originalErrorMessage:t?.message});De.warn(e.message)}}}(this.app);return e?.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return It(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return It(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}}}function Ot(e){return k(JSON.stringify({version:2,heartbeats:e})).length}var Rt;Rt="",gt(new ae("platform-logger",e=>new Re(e),"PRIVATE")),gt(new ae("heartbeat",e=>new kt(e),"PRIVATE")),Et(Le,Me,Rt),Et(Le,Me,"esm2020"),Et("fire-js","");function Lt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Et("firebase","12.2.1","app");const Mt=Lt,Dt=new Y("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ut=new ge("@firebase/auth");function Ft(e,...t){Ut.logLevel<=de.ERROR&&Ut.error(`Auth (${wt}): ${e}`,...t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(e,...t){throw $t(e,...t)}function Bt(e,...t){return $t(e,...t)}function zt(e,t,s){const n={...Mt(),[t]:s};return new Y("auth","Firebase",n).create(t,{appName:e.name})}function qt(e){return zt(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $t(e,...t){if("string"!=typeof e){const s=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=e.name),e._errorFactory.create(s,...n)}return Dt.create(e,...t)}function Ht(e,t,...s){if(!e)throw $t(t,...s)}function Wt(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Ft(t),new Error(t)}function Gt(e,t){e||Wt(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(){return"undefined"!=typeof self&&self.location?.href||""}function Yt(){return"undefined"!=typeof self&&self.location?.protocol||null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(){return"undefined"==typeof navigator||!navigator||!("onLine"in navigator)||"boolean"!=typeof navigator.onLine||"http:"!==Yt()&&"https:"!==Yt()&&!$()&&!("connection"in navigator)||navigator.onLine}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Xt{constructor(e,t){this.shortDelay=e,this.longDelay=t,Gt(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(q())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return Qt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(e,t){Gt(e.emulator,"Emulator should always be set here");const{url:s}=e.emulator;return t?`${s}${t.startsWith("/")?t.slice(1):t}`:s}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void Wt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void Wt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void Wt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ts=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ss=new Xt(3e4,6e4);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ns(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function rs(e,t,s,n,r={}){return is(e,r,async()=>{let r={},i={};n&&("GET"===t?i=n:r={body:JSON.stringify(n)});const a=Z({key:e.config.apiKey,...i}).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l={method:t,headers:o,...r};return"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&U(e.emulatorConfig.host)&&(l.credentials="include"),Zt.fetch()(await os(e,e.config.apiHost,s,a),l)})}async function is(e,t,s){e._canInitEmulator=!1;const n={...es,...t};try{const t=new cs(e),r=await Promise.race([s(),t.promise]);t.clearNetworkTimeout();const i=await r.json();if("needConfirmation"in i)throw ds(e,"account-exists-with-different-credential",i);if(r.ok&&!("errorMessage"in i))return i;{const t=r.ok?i.errorMessage:i.error.message,[s,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===s)throw ds(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===s)throw ds(e,"email-already-in-use",i);if("USER_DISABLED"===s)throw ds(e,"user-disabled",i);const o=n[s]||s.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw zt(e,o,a);Vt(e,o)}}catch(r){if(r instanceof K)throw r;Vt(e,"network-request-failed",{message:String(r)})}}async function as(e,t,s,n,r={}){const i=await rs(e,t,s,n,r);return"mfaPendingCredential"in i&&Vt(e,"multi-factor-auth-required",{_serverResponse:i}),i}async function os(e,t,s,n){const r=`${t}${s}?${n}`,i=e,a=i.config.emulator?Jt(e.config,r):`${e.config.apiScheme}://${r}`;if(ts.includes(s)&&(await i._persistenceManagerAvailable,"COOKIE"===i._getPersistenceType())){return i._getPersistence()._getFinalTarget(a).toString()}return a}function ls(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class cs{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Bt(this.auth,"network-request-failed")),ss.get())})}}function ds(e,t,s){const n={appName:e.name};s.email&&(n.email=s.email),s.phoneNumber&&(n.phoneNumber=s.phoneNumber);const r=Bt(e,t,n);return r.customData._tokenResponse=s,r}function us(e){return void 0!==e&&void 0!==e.enterprise}class hs{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return ls(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function ps(e,t){return rs(e,"POST","/v1/accounts:lookup",t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ms(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function fs(e){return 1e3*Number(e)}function gs(e){const[t,s,n]=e.split(".");if(void 0===t||void 0===s||void 0===n)return Ft("JWT malformed, contained fewer than 3 sections"),null;try{const e=A(s);return e?JSON.parse(e):(Ft("Failed to decode base64 JWT payload"),null)}catch(r){return Ft("Caught error parsing JWT payload as JSON",r?.toString()),null}}function ys(e){const t=gs(e);return Ht(t,"internal-error"),Ht(void 0!==t.exp,"internal-error"),Ht(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xs(e,t,s=!1){if(s)return t;try{return await t}catch(n){throw n instanceof K&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class vs{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===e?.code&&this.schedule(!0))}this.schedule()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ms(this.lastLoginAt),this.creationTime=ms(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ws(e){const t=e.auth,s=await e.getIdToken(),n=await xs(e,ps(t,{idToken:s}));Ht(n?.users.length,t,"internal-error");const r=n.users[0];e._notifyReloadListener(r);const i=r.providerUserInfo?.length?Ns(r.providerUserInfo):[],a=(o=e.providerData,l=i,[...o.filter(e=>!l.some(t=>t.providerId===e.providerId)),...l]);var o,l;const c=e.isAnonymous,d=!(e.email&&r.passwordHash||a?.length),u=!!c&&d,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new bs(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(e,h)}function Ns(e){return e.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ss{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ht(e.idToken,"internal-error"),Ht(void 0!==e.idToken,"internal-error"),Ht(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):ys(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ht(0!==e.length,"internal-error");const t=ys(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return t||!this.accessToken||this.isExpired?(Ht(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:n,expiresIn:r}=await async function(e,t){const s=await is(e,{},async()=>{const s=Z({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:n,apiKey:r}=e.config,i=await os(e,n,"/v1/token",`key=${r}`),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const o={method:"POST",headers:a,body:s};return e.emulatorConfig&&U(e.emulatorConfig.host)&&(o.credentials="include"),Zt.fetch()(i,o)});return{accessToken:s.access_token,expiresIn:s.expires_in,refreshToken:s.refresh_token}}(e,t);this.updateTokensAndExpiration(s,n,Number(r))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*s}static fromJSON(e,t){const{refreshToken:s,accessToken:n,expirationTime:r}=t,i=new Ss;return s&&(Ht("string"==typeof s,"internal-error",{appName:e}),i.refreshToken=s),n&&(Ht("string"==typeof n,"internal-error",{appName:e}),i.accessToken=n),r&&(Ht("number"==typeof r,"internal-error",{appName:e}),i.expirationTime=r),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ss,this.toJSON())}_performRefresh(){return Wt("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Es(e,t){Ht("string"==typeof e||void 0===e,"internal-error",{appName:t})}class js{constructor({uid:e,auth:t,stsTokenManager:s,...n}){this.providerId="firebase",this.proactiveRefresh=new vs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=n.displayName||null,this.email=n.email||null,this.emailVerified=n.emailVerified||!1,this.phoneNumber=n.phoneNumber||null,this.photoURL=n.photoURL||null,this.isAnonymous=n.isAnonymous||!1,this.tenantId=n.tenantId||null,this.providerData=n.providerData?[...n.providerData]:[],this.metadata=new bs(n.createdAt||void 0,n.lastLoginAt||void 0)}async getIdToken(e){const t=await xs(this,this.stsTokenManager.getToken(this.auth,e));return Ht(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const s=ie(e),n=await s.getIdToken(t),r=gs(n);Ht(r&&r.exp&&r.auth_time&&r.iat,s.auth,"internal-error");const i="object"==typeof r.firebase?r.firebase:void 0,a=i?.sign_in_provider;return{claims:r,token:n,authTime:ms(fs(r.auth_time)),issuedAtTime:ms(fs(r.iat)),expirationTime:ms(fs(r.exp)),signInProvider:a||null,signInSecondFactor:i?.sign_in_second_factor||null}}(this,e)}reload(){return async function(e){const t=ie(e);await ws(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Ht(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>({...e})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new js({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ht(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await ws(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xt(this.auth.app))return Promise.reject(qt(this.auth));const e=await this.getIdToken();return await xs(this,
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(e,t){return rs(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,n=t.email??void 0,r=t.phoneNumber??void 0,i=t.photoURL??void 0,a=t.tenantId??void 0,o=t._redirectEventId??void 0,l=t.createdAt??void 0,c=t.lastLoginAt??void 0,{uid:d,emailVerified:u,isAnonymous:h,providerData:p,stsTokenManager:m}=t;Ht(d&&m,e,"internal-error");const f=Ss.fromJSON(this.name,m);Ht("string"==typeof d,e,"internal-error"),Es(s,e.name),Es(n,e.name),Ht("boolean"==typeof u,e,"internal-error"),Ht("boolean"==typeof h,e,"internal-error"),Es(r,e.name),Es(i,e.name),Es(a,e.name),Es(o,e.name),Es(l,e.name),Es(c,e.name);const g=new js({uid:d,auth:e,email:n,emailVerified:u,displayName:s,isAnonymous:h,photoURL:i,phoneNumber:r,tenantId:a,stsTokenManager:f,createdAt:l,lastLoginAt:c});return p&&Array.isArray(p)&&(g.providerData=p.map(e=>({...e}))),o&&(g._redirectEventId=o),g}static async _fromIdTokenResponse(e,t,s=!1){const n=new Ss;n.updateFromServerResponse(t);const r=new js({uid:t.localId,auth:e,stsTokenManager:n,isAnonymous:s});return await ws(r),r}static async _fromGetAccountInfoResponse(e,t,s){const n=t.users[0];Ht(void 0!==n.localId,"internal-error");const r=void 0!==n.providerUserInfo?Ns(n.providerUserInfo):[],i=!(n.email&&n.passwordHash||r?.length),a=new Ss;a.updateFromIdToken(s);const o=new js({uid:n.localId,auth:e,stsTokenManager:a,isAnonymous:i}),l={uid:n.localId,displayName:n.displayName||null,photoURL:n.photoUrl||null,email:n.email||null,emailVerified:n.emailVerified||!1,phoneNumber:n.phoneNumber||null,tenantId:n.tenantId||null,providerData:r,metadata:new bs(n.createdAt,n.lastLoginAt),isAnonymous:!(n.email&&n.passwordHash||r?.length)};return Object.assign(o,l),o}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts=new Map;function _s(e){Gt(e instanceof Function,"Expected a class definition");let t=Ts.get(e);return t?(Gt(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Ts.set(e,t),t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Is.type="NONE";const Cs=Is;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ks(e,t,s){return`firebase:${e}:${t}:${s}`}class As{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:n,name:r}=this.auth;this.fullUserKey=ks(this.userKey,n.apiKey,r),this.fullPersistenceKey=ks("persistence",n.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"==typeof e){const t=await ps(this.auth,{idToken:e}).catch(()=>{});return t?js._fromGetAccountInfoResponse(this.auth,t,e):null}return js._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new As(_s(Cs),e,s);const n=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let r=n[0]||_s(Cs);const i=ks(s,e.config.apiKey,e.name);let a=null;for(const l of t)try{const t=await l._get(i);if(t){let s;if("string"==typeof t){const n=await ps(e,{idToken:t}).catch(()=>{});if(!n)break;s=await js._fromGetAccountInfoResponse(e,n,t)}else s=js._fromJSON(e,t);l!==r&&(a=s),r=l;break}}catch{}const o=n.filter(e=>e._shouldAllowMigration);return r._shouldAllowMigration&&o.length?(r=o[0],a&&await r._set(i,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==r)try{await e._remove(i)}catch{}})),new As(r,e,s)):new As(r,e,s)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ps(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Ms(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Os(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Us(t))return"Blackberry";if(Fs(t))return"Webos";if(Rs(t))return"Safari";if((t.includes("chrome/")||Ls(t))&&!t.includes("edge/"))return"Chrome";if(Ds(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=e.match(t);if(2===s?.length)return s[1]}return"Other"}function Os(e=q()){return/firefox\//i.test(e)}function Rs(e=q()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Ls(e=q()){return/crios\//i.test(e)}function Ms(e=q()){return/iemobile/i.test(e)}function Ds(e=q()){return/android/i.test(e)}function Us(e=q()){return/blackberry/i.test(e)}function Fs(e=q()){return/webos/i.test(e)}function Vs(e=q()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Bs(){return function(){const e=q();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function zs(e=q()){return Vs(e)||Ds(e)||Fs(e)||Us(e)||/windows phone/i.test(e)||Ms(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qs(e,t=[]){let s;switch(e){case"Browser":s=Ps(q());break;case"Worker":s=`${Ps(q())}-${e}`;break;default:s=e}const n=t.length?t.join(","):"FirebaseCore-web";return`${s}/JsCore/${wt}/${n}`}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=t=>new Promise((s,n)=>{try{s(e(t))}catch(r){n(r)}});s.onAbort=t,this.queue.push(s);const n=this.queue.length-1;return()=>{this.queue[n]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const e of t)try{e()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??6,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),void 0!==t.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),void 0!==t.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),void 0!==t.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),void 0!==t.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,n=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),n&&(t.meetsMaxPasswordLength=e.length<=n)}validatePasswordCharacterOptions(e,t){let s;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let n=0;n<e.length;n++)s=e.charAt(n),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,n,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=n)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,t,s,n){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ks(this),this.idTokenSubscription=new Ks(this),this.beforeStateQueue=new $s(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Dt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=_s(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await As.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(s){}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void(await this.currentUser.getIdToken())):void(await this._updateCurrentUser(e,!0)):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await ps(this,{idToken:e}),s=await js._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(xt(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,n=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const t=this.redirectUser?._redirectEventId,r=s?._redirectEventId,i=await this.tryRedirectSignIn(e);t&&t!==r||!i?.user||(s=i.user,n=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(n)try{await this.beforeStateQueue.runMiddleware(s)}catch(r){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(r))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ht(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(s){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ws(e)}catch(t){if("auth/network-request-failed"!==t?.code)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xt(this.app))return Promise.reject(qt(this));const t=e?ie(e):null;return t&&Ht(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ht(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xt(this.app)?Promise.reject(qt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xt(this.app)?Promise.reject(qt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_s(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e,t={}){return rs(e,"GET","/v2/passwordPolicy",ns(e,t))}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this),t=new Hs(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Y("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return rs(e,"POST","/v2/accounts:revokeToken",ns(e,t))}(this,t)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return null===e?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&_s(e)||this._popupRedirectResolver;Ht(t,this,"argument-error"),this.redirectPersistenceManager=await As.create(this,[_s(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,n){if(this._deleted)return()=>{};const r="function"==typeof t?t:t.next.bind(t);let i=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ht(a,this,"internal-error"),a.then(()=>{i||r(this.currentUser)}),"function"==typeof t){const r=e.addObserver(t,s,n);return()=>{i=!0,r()}}{const s=e.addObserver(t);return()=>{i=!0,s()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ht(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qs(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await(this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(xt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await(this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken());return e?.error&&function(e,...t){Ut.logLevel<=de.WARN&&Ut.warn(`Auth (${wt}): ${e}`,...t)}(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Gs(e){return ie(e)}class Ks{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const s=new se(e,t);return s.subscribe.bind(s)}(e=>this.observer=e)}get next(){return Ht(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ys={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Qs(e){return Ys.loadJS(e)}class Xs{constructor(){this.enterprise=new Js}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Js{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Zs="NO_RECAPTCHA";class en{constructor(e){this.type="recaptcha-enterprise",this.auth=Gs(e)}async verify(e="verify",t=!1){async function s(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,s)=>{(async function(e,t){return rs(e,"GET","/v2/recaptchaConfig",ns(e,t))})(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(n=>{if(void 0!==n.recaptchaKey){const s=new hs(n);return null==e.tenantId?e._agentRecaptchaConfig=s:e._tenantRecaptchaConfigs[e.tenantId]=s,t(s.siteKey)}s(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{s(e)})})}function n(t,s,n){const r=window.grecaptcha;us(r)?r.enterprise.ready(()=>{r.enterprise.execute(t,{action:e}).then(e=>{s(e)}).catch(()=>{s(Zs)})}):n(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Xs).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{s(this.auth).then(s=>{if(!t&&us(window.grecaptcha))n(s,e,r);else{if("undefined"==typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Ys.recaptchaEnterpriseScript;0!==t.length&&(t+=s),Qs(t).then(()=>{n(s,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function tn(e,t,s,n=!1,r=!1){const i=new en(e);let a;if(r)a=Zs;else try{a=await i.verify(s)}catch(l){a=await i.verify(s,!0)}const o={...t};if("mfaSmsEnrollment"===s||"mfaSmsSignIn"===s){if("phoneEnrollmentInfo"in o){const e=o.phoneEnrollmentInfo.phoneNumber,t=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const e=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return n?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function sn(e,t,s,n,r){if(e._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const r=await tn(e,t,s,"getOobCode"===s);return n(e,r)}return n(e,t).catch(async r=>{if("auth/missing-recaptcha-token"===r.code){console.log(`${s} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const r=await tn(e,t,s,"getOobCode"===s);return n(e,r)}return Promise.reject(r)})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(e,t,s){const n=Gs(e);Ht(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");const r=rn(t),{host:i,port:a}=function(e){const t=rn(e),s=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!s)return{host:"",port:null};const n=s[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(n);if(r){const e=r[1];return{host:e,port:an(n.substr(e.length+1))}}{const[e,t]=n.split(":");return{host:e,port:an(t)}}}(t),o=null===a?"":`:${a}`,l={url:`${r}//${i}${o}/`},c=Object.freeze({host:i,port:a,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:!1})});if(!n._canInitEmulator)return Ht(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),void Ht(X(l,n.config.emulator)&&X(c,n.emulatorConfig),n,"emulator-config-failed");n.config.emulator=l,n.emulatorConfig=c,n.settings.appVerificationDisabledForTesting=!0,U(i)?(F(`${r}//${i}${o}`),z("Auth",!0)):function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */()}function rn(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function an(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class on{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Wt("not implemented")}_getIdTokenResponse(e){return Wt("not implemented")}_linkToIdToken(e,t){return Wt("not implemented")}_getReauthenticationResolver(e){return Wt("not implemented")}}async function ln(e,t){return rs(e,"POST","/v1/accounts:signUp",t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cn(e,t){return as(e,"POST","/v1/accounts:signInWithPassword",ns(e,t))}async function dn(e,t){return async function(e,t){return rs(e,"POST","/v1/accounts:sendOobCode",ns(e,t))}(e,t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class un extends on{constructor(e,t,s,n=null){super("password",s),this._email=e,this._password=t,this._tenantId=n}static _fromEmailAndPassword(e,t){return new un(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new un(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if(t?.email&&t?.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return sn(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",cn);case"emailLink":return async function(e,t){return as(e,"POST","/v1/accounts:signInWithEmailLink",ns(e,t))}(e,{email:this._email,oobCode:this._password});default:Vt(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return sn(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ln);case"emailLink":return async function(e,t){return as(e,"POST","/v1/accounts:signInWithEmailLink",ns(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Vt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hn(e,t){return as(e,"POST","/v1/accounts:signInWithIdp",ns(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn extends on{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new pn(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Vt("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:s,signInMethod:n,...r}=t;if(!s||!n)return null;const i=new pn(s,n);return i.idToken=r.idToken||void 0,i.accessToken=r.accessToken||void 0,i.secret=r.secret,i.nonce=r.nonce,i.pendingToken=r.pendingToken||null,i}_getIdTokenResponse(e){return hn(e,this.buildRequest())}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,hn(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,hn(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Z(t)}return e}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){const t=ee(te(e)),s=t.apiKey??null,n=t.oobCode??null,r=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(t.mode??null);Ht(s&&n&&r,"argument-error"),this.apiKey=s,this.operation=r,this.code=n,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=function(e){const t=ee(te(e)).link,s=t?ee(te(t)).deep_link_id:null,n=ee(te(e)).deep_link_id;return(n?ee(te(n)).link:null)||n||s||t||e}(e);try{return new mn(t)}catch{return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(){this.providerId=fn.PROVIDER_ID}static credential(e,t){return un._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=mn.parseLink(t);return Ht(s,"argument-error"),un._fromEmailAndCode(e,s.code,s.tenantId)}}fn.PROVIDER_ID="password",fn.EMAIL_PASSWORD_SIGN_IN_METHOD="password",fn.EMAIL_LINK_SIGN_IN_METHOD="emailLink";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class gn{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn extends gn{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn extends yn{constructor(){super("facebook.com")}static credential(e){return pn._fromParams({providerId:xn.PROVIDER_ID,signInMethod:xn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xn.credentialFromTaggedObject(e)}static credentialFromError(e){return xn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return xn.credential(e.oauthAccessToken)}catch{return null}}}xn.FACEBOOK_SIGN_IN_METHOD="facebook.com",xn.PROVIDER_ID="facebook.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class vn extends yn{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return pn._fromParams({providerId:vn.PROVIDER_ID,signInMethod:vn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return vn.credentialFromTaggedObject(e)}static credentialFromError(e){return vn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return vn.credential(t,s)}catch{return null}}}vn.GOOGLE_SIGN_IN_METHOD="google.com",vn.PROVIDER_ID="google.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class bn extends yn{constructor(){super("github.com")}static credential(e){return pn._fromParams({providerId:bn.PROVIDER_ID,signInMethod:bn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bn.credentialFromTaggedObject(e)}static credentialFromError(e){return bn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return bn.credential(e.oauthAccessToken)}catch{return null}}}bn.GITHUB_SIGN_IN_METHOD="github.com",bn.PROVIDER_ID="github.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class wn extends yn{constructor(){super("twitter.com")}static credential(e,t){return pn._fromParams({providerId:wn.PROVIDER_ID,signInMethod:wn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return wn.credentialFromTaggedObject(e)}static credentialFromError(e){return wn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return wn.credential(t,s)}catch{return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function Nn(e,t){return as(e,"POST","/v1/accounts:signUp",ns(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wn.TWITTER_SIGN_IN_METHOD="twitter.com",wn.PROVIDER_ID="twitter.com";class Sn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,n=!1){const r=await js._fromIdTokenResponse(e,s,n),i=En(s);return new Sn({user:r,providerId:i,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const n=En(s);return new Sn({user:e,providerId:n,_tokenResponse:s,operationType:t})}}function En(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn extends K{constructor(e,t,s,n){super(t.code,t.message),this.operationType=s,this.user=n,Object.setPrototypeOf(this,jn.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,n){return new jn(e,t,s,n)}}function Tn(e,t,s,n){return("reauthenticate"===t?s._getReauthenticationResolver(e):s._getIdTokenResponse(e)).catch(s=>{if("auth/multi-factor-auth-required"===s.code)throw jn._fromErrorAndOperation(e,s,t,n);throw s})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function _n(e,t,s=!1){if(xt(e.app))return Promise.reject(qt(e));const n="signIn",r=await Tn(e,n,t),i=await Sn._fromIdTokenResponse(e,n,r);return s||await e._updateCurrentUser(i.user),i}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function In(e){const t=Gs(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}function Cn(e,t,s){return xt(e.app)?Promise.reject(qt(e)):async function(e,t){return _n(Gs(e),t)}(ie(e),fn.credential(t,s)).catch(async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&In(e),t})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function kn(e,{displayName:t,photoURL:s}){if(void 0===t&&void 0===s)return;const n=ie(e),r={idToken:await n.getIdToken(),displayName:t,photoUrl:s,returnSecureToken:!0},i=await xs(n,async function(e,t){return rs(e,"POST","/v1/accounts:update",t)}(n.auth,r));n.displayName=i.displayName||null,n.photoURL=i.photoUrl||null;const a=n.providerData.find(({providerId:e})=>"password"===e);a&&(a.displayName=n.displayName,a.photoURL=n.photoURL),await n._updateTokensIfNecessary(i)}const An="__sak";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(An,"1"),this.storage.removeItem(An),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On extends Pn{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=zs(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),n=this.localCache[t];s!==n&&e(t,n,s)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys((e,t,s)=>{this.notifyListeners(e,s)});const s=e.key;t?this.detachListener():this.stopPolling();const n=()=>{const e=this.storage.getItem(s);(t||this.localCache[s]!==e)&&this.notifyListeners(s,e)},r=this.storage.getItem(s);Bs()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(n,10):n()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const n of Array.from(s))n(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}On.type="LOCAL";const Rn=On;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln extends Pn{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Ln.type="SESSION";const Mn=Ln;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Dn{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const s=new Dn(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:n,data:r}=t.data,i=this.handlersMap[n];if(!i?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:n});const a=Array.from(i).map(async e=>e(t.origin,r)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:s,eventType:n,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Un(e="",t=10){let s="";for(let n=0;n<t;n++)s+=Math.floor(10*Math.random());return e+s}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Dn.receivers=[];class Fn{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const n="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!n)throw new Error("connection_unavailable");let r,i;return new Promise((a,o)=>{const l=Un("",20);n.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},s);i={messageChannel:n,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),r=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),a(t.data.response);break;default:clearTimeout(c),clearTimeout(r),o(new Error("invalid_response"))}}},this.handlers.add(i),n.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[n.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(){return window}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Bn(){return void 0!==Vn().WorkerGlobalScope&&"function"==typeof Vn().importScripts}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const zn="firebaseLocalStorageDb",qn="firebaseLocalStorage",$n="fbase_key";class Hn{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Wn(e,t){return e.transaction([qn],t?"readwrite":"readonly").objectStore(qn)}function Gn(){const e=indexedDB.open(zn,1);return new Promise((t,s)=>{e.addEventListener("error",()=>{s(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(qn,{keyPath:$n})}catch(n){s(n)}}),e.addEventListener("success",async()=>{const s=e.result;s.objectStoreNames.contains(qn)?t(s):(s.close(),await function(){const e=indexedDB.deleteDatabase(zn);return new Hn(e).toPromise()}(),t(await Gn()))})})}async function Kn(e,t,s){const n=Wn(e,!0).put({[$n]:t,value:s});return new Hn(n).toPromise()}function Yn(e,t){const s=Wn(e,!0).delete(t);return new Hn(s).toPromise()}class Qn{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Gn()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(s){if(t++>3)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Bn()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Dn._getInstance(Bn()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await async function(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}(),!this.activeServiceWorker)return;this.sender=new Fn(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&(navigator?.serviceWorker?.controller||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Gn();return await Kn(e,An,"1"),await Yn(e,An),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Kn(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const s=Wn(e,!1).get(t),n=await new Hn(s).toPromise();return void 0===n?null:n.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Yn(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Wn(e,!1).getAll();return new Hn(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],s=new Set;if(0!==e.length)for(const{fbase_key:n,value:r}of e)s.add(n),JSON.stringify(this.localCache[n])!==JSON.stringify(r)&&(this.notifyListeners(n,r),t.push(n));for(const n of Object.keys(this.localCache))this.localCache[n]&&!s.has(n)&&(this.notifyListeners(n,null),t.push(n));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const n of Array.from(s))n(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Qn.type="LOCAL";const Xn=Qn;
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Jn(e,t){return t?_s(t):(Ht(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Xt(3e4,6e4);class Zn extends on{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return hn(e,this._buildIdpRequest())}_linkToIdToken(e,t){return hn(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return hn(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function er(e){return _n(e.auth,new Zn(e),e.bypassAuthState)}function tr(e){const{auth:t,user:s}=e;return Ht(s,t,"internal-error"),
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(e,t,s=!1){const{auth:n}=e;if(xt(n.app))return Promise.reject(qt(n));const r="reauthenticate";try{const i=await xs(e,Tn(n,r,t,e),s);Ht(i.idToken,n,"internal-error");const a=gs(i.idToken);Ht(a,n,"internal-error");const{sub:o}=a;return Ht(e.uid===o,n,"user-mismatch"),Sn._forOperation(e,r,i)}catch(i){throw"auth/user-not-found"===i?.code&&Vt(n,"user-mismatch"),i}}(s,new Zn(e),e.bypassAuthState)}async function sr(e){const{auth:t,user:s}=e;return Ht(s,t,"internal-error"),async function(e,t,s=!1){const n=await xs(e,t._linkToIdToken(e.auth,await e.getIdToken()),s);return Sn._forOperation(e,"link",n)}(s,new Zn(e),e.bypassAuthState)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e,t,s,n,r=!1){this.auth=e,this.resolver=s,this.user=n,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:n,tenantId:r,error:i,type:a}=e;if(i)return void this.reject(i);const o={auth:this.auth,requestUri:t,sessionId:s,tenantId:r||void 0,postBody:n||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return er;case"linkViaPopup":case"linkViaRedirect":return sr;case"reauthViaPopup":case"reauthViaRedirect":return tr;default:Vt(this.auth,"internal-error")}}resolve(e){Gt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Gt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr=new Xt(2e3,1e4);async function ir(e,t,s){if(xt(e.app))return Promise.reject(Bt(e,"operation-not-supported-in-this-environment"));const n=Gs(e);!function(e,t,s){if(!(t instanceof s))throw s.name!==t.constructor.name&&Vt(e,"argument-error"),zt(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}(e,t,gn);const r=Jn(n,s);return new ar(n,"signInViaPopup",t,r).executeNotNull()}class ar extends nr{constructor(e,t,s,n,r){super(e,t,n,r),this.provider=s,this.authWindow=null,this.pollId=null,ar.currentPopupAction&&ar.currentPopupAction.cancel(),ar.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ht(e,this.auth,"internal-error"),e}async onExecution(){Gt(1===this.filter.length,"Popup operations only handle one event");const e=Un();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Bt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Bt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ar.currentPopupAction=null}pollUserCancellation(){const e=()=>{this.authWindow?.window?.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Bt(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,rr.get())};e()}}ar.currentPopupAction=null;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const or="pendingRedirect",lr=new Map;class cr extends nr{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=lr.get(this.auth._key());if(!e){try{const t=await async function(e,t){const s=function(e){return ks(or,e.config.apiKey,e.name)}(t),n=function(e){return _s(e._redirectPersistence)}(e);if(!(await n._isAvailable()))return!1;const r="true"===await n._get(s);return await n._remove(s),r}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}lr.set(this.auth._key(),e)}return this.bypassAuthState||lr.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function dr(e,t){lr.set(e._key(),t)}async function ur(e,t,s=!1){if(xt(e.app))return Promise.reject(qt(e));const n=Gs(e),r=Jn(n,t),i=new cr(n,r,s),a=await i.execute();return a&&!s&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,t)),a}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mr(e);default:return!1}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!mr(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Bt(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(pr(e))}saveEventToCache(e){this.cachedEventUids.add(pr(e)),this.lastProcessedEventTime=Date.now()}}function pr(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function mr({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===t?.code}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const fr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gr=/^https?/;async function yr(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return rs(e,"GET","/v1/projects",t)}(e);for(const s of t)try{if(xr(s))return}catch{}Vt(e,"unauthorized-domain")}function xr(e){const t=Kt(),{protocol:s,hostname:n}=new URL(t);if(e.startsWith("chrome-extension://")){const r=new URL(e);return""===r.hostname&&""===n?"chrome-extension:"===s&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===s&&r.hostname===n}if(!gr.test(s))return!1;if(fr.test(e))return n===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(n)}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vr=new Xt(3e4,6e4);function br(){const e=Vn().___jsl;if(e?.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let s=0;s<e.CP.length;s++)e.CP[s]=null}function wr(e){return new Promise((t,s)=>{function n(){br(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{br(),s(Bt(e,"network-request-failed"))},timeout:vr.get()})}if(Vn().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else{if(!Vn().gapi?.load){const t=`__${"iframefcb"}${Math.floor(1e6*Math.random())}`;return Vn()[t]=()=>{gapi.load?n():s(Bt(e,"network-request-failed"))},Qs(`${Ys.gapiScript}?onload=${t}`).catch(e=>s(e))}n()}}).catch(e=>{throw Nr=null,e})}let Nr=null;
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Sr=new Xt(5e3,15e3),Er={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jr=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Tr(e){const t=e.config;Ht(t.authDomain,e,"auth-domain-config-required");const s=t.emulator?Jt(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,n={apiKey:t.apiKey,appName:e.name,v:wt},r=jr.get(e.config.apiHost);r&&(n.eid=r);const i=e._getFrameworks();return i.length&&(n.fw=i.join(",")),`${s}?${Z(n).slice(1)}`}async function _r(e){const t=await function(e){return Nr=Nr||wr(e),Nr}(e),s=Vn().gapi;return Ht(s,e,"internal-error"),t.open({where:document.body,url:Tr(e),messageHandlersFilter:s.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Er,dontclear:!0},t=>new Promise(async(s,n)=>{await t.restyle({setHideOnLeave:!1});const r=Bt(e,"network-request-failed"),i=Vn().setTimeout(()=>{n(r)},Sr.get());function a(){Vn().clearTimeout(i),s(t)}t.ping(a).then(a,()=>{n(r)})}))}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Cr{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function kr(e,t,s,n=500,r=600){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const l={...Ir,width:n.toString(),height:r.toString(),top:i,left:a},c=q().toLowerCase();s&&(o=Ls(c)?"_blank":s),Os(c)&&(t=t||"http://localhost",l.scrollbars="yes");const d=Object.entries(l).reduce((e,[t,s])=>`${e}${t}=${s},`,"");if(function(e=q()){return Vs(e)&&!!window.navigator?.standalone}(c)&&"_self"!==o)return function(e,t){const s=document.createElement("a");s.href=e,s.target=t;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),s.dispatchEvent(n)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t||"",o),new Cr(null);const u=window.open(t||"",o,d);Ht(u,e,"popup-blocked");try{u.focus()}catch(h){}return new Cr(u)}const Ar="__/auth/handler",Pr="emulator/auth/handler",Or=encodeURIComponent("fac");async function Rr(e,t,s,n,r,i){Ht(e.config.authDomain,e,"auth-domain-config-required"),Ht(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:s,redirectUrl:n,v:wt,eventId:r};if(t instanceof gn){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries({}))a[e]=t}if(t instanceof yn){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const d of Object.keys(o))void 0===o[d]&&delete o[d];const l=await e._getAppCheckToken(),c=l?`#${Or}=${encodeURIComponent(l)}`:"";return`${function({config:e}){if(!e.emulator)return`https://${e.authDomain}/${Ar}`;return Jt(e,Pr)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)}?${Z(o).slice(1)}${c}`}const Lr="webStorageSupport";const Mr=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Mn,this._completeRedirectFn=ur,this._overrideRedirectResult=dr}async _openPopup(e,t,s,n){Gt(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");return kr(e,await Rr(e,t,s,Kt(),n),Un())}async _openRedirect(e,t,s,n){await this._originValidation(e);return function(e){Vn().location.href=e}(await Rr(e,t,s,Kt(),n)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:s}=this.eventManagers[t];return e?Promise.resolve(e):(Gt(s,"If manager is not set, promise should be"),s)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await _r(e),s=new hr(e);return t.register("authEvent",t=>{Ht(t?.authEvent,e,"invalid-auth-event");return{status:s.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Lr,{type:Lr},s=>{const n=s?.[0]?.[Lr];void 0!==n&&t(!!n),Vt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=yr(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return zs()||Rs()||Vs()}};var Dr="@firebase/auth",Ur="1.11.0";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Fr{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e(t?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ht(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Vr=M("authIdTokenMaxAge")||300;let Br=null;var zr;Ys={loadJS:e=>new Promise((t,s)=>{const n=document.createElement("script");n.setAttribute("src",e),n.onload=t,n.onerror=e=>{const t=Bt("internal-error");t.customData=e,s(t)},n.type="text/javascript",n.charset="UTF-8",(document.getElementsByTagName("head")?.[0]??document).appendChild(n)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},zr="Browser",gt(new ae("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:i,authDomain:a}=s.options;Ht(i&&!i.includes(":"),"invalid-api-key",{appName:s.name});const o={apiKey:i,authDomain:a,clientPlatform:zr,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qs(zr)},l=new Ws(s,n,r,o);return function(e,t){const s=t?.persistence||[],n=(Array.isArray(s)?s:[s]).map(_s);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(n,t?.popupRedirectResolver)}(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),gt(new ae("auth-internal",e=>{const t=Gs(e.getProvider("auth").getImmediate());return new Fr(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Et(Dr,Ur,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(zr)),Et(Dr,Ur,"esm2020");var qr,$r,Hr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/(function(){var e;
/** @license
  
   Copyright The Closure Library Authors.
   SPDX-License-Identifier: Apache-2.0
  */function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function s(e,t,s){s||(s=0);var n=Array(16);if("string"==typeof t)for(var r=0;16>r;++r)n[r]=t.charCodeAt(s++)|t.charCodeAt(s++)<<8|t.charCodeAt(s++)<<16|t.charCodeAt(s++)<<24;else for(r=0;16>r;++r)n[r]=t[s++]|t[s++]<<8|t[s++]<<16|t[s++]<<24;t=e.g[0],s=e.g[1],r=e.g[2];var i=e.g[3],a=t+(i^s&(r^i))+n[0]+3614090360&4294967295;a=(s=(r=(i=(t=(s=(r=(i=(t=(s=(r=(i=(t=(s=(r=(i=(t=(s=(r=(i=(t=(s=(r=(i=(t=(s=(r=(i=(t=(s=(r=(i=(t=(s=(r=(i=(t=(s=(r=(i=(t=(s=(r=(i=(t=(s=(r=(i=(t=(s=(r=(i=(t=(s=(r=(i=(t=(s=(r=(i=(t=s+(a<<7&4294967295|a>>>25))+((a=i+(r^t&(s^r))+n[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=r+(s^i&(t^s))+n[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=s+(t^r&(i^t))+n[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^s&(r^i))+n[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=i+(r^t&(s^r))+n[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=r+(s^i&(t^s))+n[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=s+(t^r&(i^t))+n[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^s&(r^i))+n[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=i+(r^t&(s^r))+n[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=r+(s^i&(t^s))+n[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=s+(t^r&(i^t))+n[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^s&(r^i))+n[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=i+(r^t&(s^r))+n[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=r+(s^i&(t^s))+n[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=s+(t^r&(i^t))+n[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(r^i&(s^r))+n[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=i+(s^r&(t^s))+n[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=r+(t^s&(i^t))+n[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=s+(i^t&(r^i))+n[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(r^i&(s^r))+n[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=i+(s^r&(t^s))+n[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=r+(t^s&(i^t))+n[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=s+(i^t&(r^i))+n[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(r^i&(s^r))+n[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=i+(s^r&(t^s))+n[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=r+(t^s&(i^t))+n[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=s+(i^t&(r^i))+n[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(r^i&(s^r))+n[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=i+(s^r&(t^s))+n[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=r+(t^s&(i^t))+n[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=s+(i^t&(r^i))+n[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^r^i)+n[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^s^r)+n[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=r+(i^t^s)+n[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=s+(r^i^t)+n[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(s^r^i)+n[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^s^r)+n[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=r+(i^t^s)+n[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=s+(r^i^t)+n[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(s^r^i)+n[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^s^r)+n[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=r+(i^t^s)+n[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=s+(r^i^t)+n[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(s^r^i)+n[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^s^r)+n[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=r+(i^t^s)+n[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=s+(r^i^t)+n[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(r^(s|~i))+n[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=i+(s^(t|~r))+n[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=r+(t^(i|~s))+n[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=s+(i^(r|~t))+n[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(r^(s|~i))+n[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=i+(s^(t|~r))+n[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=r+(t^(i|~s))+n[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=s+(i^(r|~t))+n[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(r^(s|~i))+n[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=i+(s^(t|~r))+n[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=r+(t^(i|~s))+n[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=s+(i^(r|~t))+n[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((i=(t=s+((a=t+(r^(s|~i))+n[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=i+(s^(t|~r))+n[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((r=i+((a=r+(t^(i|~s))+n[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+n[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(r+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+r&4294967295,e.g[3]=e.g[3]+i&4294967295}function n(e,t){this.h=t;for(var s=[],n=!0,r=e.length-1;0<=r;r--){var i=0|e[r];n&&i==t||(s[r]=i,n=!1)}this.g=s}!function(e,t){function s(){}s.prototype=t.prototype,e.D=t.prototype,e.prototype=new s,e.prototype.constructor=e,e.C=function(e,s,n){for(var r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];return t.prototype[s].apply(e,r)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.B,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)s(this,e,a),a+=this.blockSize;if("string"==typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){s(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){s(this,r),i=0;break}}this.h=i,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var s=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&s,s/=256;for(this.u(e),e=Array(16),t=s=0;4>t;++t)for(var n=0;32>n;n+=8)e[s++]=this.g[t]>>>n&255;return e};var r={};function i(e){return-128<=e&&128>e?function(e,t){var s=r;return Object.prototype.hasOwnProperty.call(s,e)?s[e]:s[e]=t(e)}(e,function(e){return new n([0|e],0>e?-1:0)}):new n([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return h(a(-e));for(var t=[],s=1,r=0;e>=s;r++)t[r]=e/s|0,s*=4294967296;return new n(t,0)}var o=i(0),l=i(1),c=i(16777216);function d(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function u(e){return-1==e.h}function h(e){for(var t=e.g.length,s=[],r=0;r<t;r++)s[r]=~e.g[r];return new n(s,~e.h).add(l)}function p(e,t){return e.add(h(t))}function m(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function f(e,t){this.g=e,this.h=t}function g(e,t){if(d(t))throw Error("division by zero");if(d(e))return new f(o,o);if(u(e))return t=g(h(e),t),new f(h(t.g),h(t.h));if(u(t))return t=g(e,h(t)),new f(h(t.g),t.h);if(30<e.g.length){if(u(e)||u(t))throw Error("slowDivide_ only works with positive integers.");for(var s=l,n=t;0>=n.l(e);)s=y(s),n=y(n);var r=x(s,1),i=x(n,1);for(n=x(n,2),s=x(s,2);!d(n);){var c=i.add(n);0>=c.l(e)&&(r=r.add(s),i=c),n=x(n,1),s=x(s,1)}return t=p(e,r.j(t)),new f(r,t)}for(r=o;0<=e.l(t);){for(s=Math.max(1,Math.floor(e.m()/t.m())),n=48>=(n=Math.ceil(Math.log(s)/Math.LN2))?1:Math.pow(2,n-48),c=(i=a(s)).j(t);u(c)||0<c.l(e);)c=(i=a(s-=n)).j(t);d(i)&&(i=l),r=r.add(i),e=p(e,c)}return new f(r,e)}function y(e){for(var t=e.g.length+1,s=[],r=0;r<t;r++)s[r]=e.i(r)<<1|e.i(r-1)>>>31;return new n(s,e.h)}function x(e,t){var s=t>>5;t%=32;for(var r=e.g.length-s,i=[],a=0;a<r;a++)i[a]=0<t?e.i(a+s)>>>t|e.i(a+s+1)<<32-t:e.i(a+s);return new n(i,e.h)}(e=n.prototype).m=function(){if(u(this))return-h(this).m();for(var e=0,t=1,s=0;s<this.g.length;s++){var n=this.i(s);e+=(0<=n?n:4294967296+n)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(d(this))return"0";if(u(this))return"-"+h(this).toString(e);for(var t=a(Math.pow(e,6)),s=this,n="";;){var r=g(s,t).g,i=((0<(s=p(s,r.j(t))).g.length?s.g[0]:s.h)>>>0).toString(e);if(d(s=r))return i+n;for(;6>i.length;)i="0"+i;n=i+n}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return u(e=p(this,e))?-1:d(e)?0:1},e.abs=function(){return u(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),s=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.i(i))+(65535&e.i(i)),o=(a>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);r=o>>>16,a&=65535,o&=65535,s[i]=o<<16|a}return new n(s,-2147483648&s[s.length-1]?-1:0)},e.j=function(e){if(d(this)||d(e))return o;if(u(this))return u(e)?h(this).j(h(e)):h(h(this).j(e));if(u(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,s=[],r=0;r<2*t;r++)s[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var l=this.i(r)>>>16,p=65535&this.i(r),f=e.i(i)>>>16,g=65535&e.i(i);s[2*r+2*i]+=p*g,m(s,2*r+2*i),s[2*r+2*i+1]+=l*g,m(s,2*r+2*i+1),s[2*r+2*i+1]+=p*f,m(s,2*r+2*i+1),s[2*r+2*i+2]+=l*f,m(s,2*r+2*i+2)}for(r=0;r<t;r++)s[r]=s[2*r+1]<<16|s[2*r];for(r=t;r<2*t;r++)s[r]=0;return new n(s,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),s=[],r=0;r<t;r++)s[r]=this.i(r)&e.i(r);return new n(s,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),s=[],r=0;r<t;r++)s[r]=this.i(r)|e.i(r);return new n(s,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),s=[],r=0;r<t;r++)s[r]=this.i(r)^e.i(r);return new n(s,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,$r=t,n.prototype.add=n.prototype.add,n.prototype.multiply=n.prototype.j,n.prototype.modulo=n.prototype.A,n.prototype.compare=n.prototype.l,n.prototype.toNumber=n.prototype.m,n.prototype.toString=n.prototype.toString,n.prototype.getBits=n.prototype.i,n.fromNumber=a,n.fromString=function e(t,s){if(0==t.length)throw Error("number format error: empty string");if(2>(s=s||10)||36<s)throw Error("radix out of range: "+s);if("-"==t.charAt(0))return h(e(t.substring(1),s));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=a(Math.pow(s,8)),r=o,i=0;i<t.length;i+=8){var l=Math.min(8,t.length-i),c=parseInt(t.substring(i,i+l),s);8>l?(l=a(Math.pow(s,l)),r=r.j(l).add(a(c))):r=(r=r.j(n)).add(a(c))}return r},qr=n}).apply(void 0!==Hr?Hr:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Wr,Gr,Kr,Yr,Qr,Xr,Jr,Zr,ei="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,s){return e==Array.prototype||e==Object.prototype||(e[t]=s.value),e};var s=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof ei&&ei];for(var t=0;t<e.length;++t){var s=e[t];if(s&&s.Math==Math)return s}throw Error("Cannot find global object")}(this);!function(e,n){if(n)e:{var r=s;e=e.split(".");for(var i=0;i<e.length-1;i++){var a=e[i];if(!(a in r))break e;r=r[a]}(n=n(i=r[e=e[e.length-1]]))!=i&&null!=n&&t(r,e,{configurable:!0,writable:!0,value:n})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var s=0,n=!1,r={next:function(){if(!n&&s<e.length){var r=s++;return{value:t(r,e[r]),done:!1}}return n=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}(this,function(e,t){return t})}});
/** @license
  
   Copyright The Closure Library Authors.
   SPDX-License-Identifier: Apache-2.0
  */
var n=n||{},r=this||self;function i(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,s){return e.call.apply(e.bind,arguments)}function l(e,t,s){if(!e)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,n),e.apply(t,s)}}return function(){return e.apply(t,arguments)}}function c(e,t,s){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function d(e,t){var s=Array.prototype.slice.call(arguments,1);return function(){var t=s.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function u(e,t){function s(){}s.prototype=t.prototype,e.aa=t.prototype,e.prototype=new s,e.prototype.constructor=e,e.Qb=function(e,s,n){for(var r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];return t.prototype[s].apply(e,r)}}function h(e){const t=e.length;if(0<t){const s=Array(t);for(let n=0;n<t;n++)s[n]=e[n];return s}return[]}function p(e,t){for(let s=1;s<arguments.length;s++){const t=arguments[s];if(i(t)){const s=e.length||0,n=t.length||0;e.length=s+n;for(let r=0;r<n;r++)e[s+r]=t[r]}else e.push(t)}}function m(e){return/^[\s\xa0]*$/.test(e)}function f(){var e=r.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var y=!(-1==f().indexOf("Gecko")||-1!=f().toLowerCase().indexOf("webkit")&&-1==f().indexOf("Edge")||-1!=f().indexOf("Trident")||-1!=f().indexOf("MSIE")||-1!=f().indexOf("Edge"));function x(e,t,s){for(const n in e)t.call(s,e[n],n,e)}function v(e){const t={};for(const s in e)t[s]=e[s];return t}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(e,t){let s,n;for(let r=1;r<arguments.length;r++){for(s in n=arguments[r],n)e[s]=n[s];for(let t=0;t<b.length;t++)s=b[t],Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}}function N(e){var t=1;e=e.split(":");const s=[];for(;0<t&&e.length;)s.push(e.shift()),t--;return e.length&&s.push(e.join(":")),s}function S(e){r.setTimeout(()=>{throw e},0)}function E(){var e=C;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var j=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new T,e=>e.reset());class T{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let _,I=!1,C=new class{constructor(){this.h=this.g=null}add(e,t){const s=j.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}},k=()=>{const e=r.Promise.resolve(void 0);_=()=>{e.then(A)}};var A=()=>{for(var e;e=E();){try{e.h.call(e.g)}catch(s){S(s)}var t=j;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}I=!1};function P(){this.s=this.s,this.C=this.C}function O(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}P.prototype.s=!1,P.prototype.ma=function(){this.s||(this.s=!0,this.N())},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},O.prototype.h=function(){this.defaultPrevented=!0};var R=function(){if(!r.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};r.addEventListener("test",e,t),r.removeEventListener("test",e,t)}catch(s){}return e}();function L(e,t){if(O.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var s=this.type=e.type,n=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{g(t.nodeName);var r=!0;break e}catch(i){}r=!1}r||(t=null)}}else"mouseover"==s?t=e.fromElement:"mouseout"==s&&(t=e.toElement);this.relatedTarget=t,n?(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:M[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&L.aa.h.call(this)}}u(L,O);var M={2:"touch",3:"pen",4:"mouse"};L.prototype.h=function(){L.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var D="closure_listenable_"+(1e6*Math.random()|0),U=0;function F(e,t,s,n,r){this.listener=e,this.proxy=null,this.src=t,this.type=s,this.capture=!!n,this.ha=r,this.key=++U,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function B(e){this.src=e,this.g={},this.h=0}function z(e,t){var s=t.type;if(s in e.g){var n,r=e.g[s],i=Array.prototype.indexOf.call(r,t,void 0);(n=0<=i)&&Array.prototype.splice.call(r,i,1),n&&(V(t),0==e.g[s].length&&(delete e.g[s],e.h--))}}function q(e,t,s,n){for(var r=0;r<e.length;++r){var i=e[r];if(!i.da&&i.listener==t&&i.capture==!!s&&i.ha==n)return r}return-1}B.prototype.add=function(e,t,s,n,r){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var a=q(e,t,n,r);return-1<a?(t=e[a],s||(t.fa=!1)):((t=new F(t,this.src,i,!!n,r)).fa=s,e.push(t)),t};var $="closure_lm_"+(1e6*Math.random()|0),H={};function W(e,t,s,n,r){if(Array.isArray(t)){for(var i=0;i<t.length;i++)W(e,t[i],s,n,r);return null}return s=Z(s),e&&e[D]?e.K(t,s,!!a(n)&&!!n.capture,r):function(e,t,s,n,r,i){if(!t)throw Error("Invalid event type");var o=a(r)?!!r.capture:!!r,l=X(e);if(l||(e[$]=l=new B(e)),s=l.add(t,s,n,o,i),s.proxy)return s;if(n=function(){function e(s){return t.call(e.src,e.listener,s)}const t=Q;return e}(),s.proxy=n,n.src=e,n.listener=s,e.addEventListener)R||(r=o),void 0===r&&(r=!1),e.addEventListener(t.toString(),n,r);else if(e.attachEvent)e.attachEvent(Y(t.toString()),n);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(n)}return s}(e,t,s,!1,n,r)}function G(e,t,s,n,r){if(Array.isArray(t))for(var i=0;i<t.length;i++)G(e,t[i],s,n,r);else n=a(n)?!!n.capture:!!n,s=Z(s),e&&e[D]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(s=q(i=e.g[t],s,n,r))&&(V(i[s]),Array.prototype.splice.call(i,s,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=X(e))&&(t=e.g[t.toString()],e=-1,t&&(e=q(t,s,n,r)),(s=-1<e?t[e]:null)&&K(s))}function K(e){if("number"!=typeof e&&e&&!e.da){var t=e.src;if(t&&t[D])z(t.i,e);else{var s=e.type,n=e.proxy;t.removeEventListener?t.removeEventListener(s,n,e.capture):t.detachEvent?t.detachEvent(Y(s),n):t.addListener&&t.removeListener&&t.removeListener(n),(s=X(t))?(z(s,e),0==s.h&&(s.src=null,t[$]=null)):V(e)}}}function Y(e){return e in H?H[e]:H[e]="on"+e}function Q(e,t){if(e.da)e=!0;else{t=new L(t,this);var s=e.listener,n=e.ha||e.src;e.fa&&K(e),e=s.call(n,t)}return e}function X(e){return(e=e[$])instanceof B?e:null}var J="__closure_events_fn_"+(1e9*Math.random()>>>0);function Z(e){return"function"==typeof e?e:(e[J]||(e[J]=function(t){return e.handleEvent(t)}),e[J])}function ee(){P.call(this),this.i=new B(this),this.M=this,this.F=null}function te(e,t){var s,n=e.F;if(n)for(s=[];n;n=n.F)s.push(n);if(e=e.M,n=t.type||t,"string"==typeof t)t=new O(t,e);else if(t instanceof O)t.target=t.target||e;else{var r=t;w(t=new O(n,e),r)}if(r=!0,s)for(var i=s.length-1;0<=i;i--){var a=t.g=s[i];r=se(a,n,!0,t)&&r}if(r=se(a=t.g=e,n,!0,t)&&r,r=se(a,n,!1,t)&&r,s)for(i=0;i<s.length;i++)r=se(a=t.g=s[i],n,!1,t)&&r}function se(e,t,s,n){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,i=0;i<t.length;++i){var a=t[i];if(a&&!a.da&&a.capture==s){var o=a.listener,l=a.ha||a.src;a.fa&&z(e.i,a),r=!1!==o.call(l,n)&&r}}return r&&!n.defaultPrevented}function ne(e,t,s){if("function"==typeof e)s&&(e=c(e,s));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:r.setTimeout(e,t||0)}function re(e){e.g=ne(()=>{e.g=null,e.i&&(e.i=!1,re(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}u(ee,P),ee.prototype[D]=!0,ee.prototype.removeEventListener=function(e,t,s,n){G(this,e,t,s,n)},ee.prototype.N=function(){if(ee.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var s=t.g[e],n=0;n<s.length;n++)V(s[n]);delete t.g[e],t.h--}}this.F=null},ee.prototype.K=function(e,t,s,n){return this.i.add(String(e),t,!1,s,n)},ee.prototype.L=function(e,t,s,n){return this.i.add(String(e),t,!0,s,n)};class ie extends P{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:re(this)}N(){super.N(),this.g&&(r.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ae(e){P.call(this),this.h=e,this.g={}}u(ae,P);var oe=[];function le(e){x(e.g,function(e,t){this.g.hasOwnProperty(t)&&K(e)},e),e.g={}}ae.prototype.N=function(){ae.aa.N.call(this),le(this)},ae.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ce=r.JSON.stringify,de=r.JSON.parse,ue=class{stringify(e){return r.JSON.stringify(e,void 0)}parse(e){return r.JSON.parse(e,void 0)}};function he(){}function pe(e){return e.h||(e.h=e.i())}function me(){}he.prototype.h=null;var fe={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ge(){O.call(this,"d")}function ye(){O.call(this,"c")}u(ge,O),u(ye,O);var xe={},ve=null;function be(){return ve=ve||new ee}function we(e){O.call(this,xe.La,e)}function Ne(e){const t=be();te(t,new we(t))}function Se(e,t){O.call(this,xe.STAT_EVENT,e),this.stat=t}function Ee(e){const t=be();te(t,new Se(t,e))}function je(e,t){O.call(this,xe.Ma,e),this.size=t}function Te(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return r.setTimeout(function(){e()},t)}function _e(){this.g=!0}function Ie(e,t,s,n){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var s=JSON.parse(t);if(s)for(e=0;e<s.length;e++)if(Array.isArray(s[e])){var n=s[e];if(!(2>n.length)){var r=n[1];if(Array.isArray(r)&&!(1>r.length)){var i=r[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var a=1;a<r.length;a++)r[a]=""}}}return ce(s)}catch(o){return t}}(e,s)+(n?" "+n:"")})}xe.La="serverreachability",u(we,O),xe.STAT_EVENT="statevent",u(Se,O),xe.Ma="timingevent",u(je,O),_e.prototype.xa=function(){this.g=!1},_e.prototype.info=function(){};var Ce,ke={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ae={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Pe(){}function Oe(e,t,s,n){this.j=e,this.i=t,this.l=s,this.R=n||1,this.U=new ae(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Re}function Re(){this.i=null,this.g="",this.h=!1}u(Pe,he),Pe.prototype.g=function(){return new XMLHttpRequest},Pe.prototype.i=function(){return{}},Ce=new Pe;var Le={},Me={};function De(e,t,s){e.L=1,e.v=ct(rt(t)),e.m=s,e.P=!0,Ue(e,null)}function Ue(e,t){e.F=Date.now(),Be(e),e.A=rt(e.v);var s=e.A,n=e.R;Array.isArray(n)||(n=[String(n)]),Nt(s.i,"t",n),e.C=0,s=e.j.J,e.h=new Re,e.g=cs(e.j,s?t:null,!e.m),0<e.O&&(e.M=new ie(c(e.Y,e,e.g),e.O)),t=e.U,s=e.g,n=e.ca;var r="readystatechange";Array.isArray(r)||(r&&(oe[0]=r.toString()),r=oe);for(var i=0;i<r.length;i++){var a=W(s,r[i],n||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?v(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ne(),function(e,t,s,n,r,i){e.info(function(){if(e.g)if(i)for(var a="",o=i.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var d=c[0];c=c[1];var u=d.split("_");a=2<=u.length&&"type"==u[1]?a+(d+"=")+c+"&":a+(d+"=redacted&")}}else a=null;else a=i;return"XMLHTTP REQ ("+n+") [attempt "+r+"]: "+t+"\n"+s+"\n"+a})}(e.i,e.u,e.A,e.l,e.R,e.m)}function Fe(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Ve(e,t){var s=e.C,n=t.indexOf("\n",s);return-1==n?Me:(s=Number(t.substring(s,n)),isNaN(s)?Le:(n+=1)+s>t.length?Me:(t=t.slice(n,n+s),e.C=n+s,t))}function Be(e){e.S=Date.now()+e.I,ze(e,e.I)}function ze(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Te(c(e.ba,e),t)}function qe(e){e.B&&(r.clearTimeout(e.B),e.B=null)}function $e(e){0==e.j.G||e.J||rs(e.j,e)}function He(e){qe(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,le(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function We(e,t){try{var s=e.j;if(0!=s.G&&(s.g==e||Xe(s.h,e)))if(!e.K&&Xe(s.h,e)&&3==s.G){try{var n=s.Da.g.parse(t)}catch(d){n=null}if(Array.isArray(n)&&3==n.length){var r=n;if(0==r[0]){e:if(!s.u){if(s.g){if(!(s.g.F+3e3<e.F))break e;ns(s),Gt(s)}es(s),Ee(18)}}else s.za=r[1],0<s.za-s.T&&37500>r[2]&&s.F&&0==s.v&&!s.C&&(s.C=Te(c(s.Za,s),6e3));if(1>=Qe(s.h)&&s.ca){try{s.ca()}catch(d){}s.ca=void 0}}else as(s,11)}else if((e.K||s.g==e)&&ns(s),!m(t))for(r=s.Da.g.parse(t),t=0;t<r.length;t++){let c=r[t];if(s.T=c[0],c=c[1],2==s.G)if("c"==c[0]){s.K=c[1],s.ia=c[2];const t=c[3];null!=t&&(s.la=t,s.j.info("VER="+s.la));const r=c[4];null!=r&&(s.Aa=r,s.j.info("SVER="+s.Aa));const d=c[5];null!=d&&"number"==typeof d&&0<d&&(n=1.5*d,s.L=n,s.j.info("backChannelRequestTimeoutMs_="+n)),n=s;const u=e.g;if(u){const e=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=n.h;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(Je(i,i.h),i.h=null))}if(n.D){const e=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(n.ya=e,lt(n.I,n.D,e))}}s.G=3,s.l&&s.l.ua(),s.ba&&(s.R=Date.now()-e.F,s.j.info("Handshake RTT: "+s.R+"ms"));var a=e;if((n=s).qa=ls(n,n.J?n.ia:null,n.W),a.K){Ze(n.h,a);var o=a,l=n.L;l&&(o.I=l),o.B&&(qe(o),Be(o)),n.g=a}else Zt(n);0<s.i.length&&Yt(s)}else"stop"!=c[0]&&"close"!=c[0]||as(s,7);else 3==s.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?as(s,7):Wt(s):"noop"!=c[0]&&s.l&&s.l.ta(c),s.v=0)}Ne()}catch(d){}}Oe.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==zt(e)?t.j():this.Y(e)},Oe.prototype.Y=function(e){try{if(e==this.g)e:{const h=zt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||qt(this.g)))){this.J||4!=h||7==t||Ne(),qe(this);var s=this.g.Z();this.X=s;t:if(Fe(this)){var n=qt(this.g);e="";var i=n.length,a=4==zt(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){He(this),$e(this);var o="";break t}this.h.i=new r.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(n[t],{stream:!(a&&t==i-1)});n.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==s,function(e,t,s,n,r,i,a){e.info(function(){return"XMLHTTP RESP ("+n+") [ attempt "+r+"]: "+t+"\n"+s+"\n"+i+" "+a})}(this.i,this.u,this.A,this.l,this.R,h,s),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!m(l)){var d=l;break t}}d=null}if(!(s=d)){this.o=!1,this.s=3,Ee(12),He(this),$e(this);break e}Ie(this.i,this.l,s,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,We(this,s)}if(this.P){let e;for(s=!0;!this.J&&this.C<o.length;){if(e=Ve(this,o),e==Me){4==h&&(this.s=4,Ee(14),s=!1),Ie(this.i,this.l,null,"[Incomplete Response]");break}if(e==Le){this.s=4,Ee(15),Ie(this.i,this.l,o,"[Invalid Chunk]"),s=!1;break}Ie(this.i,this.l,e,null),We(this,e)}if(Fe(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=o.length||this.h.h||(this.s=1,Ee(16),s=!1),this.o=this.o&&s,s){if(0<o.length&&!this.W){this.W=!0;var u=this.j;u.g==this&&u.ba&&!u.M&&(u.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),ts(u),u.M=!0,Ee(11))}}else Ie(this.i,this.l,o,"[Invalid Chunked Response]"),He(this),$e(this)}else Ie(this.i,this.l,o,null),We(this,o);4==h&&He(this),this.o&&!this.J&&(4==h?rs(this.j,this):(this.o=!1,Be(this)))}else(function(e){const t={};e=(e.g&&2<=zt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let n=0;n<e.length;n++){if(m(e[n]))continue;var s=N(e[n]);const r=s[0];if("string"!=typeof(s=s[1]))continue;s=s.trim();const i=t[r]||[];t[r]=i,i.push(s)}!function(e,t){for(const s in e)t.call(void 0,e[s],s,e)}(t,function(e){return e.join(", ")})})(this.g),400==s&&0<o.indexOf("Unknown SID")?(this.s=3,Ee(12)):(this.s=0,Ee(13)),He(this),$e(this)}}}catch(h){}},Oe.prototype.cancel=function(){this.J=!0,He(this)},Oe.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(Ne(),Ee(17)),He(this),this.s=2,$e(this)):ze(this,this.S-e)};var Ge=class{constructor(e,t){this.g=e,this.map=t}};function Ke(e){this.l=e||10,r.PerformanceNavigationTiming?e=0<(e=r.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(r.chrome&&r.chrome.loadTimes&&r.chrome.loadTimes()&&r.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ye(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Qe(e){return e.h?1:e.g?e.g.size:0}function Xe(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Je(e,t){e.g?e.g.add(t):e.h=t}function Ze(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function et(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const s of e.g.values())t=t.concat(s.D);return t}return h(e.i)}function tt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(i(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var s=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(i(e)||"string"==typeof e){var t=[];e=e.length;for(var s=0;s<e;s++)t.push(s);return t}t=[],s=0;for(const n in e)t[s++]=n;return t}}}(e),n=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(i(e)){for(var t=[],s=e.length,n=0;n<s;n++)t.push(e[n]);return t}for(n in t=[],s=0,e)t[s++]=e[n];return t}(e),r=n.length,a=0;a<r;a++)t.call(void 0,n[a],s&&s[a],e)}Ke.prototype.cancel=function(){if(this.i=et(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var st=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nt(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof nt){this.h=e.h,it(this,e.j),this.o=e.o,this.g=e.g,at(this,e.s),this.l=e.l;var t=e.i,s=new xt;s.i=t.i,t.g&&(s.g=new Map(t.g),s.h=t.h),ot(this,s),this.m=e.m}else e&&(t=String(e).match(st))?(this.h=!1,it(this,t[1]||"",!0),this.o=dt(t[2]||""),this.g=dt(t[3]||"",!0),at(this,t[4]),this.l=dt(t[5]||"",!0),ot(this,t[6]||"",!0),this.m=dt(t[7]||"")):(this.h=!1,this.i=new xt(null,this.h))}function rt(e){return new nt(e)}function it(e,t,s){e.j=s?dt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function at(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ot(e,t,s){t instanceof xt?(e.i=t,function(e,t){t&&!e.j&&(vt(e),e.i=null,e.g.forEach(function(e,t){var s=t.toLowerCase();t!=s&&(bt(this,t),Nt(this,s,e))},e)),e.j=t}(e.i,e.h)):(s||(t=ut(t,gt)),e.i=new xt(t,e.h))}function lt(e,t,s){e.i.set(t,s)}function ct(e){return lt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function dt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ut(e,t,s){return"string"==typeof e?(e=encodeURI(e).replace(t,ht),s&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ht(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}nt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ut(t,pt,!0),":");var s=this.g;return(s||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ut(t,pt,!0),"@"),e.push(encodeURIComponent(String(s)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(s=this.s)&&e.push(":",String(s))),(s=this.l)&&(this.g&&"/"!=s.charAt(0)&&e.push("/"),e.push(ut(s,"/"==s.charAt(0)?ft:mt,!0))),(s=this.i.toString())&&e.push("?",s),(s=this.m)&&e.push("#",ut(s,yt)),e.join("")};var pt=/[#\/\?@]/g,mt=/[#\?:]/g,ft=/[#\?]/g,gt=/[#\?@]/g,yt=/#/g;function xt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function vt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var s=0;s<e.length;s++){var n=e[s].indexOf("="),r=null;if(0<=n){var i=e[s].substring(0,n);r=e[s].substring(n+1)}else i=e[s];t(i,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(e.i,function(t,s){e.add(decodeURIComponent(t.replace(/\+/g," ")),s)}))}function bt(e,t){vt(e),t=St(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function wt(e,t){return vt(e),t=St(e,t),e.g.has(t)}function Nt(e,t,s){bt(e,t),0<s.length&&(e.i=null,e.g.set(St(e,t),h(s)),e.h+=s.length)}function St(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Et(e,t,s,n,r){try{r&&(r.onload=null,r.onerror=null,r.onabort=null,r.ontimeout=null),n(s)}catch(i){}}function jt(){this.g=new ue}function Tt(e,t,s){const n=s||"";try{tt(e,function(e,s){let r=e;a(e)&&(r=ce(e)),t.push(n+s+"="+encodeURIComponent(r))})}catch(r){throw t.push(n+"type="+encodeURIComponent("_badmap")),r}}function _t(e){this.l=e.Ub||null,this.j=e.eb||!1}function It(e,t){ee.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Ct(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function kt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,At(e)}function At(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Pt(e){let t="";return x(e,function(e,s){t+=s,t+=":",t+=e,t+="\r\n"}),t}function Ot(e,t,s){e:{for(n in s){var n=!1;break e}n=!0}n||(s=Pt(s),"string"==typeof e?null!=s&&encodeURIComponent(String(s)):lt(e,t,s))}function Rt(e){ee.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=xt.prototype).add=function(e,t){vt(this),this.i=null,e=St(this,e);var s=this.g.get(e);return s||this.g.set(e,s=[]),s.push(t),this.h+=1,this},e.forEach=function(e,t){vt(this),this.g.forEach(function(s,n){s.forEach(function(s){e.call(t,s,n,this)},this)},this)},e.na=function(){vt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),s=[];for(let n=0;n<t.length;n++){const r=e[n];for(let e=0;e<r.length;e++)s.push(t[n])}return s},e.V=function(e){vt(this);let t=[];if("string"==typeof e)wt(this,e)&&(t=t.concat(this.g.get(St(this,e))));else{e=Array.from(this.g.values());for(let s=0;s<e.length;s++)t=t.concat(e[s])}return t},e.set=function(e,t){return vt(this),this.i=null,wt(this,e=St(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var s=0;s<t.length;s++){var n=t[s];const i=encodeURIComponent(String(n)),a=this.V(n);for(n=0;n<a.length;n++){var r=i;""!==a[n]&&(r+="="+encodeURIComponent(String(a[n]))),e.push(r)}}return this.i=e.join("&")},u(_t,he),_t.prototype.g=function(){return new It(this.l,this.j)},_t.prototype.i=function(e){return function(){return e}}({}),u(It,ee),(e=It.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,At(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||r).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,kt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,At(this)),this.g&&(this.readyState=3,At(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(void 0!==r.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ct(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?kt(this):At(this),3==this.readyState&&Ct(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,kt(this))},e.Qa=function(e){this.g&&(this.response=e,kt(this))},e.ga=function(){this.g&&kt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var s=t.next();!s.done;)s=s.value,e.push(s[0]+": "+s[1]),s=t.next();return e.join("\r\n")},Object.defineProperty(It.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),u(Rt,ee);var Lt=/^https?$/i,Mt=["POST","PUT"];function Dt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Ut(e),Vt(e)}function Ut(e){e.A||(e.A=!0,te(e,"complete"),te(e,"error"))}function Ft(e){if(e.h&&void 0!==n&&(!e.v[1]||4!=zt(e)||2!=e.Z()))if(e.u&&4==zt(e))ne(e.Ea,0,e);else if(te(e,"readystatechange"),4==zt(e)){e.h=!1;try{const n=e.Z();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var s;if(!(s=t)){var i;if(i=0===n){var a=String(e.D).match(st)[1]||null;!a&&r.self&&r.self.location&&(a=r.self.location.protocol.slice(0,-1)),i=!Lt.test(a?a.toLowerCase():"")}s=i}if(s)te(e,"complete"),te(e,"success");else{e.m=6;try{var o=2<zt(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",Ut(e)}}finally{Vt(e)}}}function Vt(e,t){if(e.g){Bt(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||te(e,"ready");try{n.onreadystatechange=r}catch(s){}}}function Bt(e){e.I&&(r.clearTimeout(e.I),e.I=null)}function zt(e){return e.g?e.g.readyState:0}function qt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function $t(e,t,s){return s&&s.internalChannelParams&&s.internalChannelParams[e]||t}function Ht(e){this.Aa=0,this.i=[],this.j=new _e,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=$t("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=$t("baseRetryDelayMs",5e3,e),this.cb=$t("retryDelaySeedMs",1e4,e),this.Wa=$t("forwardChannelMaxRetries",2,e),this.wa=$t("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Ke(e&&e.concurrentRequestLimit),this.Da=new jt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Wt(e){if(Kt(e),3==e.G){var t=e.U++,s=rt(e.I);if(lt(s,"SID",e.K),lt(s,"RID",t),lt(s,"TYPE","terminate"),Xt(e,s),(t=new Oe(e,e.j,t)).L=2,t.v=ct(rt(s)),s=!1,r.navigator&&r.navigator.sendBeacon)try{s=r.navigator.sendBeacon(t.v.toString(),"")}catch(n){}!s&&r.Image&&((new Image).src=t.v,s=!0),s||(t.g=cs(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Be(t)}os(e)}function Gt(e){e.g&&(ts(e),e.g.cancel(),e.g=null)}function Kt(e){Gt(e),e.u&&(r.clearTimeout(e.u),e.u=null),ns(e),e.h.cancel(),e.s&&("number"==typeof e.s&&r.clearTimeout(e.s),e.s=null)}function Yt(e){if(!Ye(e.h)&&!e.s){e.s=!0;var t=e.Ga;_||k(),I||(_(),I=!0),C.add(t,e),e.B=0}}function Qt(e,t){var s;s=t?t.l:e.U++;const n=rt(e.I);lt(n,"SID",e.K),lt(n,"RID",s),lt(n,"AID",e.T),Xt(e,n),e.m&&e.o&&Ot(n,e.m,e.o),s=new Oe(e,e.j,s,e.B+1),null===e.m&&(s.H=e.o),t&&(e.i=t.D.concat(e.i)),t=Jt(e,s,1e3),s.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),Je(e.h,s),De(s,n,t)}function Xt(e,t){e.H&&x(e.H,function(e,s){lt(t,s,e)}),e.l&&tt({},function(e,s){lt(t,s,e)})}function Jt(e,t,s){s=Math.min(e.i.length,s);var n=e.l?c(e.l.Na,e.l,e):null;e:{var r=e.i;let t=-1;for(;;){const e=["count="+s];-1==t?0<s?(t=r[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let a=!0;for(let o=0;o<s;o++){let s=r[o].g;const l=r[o].map;if(s-=t,0>s)t=Math.max(0,r[o].g-100),a=!1;else try{Tt(l,e,"req"+s+"_")}catch(i){n&&n(l)}}if(a){n=e.join("&");break e}}}return e=e.i.splice(0,s),t.D=e,n}function Zt(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;_||k(),I||(_(),I=!0),C.add(t,e),e.v=0}}function es(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Te(c(e.Fa,e),is(e,e.v)),e.v++,!0)}function ts(e){null!=e.A&&(r.clearTimeout(e.A),e.A=null)}function ss(e){e.g=new Oe(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=rt(e.qa);lt(t,"RID","rpc"),lt(t,"SID",e.K),lt(t,"AID",e.T),lt(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&lt(t,"TO",e.ja),lt(t,"TYPE","xmlhttp"),Xt(e,t),e.m&&e.o&&Ot(t,e.m,e.o),e.L&&(e.g.I=e.L);var s=e.g;e=e.ia,s.L=1,s.v=ct(rt(t)),s.m=null,s.P=!0,Ue(s,e)}function ns(e){null!=e.C&&(r.clearTimeout(e.C),e.C=null)}function rs(e,t){var s=null;if(e.g==t){ns(e),ts(e),e.g=null;var n=2}else{if(!Xe(e.h,t))return;s=t.D,Ze(e.h,t),n=1}if(0!=e.G)if(t.o)if(1==n){s=t.m?t.m.length:0,t=Date.now()-t.F;var r=e.B;te(n=be(),new je(n,s)),Yt(e)}else Zt(e);else if(3==(r=t.s)||0==r&&0<t.X||!(1==n&&function(e,t){return!(Qe(e.h)>=e.h.j-(e.s?1:0)||(e.s?(e.i=t.D.concat(e.i),0):1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa)||(e.s=Te(c(e.Ga,e,t),is(e,e.B)),e.B++,0)))}(e,t)||2==n&&es(e)))switch(s&&0<s.length&&(t=e.h,t.i=t.i.concat(s)),r){case 1:as(e,5);break;case 4:as(e,10);break;case 3:as(e,6);break;default:as(e,2)}}function is(e,t){let s=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(s*=2),s*t}function as(e,t){if(e.j.info("Error code "+t),2==t){var s=c(e.fb,e),n=e.Xa;const t=!n;n=new nt(n||"//www.google.com/images/cleardot.gif"),r.location&&"http"==r.location.protocol||it(n,"https"),ct(n),t?function(e,t){const s=new _e;if(r.Image){const n=new Image;n.onload=d(Et,s,"TestLoadImage: loaded",!0,t,n),n.onerror=d(Et,s,"TestLoadImage: error",!1,t,n),n.onabort=d(Et,s,"TestLoadImage: abort",!1,t,n),n.ontimeout=d(Et,s,"TestLoadImage: timeout",!1,t,n),r.setTimeout(function(){n.ontimeout&&n.ontimeout()},1e4),n.src=e}else t(!1)}(n.toString(),s):function(e,t){new _e;const s=new AbortController,n=setTimeout(()=>{s.abort(),Et(0,0,!1,t)},1e4);fetch(e,{signal:s.signal}).then(e=>{clearTimeout(n),e.ok?Et(0,0,!0,t):Et(0,0,!1,t)}).catch(()=>{clearTimeout(n),Et(0,0,!1,t)})}(n.toString(),s)}else Ee(2);e.G=0,e.l&&e.l.sa(t),os(e),Kt(e)}function os(e){if(e.G=0,e.ka=[],e.l){const t=et(e.h);0==t.length&&0==e.i.length||(p(e.ka,t),p(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function ls(e,t,s){var n=s instanceof nt?rt(s):new nt(s);if(""!=n.g)t&&(n.g=t+"."+n.g),at(n,n.s);else{var i=r.location;n=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new nt(null);n&&it(a,n),t&&(a.g=t),i&&at(a,i),s&&(a.l=s),n=a}return s=e.D,t=e.ya,s&&t&&lt(n,s,t),lt(n,"VER",e.la),Xt(e,n),n}function cs(e,t,s){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Rt(new _t({eb:s})):new Rt(e.pa)).Ha(e.J),t}function ds(){}function us(){}function hs(e,t){ee.call(this),this.g=new Ht(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!m(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!m(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new fs(this)}function ps(e){ge.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const s in t){e=s;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function ms(){ye.call(this),this.status=1}function fs(e){this.g=e}(e=Rt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,s,n){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ce.g(),this.v=this.o?pe(this.o):pe(Ce),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Dt(this,a)}if(e=s||"",s=new Map(this.headers),n)if(Object.getPrototypeOf(n)===Object.prototype)for(var i in n)s.set(i,n[i]);else{if("function"!=typeof n.keys||"function"!=typeof n.get)throw Error("Unknown input type for opt_headers: "+String(n));for(const e of n.keys())s.set(e,n.get(e))}n=Array.from(s.keys()).find(e=>"content-type"==e.toLowerCase()),i=r.FormData&&e instanceof r.FormData,!(0<=Array.prototype.indexOf.call(Mt,t,void 0))||n||i||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[r,o]of s)this.g.setRequestHeader(r,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Bt(this),this.u=!0,this.g.send(e),this.u=!1}catch(a){Dt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,te(this,"complete"),te(this,"abort"),Vt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vt(this,!0)),Rt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Ft(this):this.bb())},e.bb=function(){Ft(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<zt(this)?this.g.status:-1}catch(e){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),de(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(e=Ht.prototype).la=8,e.G=1,e.connect=function(e,t,s,n){Ee(0),this.W=e,this.H=t||{},s&&void 0!==n&&(this.H.OSID=s,this.H.OAID=n),this.F=this.X,this.I=ls(this,null,this.W),Yt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const r=new Oe(this,this.j,e);let i=this.o;if(this.S&&(i?(i=v(i),w(i,this.S)):i=this.S),null!==this.m||this.O||(r.H=i,i=null),this.P)e:{for(var t=0,s=0;s<this.i.length;s++){var n=this.i[s];if(void 0===(n="__data__"in n.map&&"string"==typeof(n=n.map.__data__)?n.length:void 0))break;if(4096<(t+=n)){t=s;break e}if(4096===t||s===this.i.length-1){t=s+1;break e}}t=1e3}else t=1e3;t=Jt(this,r,t),lt(s=rt(this.I),"RID",e),lt(s,"CVER",22),this.D&&lt(s,"X-HTTP-Session-Id",this.D),Xt(this,s),i&&(this.O?t="headers="+encodeURIComponent(String(Pt(i)))+"&"+t:this.m&&Ot(s,this.m,i)),Je(this.h,r),this.Ua&&lt(s,"TYPE","init"),this.P?(lt(s,"$req",t),lt(s,"SID","null"),r.T=!0,De(r,s,null)):De(r,s,t),this.G=2}}else 3==this.G&&(e?Qt(this,e):0==this.i.length||Ye(this.h)||Qt(this))},e.Fa=function(){if(this.u=null,ss(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Te(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ee(10),Gt(this),ss(this))},e.Za=function(){null!=this.C&&(this.C=null,Gt(this),es(this),Ee(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Ee(2)):(this.j.info("Failed to ping google.com"),Ee(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=ds.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},us.prototype.g=function(e,t){return new hs(e,t)},u(hs,ee),hs.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},hs.prototype.close=function(){Wt(this.g)},hs.prototype.o=function(e){var t=this.g;if("string"==typeof e){var s={};s.__data__=e,e=s}else this.u&&((s={}).__data__=ce(e),e=s);t.i.push(new Ge(t.Ya++,e)),3==t.G&&Yt(t)},hs.prototype.N=function(){this.g.l=null,delete this.j,Wt(this.g),delete this.g,hs.aa.N.call(this)},u(ps,ge),u(ms,ye),u(fs,ds),fs.prototype.ua=function(){te(this.g,"a")},fs.prototype.ta=function(e){te(this.g,new ps(e))},fs.prototype.sa=function(e){te(this.g,new ms)},fs.prototype.ra=function(){te(this.g,"b")},us.prototype.createWebChannel=us.prototype.g,hs.prototype.send=hs.prototype.o,hs.prototype.open=hs.prototype.m,hs.prototype.close=hs.prototype.close,Zr=function(){return new us},Jr=function(){return be()},Xr=xe,Qr={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ke.NO_ERROR=0,ke.TIMEOUT=8,ke.HTTP_ERROR=6,Yr=ke,Ae.COMPLETE="complete",Kr=Ae,me.EventType=fe,fe.OPEN="a",fe.CLOSE="b",fe.ERROR="c",fe.MESSAGE="d",ee.prototype.listen=ee.prototype.K,Gr=me,Rt.prototype.listenOnce=Rt.prototype.L,Rt.prototype.getLastError=Rt.prototype.Ka,Rt.prototype.getLastErrorCode=Rt.prototype.Ba,Rt.prototype.getStatus=Rt.prototype.Z,Rt.prototype.getResponseJson=Rt.prototype.Oa,Rt.prototype.getResponseText=Rt.prototype.oa,Rt.prototype.send=Rt.prototype.ea,Rt.prototype.setWithCredentials=Rt.prototype.Ha,Wr=Rt}).apply(void 0!==ei?ei:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});const ti="@firebase/firestore",si="4.9.1";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ni.UNAUTHENTICATED=new ni(null),ni.GOOGLE_CREDENTIALS=new ni("google-credentials-uid"),ni.FIRST_PARTY=new ni("first-party-uid"),ni.MOCK_USER=new ni("mock-user");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let ri="12.2.0";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ii=new ge("@firebase/firestore");function ai(){return ii.logLevel}function oi(e,...t){if(ii.logLevel<=de.DEBUG){const s=t.map(di);ii.debug(`Firestore (${ri}): ${e}`,...s)}}function li(e,...t){if(ii.logLevel<=de.ERROR){const s=t.map(di);ii.error(`Firestore (${ri}): ${e}`,...s)}}function ci(e,...t){if(ii.logLevel<=de.WARN){const s=t.map(di);ii.warn(`Firestore (${ri}): ${e}`,...s)}}function di(e){if("string"==typeof e)return e;try{
/**
    * @license
    * Copyright 2020 Google LLC
    *
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    *   http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    */
return t=e,JSON.stringify(t)}catch(s){return e}var t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ui(e,t,s){let n="Unexpected state";"string"==typeof t?n=t:s=t,hi(e,n,s)}function hi(e,t,s){let n=`FIRESTORE (${ri}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(void 0!==s)try{n+=" CONTEXT: "+JSON.stringify(s)}catch(r){n+=" CONTEXT: "+s}throw li(n),new Error(n)}function pi(e,t,s,n){let r="Unexpected state";"string"==typeof s?r=s:n=s,e||hi(t,r,n)}function mi(e,t){return e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fi={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class gi extends K{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class vi{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ni.UNAUTHENTICATED))}shutdown(){}}class bi{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class wi{constructor(e){this.t=e,this.currentUser=ni.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){pi(void 0===this.o,42304);let s=this.i;const n=e=>this.i!==s?(s=this.i,t(e)):Promise.resolve();let r=new yi;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new yi,e.enqueueRetryable(()=>n(this.currentUser))};const i=()=>{const t=r;e.enqueueRetryable(async()=>{await t.promise,await n(this.currentUser)})},a=e=>{oi("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(oi("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new yi)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(oi("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(pi("string"==typeof t.accessToken,31837,{l:t}),new xi(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pi(null===e||"string"==typeof e,2055,{h:e}),new ni(e)}}class Ni{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=ni.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Si{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new Ni(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(ni.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ei{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ji{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){pi(void 0===this.o,3512);const s=e=>{null!=e.error&&oi("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const s=e.token!==this.m;return this.m=e.token,oi("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>s(t))};const n=e=>{oi("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>n(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?n(e):oi("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ei(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(pi("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new Ei(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ti(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),s=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(s);else for(let n=0;n<e;n++)s[n]=Math.floor(256*Math.random());return s}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const s=Ti(40);for(let n=0;n<s.length;++n)t.length<20&&s[n]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(s[n]%62))}return t}}function Ii(e,t){return e<t?-1:e>t?1:0}function Ci(e,t){const s=Math.min(e.length,t.length);for(let n=0;n<s;n++){const s=e.charAt(n),r=t.charAt(n);if(s!==r)return Pi(s)===Pi(r)?Ii(s,r):Pi(s)?1:-1}return Ii(e.length,t.length)}const ki=55296,Ai=57343;function Pi(e){const t=e.charCodeAt(0);return t>=ki&&t<=Ai}function Oi(e,t,s){return e.length===t.length&&e.every((e,n)=>s(e,t[n]))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ri="__name__";class Li{constructor(e,t,s){void 0===t?t=0:t>e.length&&ui(637,{offset:t,range:e.length}),void 0===s?s=e.length-t:s>e.length-t&&ui(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===Li.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Li?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let n=0;n<s;n++){const s=Li.compareSegments(e.get(n),t.get(n));if(0!==s)return s}return Ii(e.length,t.length)}static compareSegments(e,t){const s=Li.isNumericId(e),n=Li.isNumericId(t);return s&&!n?-1:!s&&n?1:s&&n?Li.extractNumericId(e).compare(Li.extractNumericId(t)):Ci(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return qr.fromString(e.substring(4,e.length-2))}}class Mi extends Li{construct(e,t,s){return new Mi(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new gi(fi.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(e=>e.length>0))}return new Mi(t)}static emptyPath(){return new Mi([])}}const Di=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ui extends Li{construct(e,t,s){return new Ui(e,t,s)}static isValidIdentifier(e){return Di.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ui.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Ri}static keyField(){return new Ui([Ri])}static fromServerFormat(e){const t=[];let s="",n=0;const r=()=>{if(0===s.length)throw new gi(fi.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let i=!1;for(;n<e.length;){const t=e[n];if("\\"===t){if(n+1===e.length)throw new gi(fi.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[n+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new gi(fi.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=t,n+=2}else"`"===t?(i=!i,n++):"."!==t||i?(s+=t,n++):(r(),n++)}if(r(),i)throw new gi(fi.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ui(t)}static emptyPath(){return new Ui([])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e){this.path=e}static fromPath(e){return new Fi(Mi.fromString(e))}static fromName(e){return new Fi(Mi.fromString(e).popFirst(5))}static empty(){return new Fi(Mi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Mi.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Mi.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Fi(new Mi(e.slice()))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vi(e,t,s){if(!s)throw new gi(fi.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Bi(e){if(!Fi.isDocumentKey(e))throw new gi(fi.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function zi(e){if(Fi.isDocumentKey(e))throw new gi(fi.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function qi(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function $i(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const s=(t=e).constructor?t.constructor.name:null;return s?`a custom ${s} object`:"an object"}}var t;return"function"==typeof e?"a function":ui(12329,{type:typeof e})}function Hi(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new gi(fi.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=$i(e);throw new gi(fi.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${s}`)}}return e}
/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wi(e,t){const s={typeString:e};return t&&(s.value=t),s}function Gi(e,t){if(!qi(e))throw new gi(fi.INVALID_ARGUMENT,"JSON must be an object");let s;for(const n in t)if(t[n]){const r=t[n].typeString,i="value"in t[n]?{value:t[n].value}:void 0;if(!(n in e)){s=`JSON missing required field: '${n}'`;break}const a=e[n];if(r&&typeof a!==r){s=`JSON field '${n}' must be a ${r}.`;break}if(void 0!==i&&a!==i.value){s=`Expected '${n}' field to equal '${i.value}'`;break}}if(s)throw new gi(fi.INVALID_ARGUMENT,s);return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki=-62135596800,Yi=1e6;class Qi{static now(){return Qi.fromMillis(Date.now())}static fromDate(e){return Qi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*Yi);return new Qi(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new gi(fi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new gi(fi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Ki)throw new gi(fi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new gi(fi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Yi}_compareTo(e){return this.seconds===e.seconds?Ii(this.nanoseconds,e.nanoseconds):Ii(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Qi._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Gi(e,Qi._jsonSchema))return new Qi(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ki;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Qi._jsonSchemaVersion="firestore/timestamp/1.0",Qi._jsonSchema={type:Wi("string",Qi._jsonSchemaVersion),seconds:Wi("number"),nanoseconds:Wi("number")};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Xi{static fromTimestamp(e){return new Xi(e)}static min(){return new Xi(new Qi(0,0))}static max(){return new Xi(new Qi(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ji(e){return new Zi(e.readTime,e.key,-1)}class Zi{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Zi(Xi.min(),Fi.empty(),-1)}static max(){return new Zi(Xi.max(),Fi.empty(),-1)}}function ea(e,t){let s=e.readTime.compareTo(t.readTime);return 0!==s?s:(s=Fi.comparator(e.documentKey,t.documentKey),0!==s?s:Ii(e.largestBatchId,t.largestBatchId)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)}class ta{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sa(e){if(e.code!==fi.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==e.message)throw e;oi("LocalStore","Unexpectedly lost primary lease")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ui(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new na((s,n)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(s,n)},this.catchCallback=e=>{this.wrapFailure(t,e).next(s,n)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof na?t:na.resolve(t)}catch(t){return na.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):na.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):na.reject(t)}static resolve(e){return new na((t,s)=>{t(e)})}static reject(e){return new na((t,s)=>{s(e)})}static waitFor(e){return new na((t,s)=>{let n=0,r=0,i=!1;e.forEach(e=>{++n,e.next(()=>{++r,i&&r===n&&t()},e=>s(e))}),i=!0,r===n&&t()})}static or(e){let t=na.resolve(!1);for(const s of e)t=t.next(e=>e?na.resolve(e):s());return t}static forEach(e,t){const s=[];return e.forEach((e,n)=>{s.push(t.call(this,e,n))}),this.waitFor(s)}static mapArray(e,t){return new na((s,n)=>{const r=e.length,i=new Array(r);let a=0;for(let o=0;o<r;o++){const l=o;t(e[l]).next(e=>{i[l]=e,++a,a===r&&s(i)},e=>n(e))}})}static doWhile(e,t){return new na((s,n)=>{const r=()=>{!0===e()?t().next(()=>{r()},n):s()};r()})}}function ra(e){return"IndexedDbTransactionError"===e.name}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ia.ce=-1;function aa(e){return null==e}function oa(e){return 0===e&&1/e==-1/0}function la(e,t){let s=t;const n=e.length;for(let r=0;r<n;r++){const t=e.charAt(r);switch(t){case"\0":s+="";break;case"":s+="";break;default:s+=t}}return s}function ca(e){return e+""}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function da(e){let t=0;for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&t++;return t}function ua(e,t){for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&t(s,e[s])}function ha(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e,t){this.comparator=e,this.root=t||fa.EMPTY}insert(e,t){return new pa(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,fa.BLACK,null,null))}remove(e){return new pa(this.comparator,this.root.remove(e,this.comparator).copy(null,null,fa.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const n=this.comparator(e,s.key);if(0===n)return t+s.left.size;n<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ma(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ma(this.root,e,this.comparator,!1)}getReverseIterator(){return new ma(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ma(this.root,e,this.comparator,!0)}}class ma{constructor(e,t,s,n){this.isReverse=n,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=t?s(e.key,t):1,t&&n&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(0===r){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class fa{constructor(e,t,s,n,r){this.key=e,this.value=t,this.color=null!=s?s:fa.RED,this.left=null!=n?n:fa.EMPTY,this.right=null!=r?r:fa.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,n,r){return new fa(null!=e?e:this.key,null!=t?t:this.value,null!=s?s:this.color,null!=n?n:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let n=this;const r=s(e,n.key);return n=r<0?n.copy(null,null,null,n.left.insert(e,t,s),null):0===r?n.copy(null,t,null,null,null):n.copy(null,null,null,null,n.right.insert(e,t,s)),n.fixUp()}removeMin(){if(this.left.isEmpty())return fa.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,n=this;if(t(e,n.key)<0)n.left.isEmpty()||n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed()&&(n=n.rotateRight()),n.right.isEmpty()||n.right.isRed()||n.right.left.isRed()||(n=n.moveRedRight()),0===t(e,n.key)){if(n.right.isEmpty())return fa.EMPTY;s=n.right.min(),n=n.copy(s.key,s.value,null,null,n.right.removeMin())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,fa.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,fa.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ui(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ui(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ui(27949);return e+(this.isRed()?0:1)}}fa.EMPTY=null,fa.RED=!0,fa.BLACK=!1,fa.EMPTY=new class{constructor(){this.size=0}get key(){throw ui(57766)}get value(){throw ui(16141)}get color(){throw ui(16727)}get left(){throw ui(29726)}get right(){throw ui(36894)}copy(e,t,s,n,r){return this}insert(e,t,s){return new fa(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ga{constructor(e){this.comparator=e,this.data=new pa(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const n=s.getNext();if(this.comparator(n.key,e[1])>=0)return;t(n.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ya(this.data.getIterator())}getIteratorFrom(e){return new ya(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof ga))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,n=s.getNext().key;if(0!==this.comparator(e,n))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ga(this.comparator);return t.data=e,t}}class ya{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e){this.fields=e,e.sort(Ui.comparator)}static empty(){return new xa([])}unionWith(e){let t=new ga(Ui.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new xa(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Oi(this.fields,e.fields,(e,t)=>e.isEqual(t))}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new va("Invalid base64 string: "+t):t}}(e);return new ba(t)}static fromUint8Array(e){const t=function(e){let t="";for(let s=0;s<e.length;++s)t+=String.fromCharCode(e[s]);return t}(e);return new ba(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ii(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ba.EMPTY_BYTE_STRING=new ba("");const wa=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Na(e){if(pi(!!e,39018),"string"==typeof e){let t=0;const s=wa.exec(e);if(pi(!!s,46558,{timestamp:e}),s[1]){let e=s[1];e=(e+"000000000").substr(0,9),t=Number(e)}const n=new Date(e);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:Sa(e.seconds),nanos:Sa(e.nanos)}}function Sa(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Ea(e){return"string"==typeof e?ba.fromBase64String(e):ba.fromUint8Array(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ja="server_timestamp",Ta="__type__",_a="__previous_value__",Ia="__local_write_time__";function Ca(e){const t=(e?.mapValue?.fields||{})[Ta]?.stringValue;return t===ja}function ka(e){const t=e.mapValue.fields[_a];return Ca(t)?ka(t):t}function Aa(e){const t=Na(e.mapValue.fields[Ia].timestampValue);return new Qi(t.seconds,t.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e,t,s,n,r,i,a,o,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=n,this.ssl=r,this.forceLongPolling=i,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l,this.isUsingEmulator=c}}const Oa="(default)";class Ra{constructor(e,t){this.projectId=e,this.database=t||Oa}static empty(){return new Ra("","")}get isDefaultDatabase(){return this.database===Oa}isEqual(e){return e instanceof Ra&&e.projectId===this.projectId&&e.database===this.database}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const La="__type__",Ma="__max__",Da={},Ua="__vector__",Fa="value";function Va(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ca(e)?4:function(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Ma}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)?9007199254740991:function(e){const t=(e?.mapValue?.fields||{})[La]?.stringValue;return t===Ua}(e)?10:11:ui(28295,{value:e})}function Ba(e,t){if(e===t)return!0;const s=Va(e);if(s!==Va(t))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Aa(e).isEqual(Aa(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const s=Na(e.timestampValue),n=Na(t.timestampValue);return s.seconds===n.seconds&&s.nanos===n.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return n=t,Ea(e.bytesValue).isEqual(Ea(n.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Sa(e.geoPointValue.latitude)===Sa(t.geoPointValue.latitude)&&Sa(e.geoPointValue.longitude)===Sa(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Sa(e.integerValue)===Sa(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const s=Sa(e.doubleValue),n=Sa(t.doubleValue);return s===n?oa(s)===oa(n):isNaN(s)&&isNaN(n)}return!1}(e,t);case 9:return Oi(e.arrayValue.values||[],t.arrayValue.values||[],Ba);case 10:case 11:return function(e,t){const s=e.mapValue.fields||{},n=t.mapValue.fields||{};if(da(s)!==da(n))return!1;for(const r in s)if(s.hasOwnProperty(r)&&(void 0===n[r]||!Ba(s[r],n[r])))return!1;return!0}(e,t);default:return ui(52216,{left:e})}var n}function za(e,t){return void 0!==(e.values||[]).find(e=>Ba(e,t))}function qa(e,t){if(e===t)return 0;const s=Va(e),n=Va(t);if(s!==n)return Ii(s,n);switch(s){case 0:case 9007199254740991:return 0;case 1:return Ii(e.booleanValue,t.booleanValue);case 2:return function(e,t){const s=Sa(e.integerValue||e.doubleValue),n=Sa(t.integerValue||t.doubleValue);return s<n?-1:s>n?1:s===n?0:isNaN(s)?isNaN(n)?0:-1:1}(e,t);case 3:return $a(e.timestampValue,t.timestampValue);case 4:return $a(Aa(e),Aa(t));case 5:return Ci(e.stringValue,t.stringValue);case 6:return function(e,t){const s=Ea(e),n=Ea(t);return s.compareTo(n)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const s=e.split("/"),n=t.split("/");for(let r=0;r<s.length&&r<n.length;r++){const e=Ii(s[r],n[r]);if(0!==e)return e}return Ii(s.length,n.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const s=Ii(Sa(e.latitude),Sa(t.latitude));return 0!==s?s:Ii(Sa(e.longitude),Sa(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Ha(e.arrayValue,t.arrayValue);case 10:return function(e,t){const s=e.fields||{},n=t.fields||{},r=s[Fa]?.arrayValue,i=n[Fa]?.arrayValue,a=Ii(r?.values?.length||0,i?.values?.length||0);return 0!==a?a:Ha(r,i)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Da&&t===Da)return 0;if(e===Da)return 1;if(t===Da)return-1;const s=e.fields||{},n=Object.keys(s),r=t.fields||{},i=Object.keys(r);n.sort(),i.sort();for(let a=0;a<n.length&&a<i.length;++a){const e=Ci(n[a],i[a]);if(0!==e)return e;const t=qa(s[n[a]],r[i[a]]);if(0!==t)return t}return Ii(n.length,i.length)}(e.mapValue,t.mapValue);default:throw ui(23264,{he:s})}}function $a(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Ii(e,t);const s=Na(e),n=Na(t),r=Ii(s.seconds,n.seconds);return 0!==r?r:Ii(s.nanos,n.nanos)}function Ha(e,t){const s=e.values||[],n=t.values||[];for(let r=0;r<s.length&&r<n.length;++r){const e=qa(s[r],n[r]);if(e)return e}return Ii(s.length,n.length)}function Wa(e){return Ga(e)}function Ga(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Na(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Ea(e.bytesValue).toBase64():"referenceValue"in e?function(e){return Fi.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",s=!0;for(const n of e.values||[])s?s=!1:t+=",",t+=Ga(n);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let s="{",n=!0;for(const r of t)n?n=!1:s+=",",s+=`${r}:${Ga(e.fields[r])}`;return s+"}"}(e.mapValue):ui(61005,{value:e})}function Ka(e){switch(Va(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=ka(e);return t?16+Ka(t):16;case 5:return 2*e.stringValue.length;case 6:return Ea(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return(e.arrayValue.values||[]).reduce((e,t)=>e+Ka(t),0);case 10:case 11:return function(e){let t=0;return ua(e.fields,(e,s)=>{t+=e.length+Ka(s)}),t}(e.mapValue);default:throw ui(13486,{value:e})}}function Ya(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Qa(e){return!!e&&"integerValue"in e}function Xa(e){return!!e&&"arrayValue"in e}function Ja(e){return!!e&&"nullValue"in e}function Za(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function eo(e){return!!e&&"mapValue"in e}function to(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return ua(e.mapValue.fields,(e,s)=>t.mapValue.fields[e]=to(s)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let s=0;s<(e.arrayValue.values||[]).length;++s)t.arrayValue.values[s]=to(e.arrayValue.values[s]);return t}return{...e}}class so{constructor(e){this.value=e}static empty(){return new so({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!eo(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=to(t)}setAll(e){let t=Ui.emptyPath(),s={},n=[];e.forEach((e,r)=>{if(!t.isImmediateParentOf(r)){const e=this.getFieldsMap(t);this.applyChanges(e,s,n),s={},n=[],t=r.popLast()}e?s[r.lastSegment()]=to(e):n.push(r.lastSegment())});const r=this.getFieldsMap(t);this.applyChanges(r,s,n)}delete(e){const t=this.field(e.popLast());eo(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ba(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let n=t.mapValue.fields[e.get(s)];eo(n)&&n.mapValue.fields||(n={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=n),t=n}return t.mapValue.fields}applyChanges(e,t,s){ua(t,(t,s)=>e[t]=s);for(const n of s)delete e[n]}clone(){return new so(to(this.value))}}function no(e){const t=[];return ua(e.fields,(e,s)=>{const n=new Ui([e]);if(eo(s)){const e=no(s.mapValue).fields;if(0===e.length)t.push(n);else for(const s of e)t.push(n.child(s))}else t.push(n)}),new xa(t)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class ro{constructor(e,t,s,n,r,i,a){this.key=e,this.documentType=t,this.version=s,this.readTime=n,this.createTime=r,this.data=i,this.documentState=a}static newInvalidDocument(e){return new ro(e,0,Xi.min(),Xi.min(),Xi.min(),so.empty(),0)}static newFoundDocument(e,t,s,n){return new ro(e,1,t,Xi.min(),s,n,0)}static newNoDocument(e,t){return new ro(e,2,t,Xi.min(),Xi.min(),so.empty(),0)}static newUnknownDocument(e,t){return new ro(e,3,t,Xi.min(),Xi.min(),so.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Xi.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=so.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=so.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Xi.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ro&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ro(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e,t){this.position=e,this.inclusive=t}}function ao(e,t,s){let n=0;for(let r=0;r<e.position.length;r++){const i=t[r],a=e.position[r];if(n=i.field.isKeyField()?Fi.comparator(Fi.fromName(a.referenceValue),s.key):qa(a,s.data.field(i.field)),"desc"===i.dir&&(n*=-1),0!==n)break}return n}function oo(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let s=0;s<e.position.length;s++)if(!Ba(e.position[s],t.position[s]))return!1;return!0}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e,t="asc"){this.field=e,this.dir=t}}function co(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{}class ho extends uo{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,s):new vo(e,t,s):"array-contains"===t?new So(e,s):"in"===t?new Eo(e,s):"not-in"===t?new jo(e,s):"array-contains-any"===t?new To(e,s):new ho(e,t,s)}static createKeyFieldInFilter(e,t,s){return"in"===t?new bo(e,s):new wo(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(qa(t,this.value)):null!==t&&Va(this.value)===Va(t)&&this.matchesComparison(qa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ui(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class po extends uo{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new po(e,t)}matches(e){return mo(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function mo(e){return"and"===e.op}function fo(e){return function(e){for(const t of e.filters)if(t instanceof po)return!1;return!0}(e)&&mo(e)}function go(e){if(e instanceof ho)return e.field.canonicalString()+e.op.toString()+Wa(e.value);if(fo(e))return e.filters.map(e=>go(e)).join(",");{const t=e.filters.map(e=>go(e)).join(",");return`${e.op}(${t})`}}function yo(e,t){return e instanceof ho?(s=e,(n=t)instanceof ho&&s.op===n.op&&s.field.isEqual(n.field)&&Ba(s.value,n.value)):e instanceof po?function(e,t){return t instanceof po&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,s,n)=>e&&yo(s,t.filters[n]),!0)}(e,t):void ui(19439);var s,n}function xo(e){return e instanceof ho?`${(t=e).field.canonicalString()} ${t.op} ${Wa(t.value)}`:e instanceof po?function(e){return e.op.toString()+" {"+e.getFilters().map(xo).join(" ,")+"}"}(e):"Filter";var t}class vo extends ho{constructor(e,t,s){super(e,t,s),this.key=Fi.fromName(s.referenceValue)}matches(e){const t=Fi.comparator(e.key,this.key);return this.matchesComparison(t)}}class bo extends ho{constructor(e,t){super(e,"in",t),this.keys=No("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class wo extends ho{constructor(e,t){super(e,"not-in",t),this.keys=No("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function No(e,t){return(t.arrayValue?.values||[]).map(e=>Fi.fromName(e.referenceValue))}class So extends ho{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Xa(t)&&za(t.arrayValue,this.value)}}class Eo extends ho{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&za(this.value.arrayValue,t)}}class jo extends ho{constructor(e,t){super(e,"not-in",t)}matches(e){if(za(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!za(this.value.arrayValue,t)}}class To extends ho{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Xa(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>za(this.value.arrayValue,e))}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,t=null,s=[],n=[],r=null,i=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=n,this.limit=r,this.startAt=i,this.endAt=a,this.Te=null}}function Io(e,t=null,s=[],n=[],r=null,i=null,a=null){return new _o(e,t,s,n,r,i,a)}function Co(e){const t=mi(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>go(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>{return(t=e).field.canonicalString()+t.dir;var t}).join(","),aa(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Wa(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Wa(e)).join(",")),t.Te=e}return t.Te}function ko(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let s=0;s<e.orderBy.length;s++)if(!co(e.orderBy[s],t.orderBy[s]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let s=0;s<e.filters.length;s++)if(!yo(e.filters[s],t.filters[s]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!oo(e.startAt,t.startAt)&&oo(e.endAt,t.endAt)}function Ao(e){return Fi.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,t=null,s=[],n=[],r=null,i="F",a=null,o=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=n,this.limit=r,this.limitType=i,this.startAt=a,this.endAt=o,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Oo(e){return new Po(e)}function Ro(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Lo(e){return null!==e.collectionGroup}function Mo(e){const t=mi(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const n of t.explicitOrderBy)t.Ie.push(n),e.add(n.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(e){let t=new ga(Ui.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t})(t).forEach(n=>{e.has(n.canonicalString())||n.isKeyField()||t.Ie.push(new lo(n,s))}),e.has(Ui.keyField().canonicalString())||t.Ie.push(new lo(Ui.keyField(),s))}return t.Ie}function Do(e){const t=mi(e);return t.Ee||(t.Ee=function(e,t){if("F"===e.limitType)return Io(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new lo(e.field,t)});const s=e.endAt?new io(e.endAt.position,e.endAt.inclusive):null,n=e.startAt?new io(e.startAt.position,e.startAt.inclusive):null;return Io(e.path,e.collectionGroup,t,e.filters,e.limit,s,n)}}(t,Mo(e))),t.Ee}function Uo(e,t){const s=e.filters.concat([t]);return new Po(e.path,e.collectionGroup,e.explicitOrderBy.slice(),s,e.limit,e.limitType,e.startAt,e.endAt)}function Fo(e,t,s){return new Po(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,s,e.startAt,e.endAt)}function Vo(e,t){return ko(Do(e),Do(t))&&e.limitType===t.limitType}function Bo(e){return`${Co(Do(e))}|lt:${e.limitType}`}function zo(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>xo(e)).join(", ")}]`),aa(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>{return`${(t=e).field.canonicalString()} (${t.dir})`;var t}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Wa(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Wa(e)).join(",")),`Target(${t})`}(Do(e))}; limitType=${e.limitType})`}function qo(e,t){return t.isFoundDocument()&&function(e,t){const s=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(s):Fi.isDocumentKey(e.path)?e.path.isEqual(s):e.path.isImmediateParentOf(s)}(e,t)&&function(e,t){for(const s of Mo(e))if(!s.field.isKeyField()&&null===t.data.field(s.field))return!1;return!0}(e,t)&&function(e,t){for(const s of e.filters)if(!s.matches(t))return!1;return!0}(e,t)&&(n=t,!((s=e).startAt&&!function(e,t,s){const n=ao(e,t,s);return e.inclusive?n<=0:n<0}(s.startAt,Mo(s),n)||s.endAt&&!function(e,t,s){const n=ao(e,t,s);return e.inclusive?n>=0:n>0}(s.endAt,Mo(s),n)));var s,n}function $o(e){return(t,s)=>{let n=!1;for(const r of Mo(e)){const e=Ho(r,t,s);if(0!==e)return e;n=n||r.field.isKeyField()}return 0}}function Ho(e,t,s){const n=e.field.isKeyField()?Fi.comparator(t.key,s.key):function(e,t,s){const n=t.data.field(e),r=s.data.field(e);return null!==n&&null!==r?qa(n,r):ui(42886)}(e.field,t,s);switch(e.dir){case"asc":return n;case"desc":return-1*n;default:return ui(19790,{direction:e.dir})}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[n,r]of s)if(this.equalsFn(n,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),n=this.inner[s];if(void 0===n)return this.inner[s]=[[e,t]],void this.innerSize++;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return void(n[r]=[e,t]);n.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let n=0;n<s.length;n++)if(this.equalsFn(s[n][0],e))return 1===s.length?delete this.inner[t]:s.splice(n,1),this.innerSize--,!0;return!1}forEach(e){ua(this.inner,(t,s)=>{for(const[n,r]of s)e(n,r)})}isEmpty(){return ha(this.inner)}size(){return this.innerSize}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go=new pa(Fi.comparator);function Ko(){return Go}const Yo=new pa(Fi.comparator);function Qo(...e){let t=Yo;for(const s of e)t=t.insert(s.key,s);return t}function Xo(e){let t=Yo;return e.forEach((e,s)=>t=t.insert(e,s.overlayedDocument)),t}function Jo(){return el()}function Zo(){return el()}function el(){return new Wo(e=>e.toString(),(e,t)=>e.isEqual(t))}const tl=new pa(Fi.comparator),sl=new ga(Fi.comparator);function nl(...e){let t=sl;for(const s of e)t=t.add(s);return t}const rl=new ga(Ii);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function il(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:oa(t)?"-0":t}}function al(e){return{integerValue:""+e}}function ol(e,t){return function(e){return"number"==typeof e&&Number.isInteger(e)&&!oa(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)?al(t):il(e,t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(){this._=void 0}}function cl(e,t,s){return e instanceof hl?function(e,t){const s={fields:{[Ta]:{stringValue:ja},[Ia]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Ca(t)&&(t=ka(t)),t&&(s.fields[_a]=t),{mapValue:s}}(s,t):e instanceof pl?ml(e,t):e instanceof fl?gl(e,t):function(e,t){const s=ul(e,t),n=xl(s)+xl(e.Ae);return Qa(s)&&Qa(e.Ae)?al(n):il(e.serializer,n)}(e,t)}function dl(e,t,s){return e instanceof pl?ml(e,t):e instanceof fl?gl(e,t):s}function ul(e,t){return e instanceof yl?Qa(s=t)||(n=s)&&"doubleValue"in n?t:{integerValue:0}:null;var s,n}class hl extends ll{}class pl extends ll{constructor(e){super(),this.elements=e}}function ml(e,t){const s=vl(t);for(const n of e.elements)s.some(e=>Ba(e,n))||s.push(n);return{arrayValue:{values:s}}}class fl extends ll{constructor(e){super(),this.elements=e}}function gl(e,t){let s=vl(t);for(const n of e.elements)s=s.filter(e=>!Ba(e,n));return{arrayValue:{values:s}}}class yl extends ll{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function xl(e){return Sa(e.integerValue||e.doubleValue)}function vl(e){return Xa(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(e,t){this.field=e,this.transform=t}}class wl{constructor(e,t){this.version=e,this.transformResults=t}}class Nl{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Nl}static exists(e){return new Nl(void 0,e)}static updateTime(e){return new Nl(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Sl(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class El{}function jl(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Ll(e.key,Nl.none()):new kl(e.key,e.data,Nl.none());{const s=e.data,n=so.empty();let r=new ga(Ui.comparator);for(let e of t.fields)if(!r.has(e)){let t=s.field(e);null===t&&e.length>1&&(e=e.popLast(),t=s.field(e)),null===t?n.delete(e):n.set(e,t),r=r.add(e)}return new Al(e.key,n,new xa(r.toArray()),Nl.none())}}function Tl(e,t,s){var n;e instanceof kl?function(e,t,s){const n=e.value.clone(),r=Ol(e.fieldTransforms,t,s.transformResults);n.setAll(r),t.convertToFoundDocument(s.version,n).setHasCommittedMutations()}(e,t,s):e instanceof Al?function(e,t,s){if(!Sl(e.precondition,t))return void t.convertToUnknownDocument(s.version);const n=Ol(e.fieldTransforms,t,s.transformResults),r=t.data;r.setAll(Pl(e)),r.setAll(n),t.convertToFoundDocument(s.version,r).setHasCommittedMutations()}(e,t,s):(n=s,t.convertToNoDocument(n.version).setHasCommittedMutations())}function _l(e,t,s,n){return e instanceof kl?function(e,t,s,n){if(!Sl(e.precondition,t))return s;const r=e.value.clone(),i=Rl(e.fieldTransforms,n,t);return r.setAll(i),t.convertToFoundDocument(t.version,r).setHasLocalMutations(),null}(e,t,s,n):e instanceof Al?function(e,t,s,n){if(!Sl(e.precondition,t))return s;const r=Rl(e.fieldTransforms,n,t),i=t.data;return i.setAll(Pl(e)),i.setAll(r),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===s?null:s.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,s,n):(r=t,i=s,Sl(e.precondition,r)?(r.convertToNoDocument(r.version).setHasLocalMutations(),null):i);var r,i}function Il(e,t){let s=null;for(const n of e.fieldTransforms){const e=t.data.field(n.field),r=ul(n.transform,e||null);null!=r&&(null===s&&(s=so.empty()),s.set(n.field,r))}return s||null}function Cl(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(s=e.fieldTransforms,n=t.fieldTransforms,!!(void 0===s&&void 0===n||s&&n&&Oi(s,n,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&(s=e.transform,n=t.transform,s instanceof pl&&n instanceof pl||s instanceof fl&&n instanceof fl?Oi(s.elements,n.elements,Ba):s instanceof yl&&n instanceof yl?Ba(s.Ae,n.Ae):s instanceof hl&&n instanceof hl);var s,n}(e,t)))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask)));var s,n}class kl extends El{constructor(e,t,s,n=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=n,this.type=0}getFieldMask(){return null}}class Al extends El{constructor(e,t,s,n,r=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=n,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function Pl(e){const t=new Map;return e.fieldMask.fields.forEach(s=>{if(!s.isEmpty()){const n=e.data.field(s);t.set(s,n)}}),t}function Ol(e,t,s){const n=new Map;pi(e.length===s.length,32656,{Re:s.length,Ve:e.length});for(let r=0;r<s.length;r++){const i=e[r],a=i.transform,o=t.data.field(i.field);n.set(i.field,dl(a,o,s[r]))}return n}function Rl(e,t,s){const n=new Map;for(const r of e){const e=r.transform,i=s.data.field(r.field);n.set(r.field,cl(e,i,t))}return n}class Ll extends El{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ml extends El{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e,t,s,n){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=n}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let n=0;n<this.mutations.length;n++){const t=this.mutations[n];t.key.isEqual(e.key)&&Tl(t,e,s[n])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=_l(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=_l(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Zo();return this.mutations.forEach(n=>{const r=e.get(n.key),i=r.overlayedDocument;let a=this.applyToLocalView(i,r.mutatedFields);a=t.has(n.key)?null:a;const o=jl(i,a);null!==o&&s.set(n.key,o),i.isValidDocument()||i.convertToNoDocument(Xi.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),nl())}isEqual(e){return this.batchId===e.batchId&&Oi(this.mutations,e.mutations,(e,t)=>Cl(e,t))&&Oi(this.baseMutations,e.baseMutations,(e,t)=>Cl(e,t))}}class Ul{constructor(e,t,s,n){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=n}static from(e,t,s){pi(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let n=function(){return tl}();const r=e.mutations;for(let i=0;i<r.length;i++)n=n.insert(r[i].key,s[i].version);return new Ul(e,t,s,n)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e,t){this.count=e,this.unchangedNames=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bl,zl;function ql(e){if(void 0===e)return li("GRPC error has no .code"),fi.UNKNOWN;switch(e){case Bl.OK:return fi.OK;case Bl.CANCELLED:return fi.CANCELLED;case Bl.UNKNOWN:return fi.UNKNOWN;case Bl.DEADLINE_EXCEEDED:return fi.DEADLINE_EXCEEDED;case Bl.RESOURCE_EXHAUSTED:return fi.RESOURCE_EXHAUSTED;case Bl.INTERNAL:return fi.INTERNAL;case Bl.UNAVAILABLE:return fi.UNAVAILABLE;case Bl.UNAUTHENTICATED:return fi.UNAUTHENTICATED;case Bl.INVALID_ARGUMENT:return fi.INVALID_ARGUMENT;case Bl.NOT_FOUND:return fi.NOT_FOUND;case Bl.ALREADY_EXISTS:return fi.ALREADY_EXISTS;case Bl.PERMISSION_DENIED:return fi.PERMISSION_DENIED;case Bl.FAILED_PRECONDITION:return fi.FAILED_PRECONDITION;case Bl.ABORTED:return fi.ABORTED;case Bl.OUT_OF_RANGE:return fi.OUT_OF_RANGE;case Bl.UNIMPLEMENTED:return fi.UNIMPLEMENTED;case Bl.DATA_LOSS:return fi.DATA_LOSS;default:return ui(39323,{code:e})}}(zl=Bl||(Bl={}))[zl.OK=0]="OK",zl[zl.CANCELLED=1]="CANCELLED",zl[zl.UNKNOWN=2]="UNKNOWN",zl[zl.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zl[zl.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zl[zl.NOT_FOUND=5]="NOT_FOUND",zl[zl.ALREADY_EXISTS=6]="ALREADY_EXISTS",zl[zl.PERMISSION_DENIED=7]="PERMISSION_DENIED",zl[zl.UNAUTHENTICATED=16]="UNAUTHENTICATED",zl[zl.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zl[zl.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zl[zl.ABORTED=10]="ABORTED",zl[zl.OUT_OF_RANGE=11]="OUT_OF_RANGE",zl[zl.UNIMPLEMENTED=12]="UNIMPLEMENTED",zl[zl.INTERNAL=13]="INTERNAL",zl[zl.UNAVAILABLE=14]="UNAVAILABLE",zl[zl.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const $l=new qr([4294967295,4294967295],0);function Hl(e){const t=(new TextEncoder).encode(e),s=new $r;return s.update(t),new Uint8Array(s.digest())}function Wl(e){const t=new DataView(e.buffer),s=t.getUint32(0,!0),n=t.getUint32(4,!0),r=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new qr([s,n],0),new qr([r,i],0)]}class Gl{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Kl(`Invalid padding: ${t}`);if(s<0)throw new Kl(`Invalid hash count: ${s}`);if(e.length>0&&0===this.hashCount)throw new Kl(`Invalid hash count: ${s}`);if(0===e.length&&0!==t)throw new Kl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=qr.fromNumber(this.ge)}ye(e,t,s){let n=e.add(t.multiply(qr.fromNumber(s)));return 1===n.compare($l)&&(n=new qr([n.getBits(0),n.getBits(1)],0)),n.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=Hl(e),[s,n]=Wl(t);for(let r=0;r<this.hashCount;r++){const e=this.ye(s,n,r);if(!this.we(e))return!1}return!0}static create(e,t,s){const n=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),i=new Gl(r,n,t);return s.forEach(e=>i.insert(e)),i}insert(e){if(0===this.ge)return;const t=Hl(e),[s,n]=Wl(t);for(let r=0;r<this.hashCount;r++){const e=this.ye(s,n,r);this.Se(e)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Kl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,t,s,n,r){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=n,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const n=new Map;return n.set(e,Ql.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Yl(Xi.min(),n,new pa(Ii),Ko(),nl())}}class Ql{constructor(e,t,s,n,r){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=n,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Ql(s,t,nl(),nl(),nl())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e,t,s,n){this.be=e,this.removedTargetIds=t,this.key=s,this.De=n}}class Jl{constructor(e,t){this.targetId=e,this.Ce=t}}class Zl{constructor(e,t,s=ba.EMPTY_BYTE_STRING,n=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=n}}class ec{constructor(){this.ve=0,this.Fe=nc(),this.Me=ba.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=nl(),t=nl(),s=nl();return this.Fe.forEach((n,r)=>{switch(r){case 0:e=e.add(n);break;case 2:t=t.add(n);break;case 1:s=s.add(n);break;default:ui(38017,{changeType:r})}}),new Ql(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=nc()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,pi(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class tc{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ko(),this.Je=sc(),this.He=sc(),this.Ye=new pa(Ii)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:ui(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,s)=>{this.rt(s)&&t(s)})}st(e){const t=e.targetId,s=e.Ce.count,n=this.ot(t);if(n){const r=n.target;if(Ao(r))if(0===s){const e=new Fi(r.path);this.et(t,e,ro.newNoDocument(e,Xi.min()))}else pi(1===s,20013,{expectedCount:s});else{const n=this._t(t);if(n!==s){const s=this.ut(e),r=s?this.ct(s,e,n):1;if(0!==r){this.it(t);const e=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:n=0},hashCount:r=0}=t;let i,a;try{i=Ea(s).toUint8Array()}catch(o){if(o instanceof va)return ci("Decoding the base64 bloom filter in existence filter failed ("+o.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw o}try{a=new Gl(i,n,r)}catch(o){return ci(o instanceof Kl?"BloomFilter error: ":"Applying bloom filter failed: ",o),null}return 0===a.ge?null:a}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let n=0;return s.forEach(s=>{const r=this.Ge.ht(),i=`projects/${r.projectId}/databases/${r.database}/documents/${s.path.canonicalString()}`;e.mightContain(i)||(this.et(t,s,null),n++)}),n}Tt(e){const t=new Map;this.ze.forEach((s,n)=>{const r=this.ot(n);if(r){if(s.current&&Ao(r.target)){const t=new Fi(r.target.path);this.It(t).has(n)||this.Et(n,t)||this.et(n,t,ro.newNoDocument(t,e))}s.Be&&(t.set(n,s.ke()),s.qe())}});let s=nl();this.He.forEach((e,t)=>{let n=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(n=!1,!1)}),n&&(s=s.add(e))}),this.je.forEach((t,s)=>s.setReadTime(e));const n=new Yl(e,t,this.Ye,this.je,s);return this.je=Ko(),this.Je=sc(),this.He=sc(),this.Ye=new pa(Ii),n}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const n=this.nt(e);this.Et(e,t)?n.Qe(t,1):n.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new ec,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new ga(Ii),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new ga(Ii),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||oi("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ec),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function sc(){return new pa(Fi.comparator)}function nc(){return new pa(Fi.comparator)}const rc=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),ic=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),ac=(()=>({and:"AND",or:"OR"}))();class oc{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function lc(e,t){return e.useProto3Json||aa(t)?t:{value:t}}function cc(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function dc(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function uc(e,t){return cc(e,t.toTimestamp())}function hc(e){return pi(!!e,49232),Xi.fromTimestamp(function(e){const t=Na(e);return new Qi(t.seconds,t.nanos)}(e))}function pc(e,t){return mc(e,t).canonicalString()}function mc(e,t){const s=(n=e,new Mi(["projects",n.projectId,"databases",n.database])).child("documents");var n;return void 0===t?s:s.child(t)}function fc(e){const t=Mi.fromString(e);return pi(Oc(t),10190,{key:t.toString()}),t}function gc(e,t){return pc(e.databaseId,t.path)}function yc(e,t){const s=fc(t);if(s.get(1)!==e.databaseId.projectId)throw new gi(fi.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+e.databaseId.projectId);if(s.get(3)!==e.databaseId.database)throw new gi(fi.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+e.databaseId.database);return new Fi(bc(s))}function xc(e,t){return pc(e.databaseId,t)}function vc(e){return new Mi(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function bc(e){return pi(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function wc(e,t,s){return{name:gc(e,t),fields:s.value.mapValue.fields}}function Nc(e,t){return{documents:[xc(e,t.path)]}}function Sc(e,t){const s={structuredQuery:{}},n=t.path;let r;null!==t.collectionGroup?(r=n,s.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=n.popLast(),s.structuredQuery.from=[{collectionId:n.lastSegment()}]),s.parent=xc(e,r);const i=function(e){if(0!==e.length)return Ac(po.create(e,"and"))}(t.filters);i&&(s.structuredQuery.where=i);const a=function(e){if(0!==e.length)return e.map(e=>{return{field:Cc((t=e).field),direction:Tc(t.dir)};var t})}(t.orderBy);a&&(s.structuredQuery.orderBy=a);const o=lc(e,t.limit);return null!==o&&(s.structuredQuery.limit=o),t.startAt&&(s.structuredQuery.startAt={before:(l=t.startAt).inclusive,values:l.position}),t.endAt&&(s.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:s,parent:r};var l}function Ec(e){let t=function(e){const t=fc(e);return 4===t.length?Mi.emptyPath():bc(t)}(e.parent);const s=e.structuredQuery,n=s.from?s.from.length:0;let r=null;if(n>0){pi(1===n,65062);const e=s.from[0];e.allDescendants?r=e.collectionId:t=t.child(e.collectionId)}let i=[];s.where&&(i=function(e){const t=jc(e);return t instanceof po&&fo(t)?t.getFilters():[t]}(s.where));let a=[];s.orderBy&&(a=s.orderBy.map(e=>{return new lo(kc((t=e).field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction));var t}));let o=null;s.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,aa(t)?null:t}(s.limit));let l=null;s.startAt&&(l=function(e){const t=!!e.before,s=e.values||[];return new io(s,t)}(s.startAt));let c=null;return s.endAt&&(c=function(e){const t=!e.before,s=e.values||[];return new io(s,t)}(s.endAt)),function(e,t,s,n,r,i,a,o){return new Po(e,t,s,n,r,i,a,o)}(t,r,a,i,o,"F",l,c)}function jc(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=kc(e.unaryFilter.field);return ho.create(t,"==",{doubleValue:NaN});case"IS_NULL":const s=kc(e.unaryFilter.field);return ho.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const n=kc(e.unaryFilter.field);return ho.create(n,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=kc(e.unaryFilter.field);return ho.create(r,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ui(61313);default:return ui(60726)}}(e):void 0!==e.fieldFilter?(t=e,ho.create(kc(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ui(58110);default:return ui(50506)}}(t.fieldFilter.op),t.fieldFilter.value)):void 0!==e.compositeFilter?function(e){return po.create(e.compositeFilter.filters.map(e=>jc(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return ui(1026)}}(e.compositeFilter.op))}(e):ui(30097,{filter:e});var t}function Tc(e){return rc[e]}function _c(e){return ic[e]}function Ic(e){return ac[e]}function Cc(e){return{fieldPath:e.canonicalString()}}function kc(e){return Ui.fromServerFormat(e.fieldPath)}function Ac(e){return e instanceof ho?function(e){if("=="===e.op){if(Za(e.value))return{unaryFilter:{field:Cc(e.field),op:"IS_NAN"}};if(Ja(e.value))return{unaryFilter:{field:Cc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Za(e.value))return{unaryFilter:{field:Cc(e.field),op:"IS_NOT_NAN"}};if(Ja(e.value))return{unaryFilter:{field:Cc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Cc(e.field),op:_c(e.op),value:e.value}}}(e):e instanceof po?function(e){const t=e.getFilters().map(e=>Ac(e));return 1===t.length?t[0]:{compositeFilter:{op:Ic(e.op),filters:t}}}(e):ui(54877,{filter:e})}function Pc(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Oc(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,t,s,n,r=Xi.min(),i=Xi.min(),a=ba.EMPTY_BYTE_STRING,o=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=n,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new Rc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Rc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Rc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Rc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e){this.yt=e}}function Mc(e){const t=Ec({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Fo(t,t.limit,"L"):t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(){this.Cn=new Uc}addToCollectionParentIndex(e,t){return this.Cn.add(t),na.resolve()}getCollectionParents(e,t){return na.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return na.resolve()}deleteFieldIndex(e,t){return na.resolve()}deleteAllFieldIndexes(e){return na.resolve()}createTargetIndexes(e,t){return na.resolve()}getDocumentsMatchingTarget(e,t){return na.resolve(null)}getIndexType(e,t){return na.resolve(0)}getFieldIndexes(e,t){return na.resolve([])}getNextCollectionGroupToUpdate(e){return na.resolve(null)}getMinOffset(e,t){return na.resolve(Zi.min())}getMinOffsetFromCollectionGroup(e,t){return na.resolve(Zi.min())}updateCollectionGroup(e,t,s){return na.resolve()}updateIndexEntries(e,t){return na.resolve()}}class Uc{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),n=this.index[t]||new ga(Mi.comparator),r=!n.has(s);return this.index[t]=n.add(s),r}has(e){const t=e.lastSegment(),s=e.popLast(),n=this.index[t];return n&&n.has(s)}getEntries(e){return(this.index[e]||new ga(Mi.comparator)).toArray()}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Vc=41943040;class Bc{static withCacheSize(e){return new Bc(e,Bc.DEFAULT_COLLECTION_PERCENTILE,Bc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bc.DEFAULT_COLLECTION_PERCENTILE=10,Bc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bc.DEFAULT=new Bc(Vc,Bc.DEFAULT_COLLECTION_PERCENTILE,Bc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bc.DISABLED=new Bc(-1,0,0);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class zc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new zc(0)}static cr(){return new zc(-1)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qc="LruGarbageCollector";function $c([e,t],[s,n]){const r=Ii(e,s);return 0===r?Ii(t,n):r}class Hc{constructor(e){this.Ir=e,this.buffer=new ga($c),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();$c(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Wc{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){oi(qc,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){ra(e)?oi(qc,"Ignoring IndexedDB error during garbage collection: ",e):await sa(e)}await this.Vr(3e5)})}}class Gc{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return na.resolve(ia.ce);const s=new Hc(t);return this.mr.forEachTarget(e,e=>s.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>s.Ar(e))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(oi("LruGarbageCollector","Garbage collection skipped; disabled"),na.resolve(Fc)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(oi("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Fc):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,n,r,i,a,o,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(oi("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),n=this.params.maximumSequenceNumbersToCollect):n=t,i=Date.now(),this.nthSequenceNumber(e,n))).next(n=>(s=n,a=Date.now(),this.removeTargets(e,s,t))).next(t=>(r=t,o=Date.now(),this.removeOrphanedDocuments(e,s))).next(e=>(l=Date.now(),ai()<=de.DEBUG&&oi("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${i-c}ms\n\tDetermined least recently used ${n} in `+(a-i)+`ms\n\tRemoved ${r} targets in `+(o-a)+`ms\n\tRemoved ${e} documents in `+(l-o)+`ms\nTotal Duration: ${l-c}ms`),na.resolve({didRun:!0,sequenceNumbersCollected:n,targetsRemoved:r,documentsRemoved:e})))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Kc{constructor(){this.changes=new Wo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ro.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?na.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,t,s,n){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=n}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(n=>(s=n,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==s&&_l(s.mutation,e,xa.empty(),Qi.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,nl()).next(()=>t))}getLocalViewOfDocuments(e,t,s=nl()){const n=Jo();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,s).next(e=>{let t=Qo();return e.forEach((e,s)=>{t=t.insert(e,s.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const s=Jo();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,nl()))}populateOverlays(e,t,s){const n=[];return s.forEach(e=>{t.has(e)||n.push(e)}),this.documentOverlayCache.getOverlays(e,n).next(e=>{e.forEach((e,s)=>{t.set(e,s)})})}computeViews(e,t,s,n){let r=Ko();const i=el(),a=el();return t.forEach((e,t)=>{const a=s.get(t.key);n.has(t.key)&&(void 0===a||a.mutation instanceof Al)?r=r.insert(t.key,t):void 0!==a?(i.set(t.key,a.mutation.getFieldMask()),_l(a.mutation,t,a.mutation.getFieldMask(),Qi.now())):i.set(t.key,xa.empty())}),this.recalculateAndSaveOverlays(e,r).next(e=>(e.forEach((e,t)=>i.set(e,t)),t.forEach((e,t)=>a.set(e,new Yc(t,i.get(e)??null))),a))}recalculateAndSaveOverlays(e,t){const s=el();let n=new pa((e,t)=>e-t),r=nl();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const r of e)r.keys().forEach(e=>{const i=t.get(e);if(null===i)return;let a=s.get(e)||xa.empty();a=r.applyToLocalView(i,a),s.set(e,a);const o=(n.get(r.batchId)||nl()).add(e);n=n.insert(r.batchId,o)})}).next(()=>{const i=[],a=n.getReverseIterator();for(;a.hasNext();){const n=a.getNext(),o=n.key,l=n.value,c=Zo();l.forEach(e=>{if(!r.has(e)){const n=jl(t.get(e),s.get(e));null!==n&&c.set(e,n),r=r.add(e)}}),i.push(this.documentOverlayCache.saveOverlays(e,o,c))}return na.waitFor(i)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,s,n){return r=t,Fi.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Lo(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,n):this.getDocumentsMatchingCollectionQuery(e,t,s,n);var r}getNextDocuments(e,t,s,n){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,n).next(r=>{const i=n-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,n-r.size):na.resolve(Jo());let a=-1,o=r;return i.next(t=>na.forEach(t,(t,s)=>(a<s.largestBatchId&&(a=s.largestBatchId),r.get(t)?na.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,r)).next(()=>this.computeViews(e,o,t,nl())).next(e=>({batchId:a,changes:Xo(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Fi(t)).next(e=>{let t=Qo();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,s,n){const r=t.collectionGroup;let i=Qo();return this.indexManager.getCollectionParents(e,r).next(a=>na.forEach(a,a=>{const o=(l=t,c=a.child(r),new Po(c,null,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt));var l,c;return this.getDocumentsMatchingCollectionQuery(e,o,s,n).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,s,n){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(i=>(r=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,r,n))).next(e=>{r.forEach((t,s)=>{const n=s.getKey();null===e.get(n)&&(e=e.insert(n,ro.newInvalidDocument(n)))});let s=Qo();return e.forEach((e,n)=>{const i=r.get(e);void 0!==i&&_l(i.mutation,n,xa.empty(),Qi.now()),qo(t,n)&&(s=s.insert(e,n))}),s})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return na.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,{id:(s=t).id,version:s.version,createTime:hc(s.createTime)}),na.resolve();var s}getNamedQuery(e,t){return na.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,{name:(s=t).name,query:Mc(s.bundledQuery),readTime:hc(s.readTime)}),na.resolve();var s}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(){this.overlays=new pa(Fi.comparator),this.qr=new Map}getOverlay(e,t){return na.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Jo();return na.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&s.set(t,e)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((s,n)=>{this.St(e,t,n)}),na.resolve()}removeOverlaysForBatchId(e,t,s){const n=this.qr.get(s);return void 0!==n&&(n.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(s)),na.resolve()}getOverlaysForCollection(e,t,s){const n=Jo(),r=t.length+1,i=new Fi(t.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const e=a.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===r&&e.largestBatchId>s&&n.set(e.getKey(),e)}return na.resolve(n)}getOverlaysForCollectionGroup(e,t,s,n){let r=new pa((e,t)=>e-t);const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>s){let t=r.get(e.largestBatchId);null===t&&(t=Jo(),r=r.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=Jo(),o=r.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=n)););return na.resolve(a)}St(e,t,s){const n=this.overlays.get(s.key);if(null!==n){const e=this.qr.get(n.largestBatchId).delete(s.key);this.qr.set(n.largestBatchId,e)}this.overlays=this.overlays.insert(s.key,new Fl(t,s));let r=this.qr.get(t);void 0===r&&(r=nl(),this.qr.set(t,r)),this.qr.set(t,r.add(s.key))}}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(){this.sessionToken=ba.EMPTY_BYTE_STRING}getSessionToken(e){return na.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,na.resolve()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(){this.Qr=new ga(td.$r),this.Ur=new ga(td.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new td(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new td(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new Fi(new Mi([])),s=new td(t,e),n=new td(t,e+1),r=[];return this.Ur.forEachInRange([s,n],e=>{this.Gr(e),r.push(e.key)}),r}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Fi(new Mi([])),s=new td(t,e),n=new td(t,e+1);let r=nl();return this.Ur.forEachInRange([s,n],e=>{r=r.add(e.key)}),r}containsKey(e){const t=new td(e,0),s=this.Qr.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class td{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Fi.comparator(e.key,t.key)||Ii(e.Yr,t.Yr)}static Kr(e,t){return Ii(e.Yr,t.Yr)||Fi.comparator(e.key,t.key)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new ga(td.$r)}checkEmpty(e){return na.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,s,n){const r=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Dl(r,t,s,n);this.mutationQueue.push(i);for(const a of n)this.Zr=this.Zr.add(new td(a.key,r)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return na.resolve(i)}lookupMutationBatch(e,t){return na.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,n=this.ei(s),r=n<0?0:n;return na.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return na.resolve(0===this.mutationQueue.length?-1:this.tr-1)}getAllMutationBatches(e){return na.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new td(t,0),n=new td(t,Number.POSITIVE_INFINITY),r=[];return this.Zr.forEachInRange([s,n],e=>{const t=this.Xr(e.Yr);r.push(t)}),na.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new ga(Ii);return t.forEach(e=>{const t=new td(e,0),n=new td(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,n],e=>{s=s.add(e.Yr)})}),na.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,n=s.length+1;let r=s;Fi.isDocumentKey(r)||(r=r.child(""));const i=new td(new Fi(r),0);let a=new ga(Ii);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!s.isPrefixOf(t)&&(t.length===n&&(a=a.add(e.Yr)),!0)},i),na.resolve(this.ti(a))}ti(e){const t=[];return e.forEach(e=>{const s=this.Xr(e);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){pi(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let s=this.Zr;return na.forEach(t.mutations,n=>{const r=new td(n.key,t.batchId);return s=s.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,n.key)}).next(()=>{this.Zr=s})}ir(e){}containsKey(e,t){const s=new td(t,0),n=this.Zr.firstAfterOrEqual(s);return na.resolve(t.isEqual(n&&n.key))}performConsistencyCheck(e){return this.mutationQueue.length,na.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e){this.ri=e,this.docs=new pa(Fi.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,n=this.docs.get(s),r=n?n.size:0,i=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:i}),this.size+=i-r,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return na.resolve(s?s.document.mutableCopy():ro.newInvalidDocument(t))}getEntries(e,t){let s=Ko();return t.forEach(e=>{const t=this.docs.get(e);s=s.insert(e,t?t.document.mutableCopy():ro.newInvalidDocument(e))}),na.resolve(s)}getDocumentsMatchingQuery(e,t,s,n){let r=Ko();const i=t.path,a=new Fi(i.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||ea(Ji(a),s)<=0||(n.has(a.key)||qo(t,a))&&(r=r.insert(a.key,a.mutableCopy()))}return na.resolve(r)}getAllFromCollectionGroup(e,t,s,n){ui(9500)}ii(e,t){return na.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new rd(this)}getSize(e){return na.resolve(this.size)}}class rd extends Kc{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((s,n)=>{n.isValidDocument()?t.push(this.Nr.addEntry(e,n)):this.Nr.removeEntry(s)}),na.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e){this.persistence=e,this.si=new Wo(e=>Co(e),ko),this.lastRemoteSnapshotVersion=Xi.min(),this.highestTargetId=0,this.oi=0,this._i=new ed,this.targetCount=0,this.ai=zc.ur()}forEachTarget(e,t){return this.si.forEach((e,s)=>t(s)),na.resolve()}getLastRemoteSnapshotVersion(e){return na.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return na.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),na.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),na.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new zc(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,na.resolve()}updateTargetData(e,t){return this.Pr(t),na.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,na.resolve()}removeTargets(e,t,s){let n=0;const r=[];return this.si.forEach((i,a)=>{a.sequenceNumber<=t&&null===s.get(a.targetId)&&(this.si.delete(i),r.push(this.removeMatchingKeysForTargetId(e,a.targetId)),n++)}),na.waitFor(r).next(()=>n)}getTargetCount(e){return na.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return na.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),na.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const n=this.persistence.referenceDelegate,r=[];return n&&t.forEach(t=>{r.push(n.markPotentiallyOrphaned(e,t))}),na.waitFor(r)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),na.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return na.resolve(s)}containsKey(e,t){return na.resolve(this._i.containsKey(t))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e,t){this.ui={},this.overlays={},this.ci=new ia(0),this.li=!1,this.li=!0,this.hi=new Zc,this.referenceDelegate=e(this),this.Pi=new id(this),this.indexManager=new Dc,this.remoteDocumentCache=new nd(e=>this.referenceDelegate.Ti(e)),this.serializer=new Lc(t),this.Ii=new Xc(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Jc,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new sd(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){oi("MemoryPersistence","Starting transaction:",e);const n=new od(this.ci.next());return this.referenceDelegate.Ei(),s(n).next(e=>this.referenceDelegate.di(n).next(()=>e)).toPromise().then(e=>(n.raiseOnCommittedEvent(),e))}Ai(e,t){return na.or(Object.values(this.ui).map(s=>()=>s.containsKey(e,t)))}}class od extends ta{constructor(e){super(),this.currentSequenceNumber=e}}class ld{constructor(e){this.persistence=e,this.Ri=new ed,this.Vi=null}static mi(e){return new ld(e)}get fi(){if(this.Vi)return this.Vi;throw ui(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),na.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),na.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),na.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>s.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return na.forEach(this.fi,s=>{const n=Fi.fromPath(s);return this.gi(e,n).next(e=>{e||t.removeEntry(n,Xi.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return na.or([()=>na.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class cd{constructor(e,t){this.persistence=e,this.pi=new Wo(e=>function(e){let t="";for(let s=0;s<e.length;s++)t.length>0&&(t=ca(t)),t=la(e.get(s),t);return ca(t)}(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=function(e,t){return new Gc(e,t)}(this,t)}static mi(e,t){return new cd(e,t)}Ei(){}di(e){return na.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return na.forEach(this.pi,(s,n)=>this.br(e,s,n).next(e=>e?na.resolve():t(n)))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const n=this.persistence.getRemoteDocumentCache(),r=n.newChangeBuffer();return n.ii(e,n=>this.br(e,n,t).next(e=>{e||(s++,r.removeEntry(n,Xi.min()))})).next(()=>r.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),na.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),na.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),na.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),na.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ka(e.data.value)),t}br(e,t,s){return na.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return na.resolve(void 0!==e&&e>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e,t,s,n){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=n}static As(e,t){let s=nl(),n=nl();for(const r of t.docChanges)switch(r.type){case 0:s=s.add(r.doc.key);break;case 1:n=n.add(r.doc.key)}return new dd(e,t.fromCache,s,n)}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=H()?8:function(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}(q())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,n){const r={result:null};return this.ys(e,t).next(e=>{r.result=e}).next(()=>{if(!r.result)return this.ws(e,t,n,s).next(e=>{r.result=e})}).next(()=>{if(r.result)return;const s=new ud;return this.Ss(e,t,s).next(n=>{if(r.result=n,this.Vs)return this.bs(e,t,s,n.size)})}).next(()=>r.result)}bs(e,t,s,n){return s.documentReadCount<this.fs?(ai()<=de.DEBUG&&oi("QueryEngine","SDK will not create cache indexes for query:",zo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),na.resolve()):(ai()<=de.DEBUG&&oi("QueryEngine","Query:",zo(t),"scans",s.documentReadCount,"local documents and returns",n,"documents as results."),s.documentReadCount>this.gs*n?(ai()<=de.DEBUG&&oi("QueryEngine","The SDK decides to create cache indexes for query:",zo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Do(t))):na.resolve())}ys(e,t){if(Ro(t))return na.resolve(null);let s=Do(t);return this.indexManager.getIndexType(e,s).next(n=>0===n?null:(null!==t.limit&&1===n&&(t=Fo(t,null,"F"),s=Do(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(n=>{const r=nl(...n);return this.ps.getDocuments(e,r).next(n=>this.indexManager.getMinOffset(e,s).next(s=>{const i=this.Ds(t,n);return this.Cs(t,i,r,s.readTime)?this.ys(e,Fo(t,null,"F")):this.vs(e,i,t,s)}))})))}ws(e,t,s,n){return Ro(t)||n.isEqual(Xi.min())?na.resolve(null):this.ps.getDocuments(e,s).next(r=>{const i=this.Ds(t,r);return this.Cs(t,i,s,n)?na.resolve(null):(ai()<=de.DEBUG&&oi("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),zo(t)),this.vs(e,i,t,function(e,t){const s=e.toTimestamp().seconds,n=e.toTimestamp().nanoseconds+1,r=Xi.fromTimestamp(1e9===n?new Qi(s+1,0):new Qi(s,n));return new Zi(r,Fi.empty(),t)}(n,-1)).next(e=>e))})}Ds(e,t){let s=new ga($o(e));return t.forEach((t,n)=>{qo(e,n)&&(s=s.add(n))}),s}Cs(e,t,s,n){if(null===e.limit)return!1;if(s.size!==t.size)return!0;const r="F"===e.limitType?t.last():t.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(n)>0)}Ss(e,t,s){return ai()<=de.DEBUG&&oi("QueryEngine","Using full collection scan to execute query:",zo(t)),this.ps.getDocumentsMatchingQuery(e,t,Zi.min(),s)}vs(e,t,s,n){return this.ps.getDocumentsMatchingQuery(e,s,n).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pd="LocalStore";class md{constructor(e,t,s,n){this.persistence=e,this.Fs=t,this.serializer=n,this.Ms=new pa(Ii),this.xs=new Wo(e=>Co(e),ko),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Qc(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}async function fd(e,t){const s=mi(e);return await s.persistence.runTransaction("Handle user change","readonly",e=>{let n;return s.mutationQueue.getAllMutationBatches(e).next(r=>(n=r,s.Bs(t),s.mutationQueue.getAllMutationBatches(e))).next(t=>{const r=[],i=[];let a=nl();for(const e of n){r.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return s.localDocuments.getDocuments(e,a).next(e=>({Ls:e,removedBatchIds:r,addedBatchIds:i}))})})}function gd(e){const t=mi(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function yd(e,t){const s=mi(e),n=t.snapshotVersion;let r=s.Ms;return s.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const i=s.Ns.newChangeBuffer({trackRemovals:!0});r=s.Ms;const a=[];t.targetChanges.forEach((i,o)=>{const l=r.get(o);if(!l)return;a.push(s.Pi.removeMatchingKeys(e,i.removedDocuments,o).next(()=>s.Pi.addMatchingKeys(e,i.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(ba.EMPTY_BYTE_STRING,Xi.min()).withLastLimboFreeSnapshotVersion(Xi.min()):i.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(i.resumeToken,n)),r=r.insert(o,c),function(e,t,s){if(0===e.resumeToken.approximateByteSize())return!0;if(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8)return!0;return s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size>0}(l,c,i)&&a.push(s.Pi.updateTargetData(e,c))});let o=Ko(),l=nl();if(t.documentUpdates.forEach(n=>{t.resolvedLimboDocuments.has(n)&&a.push(s.persistence.referenceDelegate.updateLimboDocument(e,n))}),a.push(function(e,t,s){let n=nl(),r=nl();return s.forEach(e=>n=n.add(e)),t.getEntries(e,n).next(e=>{let n=Ko();return s.forEach((s,i)=>{const a=e.get(s);i.isFoundDocument()!==a.isFoundDocument()&&(r=r.add(s)),i.isNoDocument()&&i.version.isEqual(Xi.min())?(t.removeEntry(s,i.readTime),n=n.insert(s,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),n=n.insert(s,i)):oi(pd,"Ignoring outdated watch update for ",s,". Current version:",a.version," Watch version:",i.version)}),{ks:n,qs:r}})}(e,i,t.documentUpdates).next(e=>{o=e.ks,l=e.qs})),!n.isEqual(Xi.min())){const t=s.Pi.getLastRemoteSnapshotVersion(e).next(t=>s.Pi.setTargetsMetadata(e,e.currentSequenceNumber,n));a.push(t)}return na.waitFor(a).next(()=>i.apply(e)).next(()=>s.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(s.Ms=r,e))}function xd(e,t){const s=mi(e);return s.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),s.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}async function vd(e,t,s){const n=mi(e),r=n.Ms.get(t),i=s?"readwrite":"readwrite-primary";try{s||await n.persistence.runTransaction("Release target",i,e=>n.persistence.referenceDelegate.removeTarget(e,r))}catch(a){if(!ra(a))throw a;oi(pd,`Failed to update sequence numbers for target ${t}: ${a}`)}n.Ms=n.Ms.remove(t),n.xs.delete(r.target)}function bd(e,t,s){const n=mi(e);let r=Xi.min(),i=nl();return n.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,s){const n=mi(e),r=n.xs.get(s);return void 0!==r?na.resolve(n.Ms.get(r)):n.Pi.getTargetData(t,s)}(n,e,Do(t)).next(t=>{if(t)return r=t.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{i=e})}).next(()=>n.Fs.getDocumentsMatchingQuery(e,t,s?r:Xi.min(),s?i:nl())).next(e=>(function(e,t,s){let n=e.Os.get(t)||Xi.min();s.forEach((e,t)=>{t.readTime.compareTo(n)>0&&(n=t.readTime)}),e.Os.set(t,n)}(n,function(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}(t),e),{documents:e,Qs:i})))}class wd{constructor(){this.activeTargetIds=rl}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Nd{constructor(){this.Mo=new wd,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new wd,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{Oo(e){}shutdown(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed="ConnectivityMonitor";class jd{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){oi(Ed,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){oi(Ed,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Td=null;function _d(){return null===Td?Td=268435456+Math.round(2147483648*Math.random()):Td++,"0x"+Td.toString(16)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const Id="RestConnection",Cd={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class kd{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),n=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${n}`,this.Wo=this.databaseId.database===Oa?`project_id=${s}`:`project_id=${s}&database_id=${n}`}Go(e,t,s,n,r){const i=_d(),a=this.zo(e,t.toUriEncodedString());oi(Id,`Sending RPC '${e}' ${i}:`,a,s);const o={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(o,n,r);const{host:l}=new URL(a),c=U(l);return this.Jo(e,a,o,s,c).then(t=>(oi(Id,`Received RPC '${e}' ${i}: `,t),t),t=>{throw ci(Id,`RPC '${e}' ${i} failed with error: `,t,"url: ",a,"request:",s),t})}Ho(e,t,s,n,r,i){return this.Go(e,t,s,n,r)}jo(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+ri,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,s)=>e[s]=t),s&&s.headers.forEach((t,s)=>e[s]=t)}zo(e,t){const s=Cd[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd="WebChannelConnection";class Od extends kd{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,n,r){const i=_d();return new Promise((r,a)=>{const o=new Wr;o.setWithCredentials(!0),o.listenOnce(Kr.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case Yr.NO_ERROR:const t=o.getResponseJson();oi(Pd,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),r(t);break;case Yr.TIMEOUT:oi(Pd,`RPC '${e}' ${i} timed out`),a(new gi(fi.DEADLINE_EXCEEDED,"Request time out"));break;case Yr.HTTP_ERROR:const s=o.getStatus();if(oi(Pd,`RPC '${e}' ${i} failed with status:`,s,"response text:",o.getResponseText()),s>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=e?.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(fi).indexOf(t)>=0?t:fi.UNKNOWN}(t.status);a(new gi(e,t.message))}else a(new gi(fi.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new gi(fi.UNAVAILABLE,"Connection failed."));break;default:ui(9055,{l_:e,streamId:i,h_:o.getLastErrorCode(),P_:o.getLastError()})}}finally{oi(Pd,`RPC '${e}' ${i} completed.`)}});const l=JSON.stringify(n);oi(Pd,`RPC '${e}' ${i} sending request:`,n),o.send(t,"POST",l,s,15)})}T_(e,t,s){const n=_d(),r=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Zr(),a=Jr(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.jo(o.initMessageHeaders,t,s),o.encodeInitMessageHeaders=!0;const c=r.join("");oi(Pd,`Creating RPC '${e}' stream ${n}: ${c}`,o);const d=i.createWebChannel(c,o);this.I_(d);let u=!1,h=!1;const p=new Ad({Yo:t=>{h?oi(Pd,`Not sending because RPC '${e}' stream ${n} is closed:`,t):(u||(oi(Pd,`Opening RPC '${e}' stream ${n} transport.`),d.open(),u=!0),oi(Pd,`RPC '${e}' stream ${n} sending:`,t),d.send(t))},Zo:()=>d.close()}),m=(e,t,s)=>{e.listen(t,e=>{try{s(e)}catch(t){setTimeout(()=>{throw t},0)}})};return m(d,Gr.EventType.OPEN,()=>{h||(oi(Pd,`RPC '${e}' stream ${n} transport opened.`),p.o_())}),m(d,Gr.EventType.CLOSE,()=>{h||(h=!0,oi(Pd,`RPC '${e}' stream ${n} transport closed`),p.a_(),this.E_(d))}),m(d,Gr.EventType.ERROR,t=>{h||(h=!0,ci(Pd,`RPC '${e}' stream ${n} transport errored. Name:`,t.name,"Message:",t.message),p.a_(new gi(fi.UNAVAILABLE,"The operation could not be completed")))}),m(d,Gr.EventType.MESSAGE,t=>{if(!h){const s=t.data[0];pi(!!s,16349);const r=s,i=r?.error||r[0]?.error;if(i){oi(Pd,`RPC '${e}' stream ${n} received error:`,i);const t=i.status;let s=function(e){const t=Bl[e];if(void 0!==t)return ql(t)}(t),r=i.message;void 0===s&&(s=fi.INTERNAL,r="Unknown error status: "+t+" with message "+i.message),h=!0,p.a_(new gi(s,r)),d.close()}else oi(Pd,`RPC '${e}' stream ${n} received:`,s),p.u_(s)}}),m(a,Xr.STAT_EVENT,t=>{t.stat===Qr.PROXY?oi(Pd,`RPC '${e}' stream ${n} detected buffering proxy`):t.stat===Qr.NOPROXY&&oi(Pd,`RPC '${e}' stream ${n} detected no buffering proxy`)}),setTimeout(()=>{p.__()},0),p}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function Rd(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ld(e){return new oc(e,!0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,t,s=1e3,n=1.5,r=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=n,this.R_=r,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),n=Math.max(0,t-s);n>0&&oi("ExponentialBackoff",`Backing off for ${n} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,n,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dd="PersistentStream";class Ud{constructor(e,t,s,n,r,i,a,o){this.Mi=e,this.S_=s,this.b_=n,this.connection=r,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Md(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===fi.RESOURCE_EXHAUSTED?(li(t.toString()),li("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===fi.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,s])=>{this.D_===t&&this.G_(e,s)},t=>{e(()=>{const e=new gi(fi.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{s(()=>this.z_(e))}),this.stream.onMessage(e=>{s(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return oi(Dd,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(oi(Dd,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Fd extends Ud{constructor(e,t,s,n,r,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,n,i),this.serializer=r}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let s;if("targetChange"in t){t.targetChange;const r="NO_CHANGE"===(n=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===n?1:"REMOVE"===n?2:"CURRENT"===n?3:"RESET"===n?4:ui(39313,{state:n}),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(pi(void 0===t||"string"==typeof t,58123),ba.fromBase64String(t||"")):(pi(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),ba.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,l=o&&function(e){const t=void 0===e.code?fi.UNKNOWN:ql(e.code);return new gi(t,e.message||"")}(o);s=new Zl(r,i,a,l||null)}else if("documentChange"in t){t.documentChange;const n=t.documentChange;n.document,n.document.name,n.document.updateTime;const r=yc(e,n.document.name),i=hc(n.document.updateTime),a=n.document.createTime?hc(n.document.createTime):Xi.min(),o=new so({mapValue:{fields:n.document.fields}}),l=ro.newFoundDocument(r,i,a,o),c=n.targetIds||[],d=n.removedTargetIds||[];s=new Xl(c,d,l.key,l)}else if("documentDelete"in t){t.documentDelete;const n=t.documentDelete;n.document;const r=yc(e,n.document),i=n.readTime?hc(n.readTime):Xi.min(),a=ro.newNoDocument(r,i),o=n.removedTargetIds||[];s=new Xl([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const n=t.documentRemove;n.document;const r=yc(e,n.document),i=n.removedTargetIds||[];s=new Xl([],i,r,null)}else{if(!("filter"in t))return ui(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:n=0,unchangedNames:r}=e,i=new Vl(n,r),a=e.targetId;s=new Jl(a,i)}}var n;return s}(this.serializer,e),s=function(e){if(!("targetChange"in e))return Xi.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Xi.min():t.readTime?hc(t.readTime):Xi.min()}(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=vc(this.serializer),t.addTarget=function(e,t){let s;const n=t.target;if(s=Ao(n)?{documents:Nc(e,n)}:{query:Sc(e,n).ft},s.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){s.resumeToken=dc(e,t.resumeToken);const n=lc(e,t.expectedCount);null!==n&&(s.expectedCount=n)}else if(t.snapshotVersion.compareTo(Xi.min())>0){s.readTime=cc(e,t.snapshotVersion.toTimestamp());const n=lc(e,t.expectedCount);null!==n&&(s.expectedCount=n)}return s}(this.serializer,e);const s=function(e,t){const s=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ui(28987,{purpose:e})}}(t.purpose);return null==s?null:{"goog-listen-tags":s}}(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=vc(this.serializer),t.removeTarget=e,this.q_(t)}}class Vd extends Ud{constructor(e,t,s,n,r,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,n,i),this.serializer=r}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return pi(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,pi(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){pi(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(pi(void 0!==t,14353),e.map(e=>function(e,t){let s=e.updateTime?hc(e.updateTime):hc(t);return s.isEqual(Xi.min())&&(s=hc(t)),new wl(s,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),s=hc(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=vc(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>function(e,t){let s;if(t instanceof kl)s={update:wc(e,t.key,t.value)};else if(t instanceof Ll)s={delete:gc(e,t.key)};else if(t instanceof Al)s={update:wc(e,t.key,t.data),updateMask:Pc(t.fieldMask)};else{if(!(t instanceof Ml))return ui(16599,{Vt:t.type});s={verify:gc(e,t.key)}}return t.fieldTransforms.length>0&&(s.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const s=t.transform;if(s instanceof hl)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(s instanceof pl)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:s.elements}};if(s instanceof fl)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:s.elements}};if(s instanceof yl)return{fieldPath:t.field.canonicalString(),increment:s.Ae};throw ui(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(s.currentDocument=(n=e,void 0!==(r=t.precondition).updateTime?{updateTime:uc(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:ui(27497))),s;var n,r}(this.serializer,e))};this.q_(t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{}class zd extends Bd{constructor(e,t,s,n){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=n,this.ia=!1}sa(){if(this.ia)throw new gi(fi.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,n){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,i])=>this.connection.Go(e,mc(t,s),n,r,i)).catch(e=>{throw"FirebaseError"===e.name?(e.code===fi.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new gi(fi.UNKNOWN,e.toString())})}Ho(e,t,s,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Ho(e,mc(t,s),n,i,a,r)).catch(e=>{throw"FirebaseError"===e.name?(e.code===fi.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new gi(fi.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class qd{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(li(t),this.aa=!1):oi("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $d="RemoteStore";class Hd{constructor(e,t,s,n,r){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=r,this.Aa.Oo(e=>{s.enqueueAndForget(async()=>{eu(this)&&(oi($d,"Restarting streams for network reachability change."),await async function(e){const t=mi(e);t.Ea.add(4),await Gd(t),t.Ra.set("Unknown"),t.Ea.delete(4),await Wd(t)}(this))})}),this.Ra=new qd(s,n)}}async function Wd(e){if(eu(e))for(const t of e.da)await t(!0)}async function Gd(e){for(const t of e.da)await t(!1)}function Kd(e,t){const s=mi(e);s.Ia.has(t.targetId)||(s.Ia.set(t.targetId,t),Zd(s)?Jd(s):xu(s).O_()&&Qd(s,t))}function Yd(e,t){const s=mi(e),n=xu(s);s.Ia.delete(t),n.O_()&&Xd(s,t),0===s.Ia.size&&(n.O_()?n.L_():eu(s)&&s.Ra.set("Unknown"))}function Qd(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Xi.min())>0){const s=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(s)}xu(e).Y_(t)}function Xd(e,t){e.Va.Ue(t),xu(e).Z_(t)}function Jd(e){e.Va=new tc({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),xu(e).start(),e.Ra.ua()}function Zd(e){return eu(e)&&!xu(e).x_()&&e.Ia.size>0}function eu(e){return 0===mi(e).Ea.size}function tu(e){e.Va=void 0}async function su(e){e.Ra.set("Online")}async function nu(e){e.Ia.forEach((t,s)=>{Qd(e,t)})}async function ru(e,t){tu(e),Zd(e)?(e.Ra.ha(t),Jd(e)):e.Ra.set("Unknown")}async function iu(e,t,s){if(e.Ra.set("Online"),t instanceof Zl&&2===t.state&&t.cause)try{await async function(e,t){const s=t.cause;for(const n of t.targetIds)e.Ia.has(n)&&(await e.remoteSyncer.rejectListen(n,s),e.Ia.delete(n),e.Va.removeTarget(n))}(e,t)}catch(n){oi($d,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await au(e,n)}else if(t instanceof Xl?e.Va.Ze(t):t instanceof Jl?e.Va.st(t):e.Va.tt(t),!s.isEqual(Xi.min()))try{const t=await gd(e.localStore);s.compareTo(t)>=0&&await function(e,t){const s=e.Va.Tt(t);return s.targetChanges.forEach((s,n)=>{if(s.resumeToken.approximateByteSize()>0){const r=e.Ia.get(n);r&&e.Ia.set(n,r.withResumeToken(s.resumeToken,t))}}),s.targetMismatches.forEach((t,s)=>{const n=e.Ia.get(t);if(!n)return;e.Ia.set(t,n.withResumeToken(ba.EMPTY_BYTE_STRING,n.snapshotVersion)),Xd(e,t);const r=new Rc(n.target,t,s,n.sequenceNumber);Qd(e,r)}),e.remoteSyncer.applyRemoteEvent(s)}(e,s)}catch(r){oi($d,"Failed to raise snapshot:",r),await au(e,r)}}async function au(e,t,s){if(!ra(t))throw t;e.Ea.add(1),await Gd(e),e.Ra.set("Offline"),s||(s=()=>gd(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{oi($d,"Retrying IndexedDB access"),await s(),e.Ea.delete(1),await Wd(e)})}function ou(e,t){return t().catch(s=>au(e,s,t))}async function lu(e){const t=mi(e),s=vu(t);let n=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:-1;for(;cu(t);)try{const e=await xd(t.localStore,n);if(null===e){0===t.Ta.length&&s.L_();break}n=e.batchId,du(t,e)}catch(r){await au(t,r)}uu(t)&&hu(t)}function cu(e){return eu(e)&&e.Ta.length<10}function du(e,t){e.Ta.push(t);const s=vu(e);s.O_()&&s.X_&&s.ea(t.mutations)}function uu(e){return eu(e)&&!vu(e).x_()&&e.Ta.length>0}function hu(e){vu(e).start()}async function pu(e){vu(e).ra()}async function mu(e){const t=vu(e);for(const s of e.Ta)t.ea(s.mutations)}async function fu(e,t,s){const n=e.Ta.shift(),r=Ul.from(n,t,s);await ou(e,()=>e.remoteSyncer.applySuccessfulWrite(r)),await lu(e)}async function gu(e,t){t&&vu(e).X_&&await async function(e,t){if(function(e){switch(e){case fi.OK:return ui(64938);case fi.CANCELLED:case fi.UNKNOWN:case fi.DEADLINE_EXCEEDED:case fi.RESOURCE_EXHAUSTED:case fi.INTERNAL:case fi.UNAVAILABLE:case fi.UNAUTHENTICATED:return!1;case fi.INVALID_ARGUMENT:case fi.NOT_FOUND:case fi.ALREADY_EXISTS:case fi.PERMISSION_DENIED:case fi.FAILED_PRECONDITION:case fi.ABORTED:case fi.OUT_OF_RANGE:case fi.UNIMPLEMENTED:case fi.DATA_LOSS:return!0;default:return ui(15467,{code:e})}}(s=t.code)&&s!==fi.ABORTED){const s=e.Ta.shift();vu(e).B_(),await ou(e,()=>e.remoteSyncer.rejectFailedWrite(s.batchId,t)),await lu(e)}var s}(e,t),uu(e)&&hu(e)}async function yu(e,t){const s=mi(e);s.asyncQueue.verifyOperationInProgress(),oi($d,"RemoteStore received new credentials");const n=eu(s);s.Ea.add(3),await Gd(s),n&&s.Ra.set("Unknown"),await s.remoteSyncer.handleCredentialChange(t),s.Ea.delete(3),await Wd(s)}function xu(e){return e.ma||(e.ma=function(e,t,s){const n=mi(e);return n.sa(),new Fd(t,n.connection,n.authCredentials,n.appCheckCredentials,n.serializer,s)}(e.datastore,e.asyncQueue,{Xo:su.bind(null,e),t_:nu.bind(null,e),r_:ru.bind(null,e),H_:iu.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),Zd(e)?Jd(e):e.Ra.set("Unknown")):(await e.ma.stop(),tu(e))})),e.ma}function vu(e){return e.fa||(e.fa=function(e,t,s){const n=mi(e);return n.sa(),new Vd(t,n.connection,n.authCredentials,n.appCheckCredentials,n.serializer,s)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:pu.bind(null,e),r_:gu.bind(null,e),ta:mu.bind(null,e),na:fu.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await lu(e)):(await e.fa.stop(),e.Ta.length>0&&(oi($d,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class bu{constructor(e,t,s,n,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=n,this.removalCallback=r,this.deferred=new yi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,n,r){const i=Date.now()+s,a=new bu(e,t,i,n,r);return a.start(s),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new gi(fi.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wu(e,t){if(li("AsyncQueue",`${t}: ${e}`),ra(e))return new gi(fi.UNAVAILABLE,`${t}: ${e}`);throw e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{static emptySet(e){return new Nu(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Fi.comparator(t.key,s.key):(e,t)=>Fi.comparator(e.key,t.key),this.keyedMap=Qo(),this.sortedSet=new pa(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Nu))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,n=s.getNext().key;if(!e.isEqual(n))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new Nu;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(){this.ga=new pa(Fi.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?0!==e.type&&3===s.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==s.type?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.ga=this.ga.remove(t):1===e.type&&2===s.type?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ui(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,s)=>{e.push(s)}),e}}class Eu{constructor(e,t,s,n,r,i,a,o,l){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=n,this.mutatedKeys=r,this.fromCache=i,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,s,n,r){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new Eu(e,t,Nu.emptySet(t),i,s,n,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vo(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let n=0;n<t.length;n++)if(t[n].type!==s[n].type||!t[n].doc.isEqual(s[n].doc))return!1;return!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Tu{constructor(){this.queries=_u(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const s=mi(e),n=s.queries;s.queries=_u(),n.forEach((e,s)=>{for(const n of s.Sa)n.onError(t)})}(this,new gi(fi.ABORTED,"Firestore shutting down"))}}function _u(){return new Wo(e=>Bo(e),Vo)}function Iu(e,t){const s=mi(e);let n=!1;for(const r of t){const e=r.query,t=s.queries.get(e);if(t){for(const e of t.Sa)e.Fa(r)&&(n=!0);t.wa=r}}n&&ku(s)}function Cu(e,t,s){const n=mi(e),r=n.queries.get(t);if(r)for(const i of r.Sa)i.onError(s);n.queries.delete(t)}function ku(e){e.Ca.forEach(e=>{e.next()})}var Au,Pu;(Pu=Au||(Au={})).Ma="default",Pu.Cache="cache";class Ou{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const s of e.docChanges)3!==s.type&&t.push(s);e=new Eu(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const s="Offline"!==t;return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=Eu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Au.Cache}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e){this.key=e}}class Lu{constructor(e){this.key=e}}class Mu{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=nl(),this.mutatedKeys=nl(),this.eu=$o(e),this.tu=new Nu(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new Su,n=t?t.tu:this.tu;let r=t?t.mutatedKeys:this.mutatedKeys,i=n,a=!1;const o="F"===this.query.limitType&&n.size===this.query.limit?n.last():null,l="L"===this.query.limitType&&n.size===this.query.limit?n.first():null;if(e.inorderTraversal((e,t)=>{const c=n.get(e),d=qo(this.query,t)?t:null,u=!!c&&this.mutatedKeys.has(c.key),h=!!d&&(d.hasLocalMutations||this.mutatedKeys.has(d.key)&&d.hasCommittedMutations);let p=!1;c&&d?c.data.isEqual(d.data)?u!==h&&(s.track({type:3,doc:d}),p=!0):this.su(c,d)||(s.track({type:2,doc:d}),p=!0,(o&&this.eu(d,o)>0||l&&this.eu(d,l)<0)&&(a=!0)):!c&&d?(s.track({type:0,doc:d}),p=!0):c&&!d&&(s.track({type:1,doc:c}),p=!0,(o||l)&&(a=!0)),p&&(d?(i=i.add(d),r=h?r.add(e):r.delete(e)):(i=i.delete(e),r=r.delete(e)))}),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),r=r.delete(e.key),s.track({type:1,doc:e})}return{tu:i,iu:s,Cs:a,mutatedKeys:r}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,n){const r=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const i=e.iu.ya();i.sort((e,t)=>function(e,t){const s=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ui(20277,{Rt:e})}};return s(e)-s(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(s),n=n??!1;const a=t&&!n?this._u():[],o=0===this.Xa.size&&this.current&&!n?1:0,l=o!==this.Za;return this.Za=o,0!==i.length||l?{snapshot:new Eu(this.query,e.tu,r,i,e.mutatedKeys,0===o,l,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Su,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=nl(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new Lu(e))}),this.Xa.forEach(s=>{e.has(s)||t.push(new Ru(s))}),t}cu(e){this.Ya=e.Qs,this.Xa=nl();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Eu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const Du="SyncEngine";class Uu{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class Fu{constructor(e){this.key=e,this.hu=!1}}class Vu{constructor(e,t,s,n,r,i){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=n,this.currentUser=r,this.maxConcurrentLimboResolutions=i,this.Pu={},this.Tu=new Wo(e=>Bo(e),Vo),this.Iu=new Map,this.Eu=new Set,this.du=new pa(Fi.comparator),this.Au=new Map,this.Ru=new ed,this.Vu={},this.mu=new Map,this.fu=zc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function Bu(e,t,s=!0){const n=lh(e);let r;const i=n.Tu.get(t);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await qu(n,t,s,!0),r}async function zu(e,t){const s=lh(e);await qu(s,t,!0,!1)}async function qu(e,t,s,n){const r=await function(e,t){const s=mi(e);return s.persistence.runTransaction("Allocate target","readwrite",e=>{let n;return s.Pi.getTargetData(e,t).next(r=>r?(n=r,na.resolve(n)):s.Pi.allocateTargetId(e).next(r=>(n=new Rc(t,r,"TargetPurposeListen",e.currentSequenceNumber),s.Pi.addTargetData(e,n).next(()=>n))))}).then(e=>{const n=s.Ms.get(e.targetId);return(null===n||e.snapshotVersion.compareTo(n.snapshotVersion)>0)&&(s.Ms=s.Ms.insert(e.targetId,e),s.xs.set(t,e.targetId)),e})}(e.localStore,Do(t)),i=r.targetId,a=e.sharedClientState.addLocalQueryTarget(i,s);let o;return n&&(o=await async function(e,t,s,n,r){e.pu=(t,s,n)=>async function(e,t,s,n){let r=t.view.ru(s);r.Cs&&(r=await bd(e.localStore,t.query,!1).then(({documents:e})=>t.view.ru(e,r)));const i=n&&n.targetChanges.get(t.targetId),a=n&&null!=n.targetMismatches.get(t.targetId),o=t.view.applyChanges(r,e.isPrimaryClient,i,a);return sh(e,t.targetId,o.au),o.snapshot}(e,t,s,n);const i=await bd(e.localStore,t,!0),a=new Mu(t,i.Qs),o=a.ru(i.documents),l=Ql.createSynthesizedTargetChangeForCurrentChange(s,n&&"Offline"!==e.onlineState,r),c=a.applyChanges(o,e.isPrimaryClient,l);sh(e,s,c.au);const d=new Uu(t,s,a);return e.Tu.set(t,d),e.Iu.has(s)?e.Iu.get(s).push(t):e.Iu.set(s,[t]),c.snapshot}(e,t,i,"current"===a,r.resumeToken)),e.isPrimaryClient&&s&&Kd(e.remoteStore,r),o}async function $u(e,t,s){const n=mi(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);if(i.length>1)return n.Iu.set(r.targetId,i.filter(e=>!Vo(e,t))),void n.Tu.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await vd(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),s&&Yd(n.remoteStore,r.targetId),eh(n,r.targetId)}).catch(sa)):(eh(n,r.targetId),await vd(n.localStore,r.targetId,!0))}async function Hu(e,t){const s=mi(e),n=s.Tu.get(t),r=s.Iu.get(n.targetId);s.isPrimaryClient&&1===r.length&&(s.sharedClientState.removeLocalQueryTarget(n.targetId),Yd(s.remoteStore,n.targetId))}async function Wu(e,t,s){const n=function(e){const t=mi(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Qu.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Xu.bind(null,t),t}(e);try{const e=await function(e,t){const s=mi(e),n=Qi.now(),r=t.reduce((e,t)=>e.add(t.key),nl());let i,a;return s.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=Ko(),l=nl();return s.Ns.getEntries(e,r).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>s.localDocuments.getOverlayedDocuments(e,o)).next(r=>{i=r;const a=[];for(const e of t){const t=Il(e,i.get(e.key).overlayedDocument);null!=t&&a.push(new Al(e.key,t,no(t.value.mapValue),Nl.exists(!0)))}return s.mutationQueue.addMutationBatch(e,n,a,t)}).next(t=>{a=t;const n=t.applyToLocalDocumentSet(i,l);return s.documentOverlayCache.saveOverlays(e,t.batchId,n)})}).then(()=>({batchId:a.batchId,changes:Xo(i)}))}(n.localStore,t);n.sharedClientState.addPendingMutation(e.batchId),function(e,t,s){let n=e.Vu[e.currentUser.toKey()];n||(n=new pa(Ii)),n=n.insert(t,s),e.Vu[e.currentUser.toKey()]=n}(n,e.batchId,s),await ih(n,e.changes),await lu(n.remoteStore)}catch(r){const e=wu(r,"Failed to persist write");s.reject(e)}}async function Gu(e,t){const s=mi(e);try{const e=await yd(s.localStore,t);t.targetChanges.forEach((e,t)=>{const n=s.Au.get(t);n&&(pi(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?n.hu=!0:e.modifiedDocuments.size>0?pi(n.hu,14607):e.removedDocuments.size>0&&(pi(n.hu,42227),n.hu=!1))}),await ih(s,e,t)}catch(n){await sa(n)}}function Ku(e,t,s){const n=mi(e);if(n.isPrimaryClient&&0===s||!n.isPrimaryClient&&1===s){const e=[];n.Tu.forEach((s,n)=>{const r=n.view.va(t);r.snapshot&&e.push(r.snapshot)}),function(e,t){const s=mi(e);s.onlineState=t;let n=!1;s.queries.forEach((e,s)=>{for(const r of s.Sa)r.va(t)&&(n=!0)}),n&&ku(s)}(n.eventManager,t),e.length&&n.Pu.H_(e),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function Yu(e,t,s){const n=mi(e);n.sharedClientState.updateQueryState(t,"rejected",s);const r=n.Au.get(t),i=r&&r.key;if(i){let e=new pa(Fi.comparator);e=e.insert(i,ro.newNoDocument(i,Xi.min()));const s=nl().add(i),r=new Yl(Xi.min(),new Map,new pa(Ii),e,s);await Gu(n,r),n.du=n.du.remove(i),n.Au.delete(t),rh(n)}else await vd(n.localStore,t,!1).then(()=>eh(n,t,s)).catch(sa)}async function Qu(e,t){const s=mi(e),n=t.batch.batchId;try{const e=await function(e,t){const s=mi(e);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const n=t.batch.keys(),r=s.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,s,n){const r=s.batch,i=r.keys();let a=na.resolve();return i.forEach(e=>{a=a.next(()=>n.getEntry(t,e)).next(t=>{const i=s.docVersions.get(e);pi(null!==i,48541),t.version.compareTo(i)<0&&(r.applyToRemoteDocument(t,s),t.isValidDocument()&&(t.setReadTime(s.commitVersion),n.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,r))}(s,e,t,r).next(()=>r.apply(e)).next(()=>s.mutationQueue.performConsistencyCheck(e)).next(()=>s.documentOverlayCache.removeOverlaysForBatchId(e,n,t.batch.batchId)).next(()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=nl();for(let s=0;s<e.mutationResults.length;++s)e.mutationResults[s].transformResults.length>0&&(t=t.add(e.batch.mutations[s].key));return t}(t))).next(()=>s.localDocuments.getDocuments(e,n))})}(s.localStore,t);Zu(s,n,null),Ju(s,n),s.sharedClientState.updateMutationState(n,"acknowledged"),await ih(s,e)}catch(r){await sa(r)}}async function Xu(e,t,s){const n=mi(e);try{const e=await function(e,t){const s=mi(e);return s.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let n;return s.mutationQueue.lookupMutationBatch(e,t).next(t=>(pi(null!==t,37113),n=t.keys(),s.mutationQueue.removeMutationBatch(e,t))).next(()=>s.mutationQueue.performConsistencyCheck(e)).next(()=>s.documentOverlayCache.removeOverlaysForBatchId(e,n,t)).next(()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,n)).next(()=>s.localDocuments.getDocuments(e,n))})}(n.localStore,t);Zu(n,t,s),Ju(n,t),n.sharedClientState.updateMutationState(t,"rejected",s),await ih(n,e)}catch(r){await sa(r)}}function Ju(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function Zu(e,t,s){const n=mi(e);let r=n.Vu[n.currentUser.toKey()];if(r){const e=r.get(t);e&&(s?e.reject(s):e.resolve(),r=r.remove(t)),n.Vu[n.currentUser.toKey()]=r}}function eh(e,t,s=null){e.sharedClientState.removeLocalQueryTarget(t);for(const n of e.Iu.get(t))e.Tu.delete(n),s&&e.Pu.yu(n,s);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||th(e,t)})}function th(e,t){e.Eu.delete(t.path.canonicalString());const s=e.du.get(t);null!==s&&(Yd(e.remoteStore,s),e.du=e.du.remove(t),e.Au.delete(s),rh(e))}function sh(e,t,s){for(const n of s)n instanceof Ru?(e.Ru.addReference(n.key,t),nh(e,n)):n instanceof Lu?(oi(Du,"Document no longer in limbo: "+n.key),e.Ru.removeReference(n.key,t),e.Ru.containsKey(n.key)||th(e,n.key)):ui(19791,{wu:n})}function nh(e,t){const s=t.key,n=s.path.canonicalString();e.du.get(s)||e.Eu.has(n)||(oi(Du,"New document in limbo: "+s),e.Eu.add(n),rh(e))}function rh(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const s=new Fi(Mi.fromString(t)),n=e.fu.next();e.Au.set(n,new Fu(s)),e.du=e.du.insert(s,n),Kd(e.remoteStore,new Rc(Do(Oo(s.path)),n,"TargetPurposeLimboResolution",ia.ce))}}async function ih(e,t,s){const n=mi(e),r=[],i=[],a=[];n.Tu.isEmpty()||(n.Tu.forEach((e,o)=>{a.push(n.pu(o,t,s).then(e=>{if((e||s)&&n.isPrimaryClient){const t=e?!e.fromCache:s?.targetChanges.get(o.targetId)?.current;n.sharedClientState.updateQueryState(o.targetId,t?"current":"not-current")}if(e){r.push(e);const t=dd.As(o.targetId,e);i.push(t)}}))}),await Promise.all(a),n.Pu.H_(r),await async function(e,t){const s=mi(e);try{await s.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>na.forEach(t,t=>na.forEach(t.Es,n=>s.persistence.referenceDelegate.addReference(e,t.targetId,n)).next(()=>na.forEach(t.ds,n=>s.persistence.referenceDelegate.removeReference(e,t.targetId,n)))))}catch(n){if(!ra(n))throw n;oi(pd,"Failed to update sequence numbers: "+n)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=s.Ms.get(e),n=t.snapshotVersion,r=t.withLastLimboFreeSnapshotVersion(n);s.Ms=s.Ms.insert(e,r)}}}(n.localStore,i))}async function ah(e,t){const s=mi(e);if(!s.currentUser.isEqual(t)){oi(Du,"User change. New user:",t.toKey());const e=await fd(s.localStore,t);s.currentUser=t,r="'waitForPendingWrites' promise is rejected due to a user change.",(n=s).mu.forEach(e=>{e.forEach(e=>{e.reject(new gi(fi.CANCELLED,r))})}),n.mu.clear(),s.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await ih(s,e.Ls)}var n,r}function oh(e,t){const s=mi(e),n=s.Au.get(t);if(n&&n.hu)return nl().add(n.key);{let e=nl();const n=s.Iu.get(t);if(!n)return e;for(const t of n){const n=s.Tu.get(t);e=e.unionWith(n.view.nu)}return e}}function lh(e){const t=mi(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Gu.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=oh.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Yu.bind(null,t),t.Pu.H_=Iu.bind(null,t.eventManager),t.Pu.yu=Cu.bind(null,t.eventManager),t}class ch{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ld(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return function(e,t,s,n){return new md(e,t,s,n)}(this.persistence,new hd,e.initialUser,this.serializer)}Cu(e){return new ad(ld.mi,this.serializer)}Du(e){return new Nd}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ch.provider={build:()=>new ch};class dh extends ch{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){pi(this.persistence.referenceDelegate instanceof cd,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new Wc(s,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?Bc.withCacheSize(this.cacheSizeBytes):Bc.DEFAULT;return new ad(e=>cd.mi(e,t),this.serializer)}}class uh{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Ku(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=ah.bind(null,this.syncEngine),await async function(e,t){const s=mi(e);t?(s.Ea.delete(2),await Wd(s)):t||(s.Ea.add(2),await Gd(s),s.Ra.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Tu}createDatastore(e){const t=Ld(e.databaseInfo.databaseId),s=(n=e.databaseInfo,new Od(n));var n;return function(e,t,s,n){return new zd(e,t,s,n)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,n=e.asyncQueue,r=e=>Ku(this.syncEngine,e,0),i=jd.v()?new jd:new Sd,new Hd(t,s,n,r,i);var t,s,n,r,i}createSyncEngine(e,t){return function(e,t,s,n,r,i,a){const o=new Vu(e,t,s,n,r,i);return a&&(o.gu=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await async function(e){const t=mi(e);oi($d,"RemoteStore shutting down."),t.Ea.add(5),await Gd(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}uh.provider={build:()=>new uh};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class hh{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):li("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ph="FirestoreClient";class mh{constructor(e,t,s,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=n,this.user=ni.UNAUTHENTICATED,this.clientId=_i.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(s,async e=>{oi(ph,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(s,e=>(oi(ph,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new yi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=wu(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function fh(e,t){e.asyncQueue.verifyOperationInProgress(),oi(ph,"Initializing OfflineComponentProvider");const s=e.configuration;await t.initialize(s);let n=s.initialUser;e.setCredentialChangeListener(async e=>{n.isEqual(e)||(await fd(t.localStore,e),n=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function gh(e,t){e.asyncQueue.verifyOperationInProgress();const s=await async function(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){oi(ph,"Using user provided OfflineComponentProvider");try{await fh(e,e._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!("FirebaseError"===(s=r).name?s.code===fi.FAILED_PRECONDITION||s.code===fi.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&s instanceof DOMException)||22===s.code||20===s.code||11===s.code))throw r;ci("Error using user provided cache. Falling back to memory cache: "+r),await fh(e,new ch)}}else oi(ph,"Using default OfflineComponentProvider"),await fh(e,new dh(void 0));var s;return e._offlineComponents}(e);oi(ph,"Initializing OnlineComponentProvider"),await t.initialize(s,e.configuration),e.setCredentialChangeListener(e=>yu(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,s)=>yu(t.remoteStore,s)),e._onlineComponents=t}async function yh(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(oi(ph,"Using user provided OnlineComponentProvider"),await gh(e,e._uninitializedComponentsProvider._online)):(oi(ph,"Using default OnlineComponentProvider"),await gh(e,new uh))),e._onlineComponents}async function xh(e){const t=await yh(e),s=t.eventManager;return s.onListen=Bu.bind(null,t.syncEngine),s.onUnlisten=$u.bind(null,t.syncEngine),s.onFirstRemoteStoreListen=zu.bind(null,t.syncEngine),s.onLastRemoteStoreUnlisten=Hu.bind(null,t.syncEngine),s}function vh(e,t,s={}){const n=new yi;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,s,n,r){const i=new hh({next:s=>{i.Nu(),t.enqueueAndForget(()=>async function(e,t){const s=mi(e),n=t.query;let r=3;const i=s.queries.get(n);if(i){const e=i.Sa.indexOf(t);e>=0&&(i.Sa.splice(e,1),0===i.Sa.length?r=t.Da()?0:1:!i.ba()&&t.Da()&&(r=2))}switch(r){case 0:return s.queries.delete(n),s.onUnlisten(n,!0);case 1:return s.queries.delete(n),s.onUnlisten(n,!1);case 2:return s.onLastRemoteStoreUnlisten(n);default:return}}(e,a)),s.fromCache&&"server"===n.source?r.reject(new gi(fi.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(s)},error:e=>r.reject(e)}),a=new Ou(s,i,{includeMetadataChanges:!0,qa:!0});return async function(t,s){const n=mi(t);let r=3;const i=s.query;let a=n.queries.get(i);a?!a.ba()&&s.Da()&&(r=2):(a=new ju,r=s.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=wu(e,`Initialization of query '${zo(s.query)}' failed`);return void s.onError(n)}n.queries.set(i,a),a.Sa.push(s),s.va(n.onlineState),a.wa&&s.Fa(a.wa)&&ku(n)}(e,a)}(await xh(e),e.asyncQueue,t,s,n)),n.promise
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}function bh(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const wh=new Map,Nh="firestore.googleapis.com",Sh=!0;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e){if(void 0===e.host){if(void 0!==e.ssl)throw new gi(fi.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Nh,this.ssl=Sh}else this.host=e.host,this.ssl=e.ssl??Sh;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Vc;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new gi(fi.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,s,n){if(!0===t&&!0===n)throw new gi(fi.INVALID_ARGUMENT,`${e} and ${s} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bh(e.experimentalLongPollingOptions??{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new gi(fi.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new gi(fi.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new gi(fi.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,s=e.experimentalLongPollingOptions,t.timeoutSeconds===s.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,s}}class jh{constructor(e,t,s,n){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Eh({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new gi(fi.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new gi(fi.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Eh(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new vi;switch(e.type){case"firstParty":return new Si(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new gi(fi.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=wh.get(e);t&&(oi("ComponentProvider","Removing Datastore"),wh.delete(e),t.terminate())}(this),Promise.resolve()}}function Th(e,t,s,n={}){e=Hi(e,jh);const r=U(t),i=e._getSettings(),a={...i,emulatorOptions:e._getEmulatorOptions()},o=`${t}:${s}`;r&&(F(`https://${o}`),z("Firestore",!0)),i.host!==Nh&&i.host!==o&&ci("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:o,ssl:r,emulatorOptions:n};if(!X(l,a)&&(e._setSettings(l),n.mockUserToken)){let t,s;if("string"==typeof n.mockUserToken)t=n.mockUserToken,s=ni.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s=t||"demo-project",n=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i={iss:`https://securetoken.google.com/${s}`,aud:s,iat:n,exp:n+3600,auth_time:n,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}},...e};return[k(JSON.stringify({alg:"none",type:"JWT"})),k(JSON.stringify(i)),""].join(".")}(n.mockUserToken,e._app?.options.projectId);const r=n.mockUserToken.sub||n.mockUserToken.user_id;if(!r)throw new gi(fi.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new ni(r)}e._authCredentials=new bi(new xi(t,s))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new _h(this.firestore,e,this._query)}}class Ih{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ch(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ih(this.firestore,e,this._key)}toJSON(){return{type:Ih._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Gi(t,Ih._jsonSchema))return new Ih(e,s||null,new Fi(Mi.fromString(t.referencePath)))}}Ih._jsonSchemaVersion="firestore/documentReference/1.0",Ih._jsonSchema={type:Wi("string",Ih._jsonSchemaVersion),referencePath:Wi("string")};class Ch extends _h{constructor(e,t,s){super(e,t,Oo(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ih(this.firestore,null,new Fi(e))}withConverter(e){return new Ch(this.firestore,e,this._path)}}function kh(e,t,...s){if(e=ie(e),Vi("collection","path",t),e instanceof jh){const n=Mi.fromString(t,...s);return zi(n),new Ch(e,null,n)}{if(!(e instanceof Ih||e instanceof Ch))throw new gi(fi.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Mi.fromString(t,...s));return zi(n),new Ch(e.firestore,null,n)}}function Ah(e,t,...s){if(e=ie(e),1===arguments.length&&(t=_i.newId()),Vi("doc","path",t),e instanceof jh){const n=Mi.fromString(t,...s);return Bi(n),new Ih(e,null,new Fi(n))}{if(!(e instanceof Ih||e instanceof Ch))throw new gi(fi.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Mi.fromString(t,...s));return Bi(n),new Ih(e.firestore,e instanceof Ch?e.converter:null,new Fi(n))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ph="AsyncQueue";class Oh{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Md(this,"async_queue_retry"),this._c=()=>{const e=Rd();e&&oi(Ph,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=Rd();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Rd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new yi;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ra(e))throw e;oi(Ph,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,li("INTERNAL UNHANDLED ERROR: ",Rh(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const n=bu.createAndSchedule(this,e,t,s,e=>this.hc(e));return this.tc.push(n),n}uc(){this.nc&&ui(47125,{Pc:Rh(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Rh(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class Lh extends jh{constructor(e,t,s,n){super(e,t,s,n),this.type="firestore",this._queue=new Oh,this._persistenceKey=n?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Oh(e),this._firestoreClient=void 0,await e}}}function Mh(e){if(e._terminated)throw new gi(fi.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||function(e){const t=e._freezeSettings(),s=(n=e._databaseId,r=e._app?.options.appId||"",i=e._persistenceKey,a=t,new Pa(n,r,i,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,bh(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator));var n,r,i,a;e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new mh(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=e?._online.build();return{_offline:e?._offline.build(t),_online:t}}(e._componentsProvider))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e),e._firestoreClient}class Dh{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Dh(ba.fromBase64String(e))}catch(t){throw new gi(fi.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Dh(ba.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Dh._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Gi(e,Dh._jsonSchema))return Dh.fromBase64String(e.bytes)}}Dh._jsonSchemaVersion="firestore/bytes/1.0",Dh._jsonSchema={type:Wi("string",Dh._jsonSchemaVersion),bytes:Wi("string")};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Uh{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new gi(fi.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ui(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e){this._methodName=e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new gi(fi.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new gi(fi.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ii(this._lat,e._lat)||Ii(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Vh._jsonSchemaVersion}}static fromJSON(e){if(Gi(e,Vh._jsonSchema))return new Vh(e.latitude,e.longitude)}}Vh._jsonSchemaVersion="firestore/geoPoint/1.0",Vh._jsonSchema={type:Wi("string",Vh._jsonSchemaVersion),latitude:Wi("number"),longitude:Wi("number")};
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Bh{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let s=0;s<e.length;++s)if(e[s]!==t[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Bh._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Gi(e,Bh._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new Bh(e.vectorValues);throw new gi(fi.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Bh._jsonSchemaVersion="firestore/vectorValue/1.0",Bh._jsonSchema={type:Wi("string",Bh._jsonSchemaVersion),vectorValues:Wi("object")};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const zh=/^__.*__$/;class qh{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new Al(e,this.data,this.fieldMask,t,this.fieldTransforms):new kl(e,this.data,t,this.fieldTransforms)}}function $h(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ui(40011,{Ac:e})}}class Hh{constructor(e,t,s,n,r,i){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=n,void 0===r&&this.Rc(),this.fieldTransforms=r||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Hh({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return np(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if($h(this.Ac)&&zh.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Wh{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Ld(e)}Cc(e,t,s,n=!1){return new Hh({Ac:e,methodName:t,Dc:s,path:Ui.emptyPath(),fc:!1,bc:n},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gh(e){const t=e._freezeSettings(),s=Ld(e._databaseId);return new Wh(e._databaseId,!!t.ignoreUndefinedProperties,s)}function Kh(e,t,s,n,r,i={}){const a=e.Cc(i.merge||i.mergeFields?2:0,t,s,r);Zh("Data must be an object, but it was:",a,n);const o=Xh(n,a);let l,c;if(i.merge)l=new xa(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const e=[];for(const n of i.mergeFields){const r=ep(t,n,s);if(!a.contains(r))throw new gi(fi.INVALID_ARGUMENT,`Field '${r}' is specified in your field mask but missing from your input data.`);rp(e,r)||e.push(r)}l=new xa(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new qh(new so(o),l,c)}class Yh extends Fh{_toFieldTransform(e){return new bl(e.path,new hl)}isEqual(e){return e instanceof Yh}}function Qh(e,t){if(Jh(e=ie(e)))return Zh("Unsupported field value:",t,e),Xh(e,t);if(e instanceof Fh)return function(e,t){if(!$h(t.Ac))throw t.Sc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Sc(`${e._methodName}() is not currently supported inside arrays`);const s=e._toFieldTransform(t);s&&t.fieldTransforms.push(s)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const s=[];let n=0;for(const r of e){let e=Qh(r,t.wc(n));null==e&&(e={nullValue:"NULL_VALUE"}),s.push(e),n++}return{arrayValue:{values:s}}}(e,t)}return function(e,t){if(null===(e=ie(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ol(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const s=Qi.fromDate(e);return{timestampValue:cc(t.serializer,s)}}if(e instanceof Qi){const s=new Qi(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:cc(t.serializer,s)}}if(e instanceof Vh)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Dh)return{bytesValue:dc(t.serializer,e._byteString)};if(e instanceof Ih){const s=t.databaseId,n=e.firestore._databaseId;if(!n.isEqual(s))throw t.Sc(`Document reference is for database ${n.projectId}/${n.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:pc(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Bh)return s=e,n=t,{mapValue:{fields:{[La]:{stringValue:Ua},[Fa]:{arrayValue:{values:s.toArray().map(e=>{if("number"!=typeof e)throw n.Sc("VectorValues must only contain numeric values.");return il(n.serializer,e)})}}}}};var s,n;throw t.Sc(`Unsupported field value: ${$i(e)}`)}(e,t)}function Xh(e,t){const s={};return ha(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ua(e,(e,n)=>{const r=Qh(n,t.mc(e));null!=r&&(s[e]=r)}),{mapValue:{fields:s}}}function Jh(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Qi||e instanceof Vh||e instanceof Dh||e instanceof Ih||e instanceof Fh||e instanceof Bh)}function Zh(e,t,s){if(!Jh(s)||!qi(s)){const n=$i(s);throw"an object"===n?t.Sc(e+" a custom object"):t.Sc(e+" "+n)}}function ep(e,t,s){if((t=ie(t))instanceof Uh)return t._internalPath;if("string"==typeof t)return sp(e,t);throw np("Field path arguments must be of type string or ",e,!1,void 0,s)}const tp=new RegExp("[~\\*/\\[\\]]");function sp(e,t,s){if(t.search(tp)>=0)throw np(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,s);try{return new Uh(...t.split("."))._internalPath}catch(n){throw np(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,s)}}function np(e,t,s,n,r){const i=n&&!n.isEmpty(),a=void 0!==r;let o=`Function ${t}() called with invalid data`;s&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=` in field ${n}`),a&&(l+=` in document ${r}`),l+=")"),new gi(fi.INVALID_ARGUMENT,o+e+l)}function rp(e,t){return e.some(e=>e.isEqual(t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e,t,s,n,r){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=n,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Ih(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new ap(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(op("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class ap extends ip{data(){return super.data()}}function op(e,t){return"string"==typeof t?sp(e,t):t instanceof Uh?t._internalPath:t._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{}class cp extends lp{}function dp(e,t,...s){let n=[];t instanceof lp&&n.push(t),n=n.concat(s),function(e){const t=e.filter(e=>e instanceof hp).length,s=e.filter(e=>e instanceof up).length;if(t>1||t>0&&s>0)throw new gi(fi.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const r of n)e=r._apply(e);return e}class up extends cp{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new up(e,t,s)}_apply(e){const t=this._parse(e);return yp(e._query,t),new _h(e.firestore,e.converter,Uo(e._query,t))}_parse(e){const t=Gh(e.firestore),s=function(e,t,s,n,r,i,a){let o;if(r.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new gi(fi.INVALID_ARGUMENT,`Invalid Query. You can't perform '${i}' queries on documentId().`);if("in"===i||"not-in"===i){gp(a,i);const t=[];for(const s of a)t.push(fp(n,e,s));o={arrayValue:{values:t}}}else o=fp(n,e,a)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||gp(a,i),o=function(e,t,s,n=!1){return Qh(s,e.Cc(n?4:3,t))}(s,t,a,"in"===i||"not-in"===i);return ho.create(r,i,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return s}}class hp extends lp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new hp(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:po.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let s=e;const n=t.getFlattenedFilters();for(const r of n)yp(s,r),s=Uo(s,r)}(e._query,t),new _h(e.firestore,e.converter,Uo(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class pp extends cp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new pp(e,t)}_apply(e){const t=function(e,t,s){if(null!==e.startAt)throw new gi(fi.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new gi(fi.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new lo(t,s)}(e._query,this._field,this._direction);return new _h(e.firestore,e.converter,function(e,t){const s=e.explicitOrderBy.concat([t]);return new Po(e.path,e.collectionGroup,s,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function mp(e,t="asc"){const s=t,n=op("orderBy",e);return pp._create(n,s)}function fp(e,t,s){if("string"==typeof(s=ie(s))){if(""===s)throw new gi(fi.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Lo(t)&&-1!==s.indexOf("/"))throw new gi(fi.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${s}' contains a '/' character.`);const n=t.path.child(Mi.fromString(s));if(!Fi.isDocumentKey(n))throw new gi(fi.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Ya(e,new Fi(n))}if(s instanceof Ih)return Ya(e,s._key);throw new gi(fi.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$i(s)}.`)}function gp(e,t){if(!Array.isArray(e)||0===e.length)throw new gi(fi.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function yp(e,t){const s=function(e,t){for(const s of e)for(const e of s.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==s)throw s===t.op?new gi(fi.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new gi(fi.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${s.toString()}' filters.`)}class xp{convertValue(e,t="none"){switch(Va(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Sa(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ea(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ui(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return ua(e,(e,n)=>{s[e]=this.convertValue(n,t)}),s}convertVectorValue(e){const t=e.fields?.[Fa].arrayValue?.values?.map(e=>Sa(e.doubleValue));return new Bh(t)}convertGeoPoint(e){return new Vh(Sa(e.latitude),Sa(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=ka(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Aa(e));default:return null}}convertTimestamp(e){const t=Na(e);return new Qi(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Mi.fromString(e);pi(Oc(s),9688,{name:e});const n=new Ra(s.get(1),s.get(3)),r=new Fi(s.popFirst(5));return n.isEqual(t)||li(`Document ${r} contains a document reference within a different database (${n.projectId}/${n.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),r}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vp(e,t,s){let n;return n=e?s&&(s.merge||s.mergeFields)?e.toFirestore(t,s):e.toFirestore(t):t,n}class bp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wp extends ip{constructor(e,t,s,n,r,i){super(e,t,s,n,i),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Np(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(op("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new gi(fi.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=wp._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}wp._jsonSchemaVersion="firestore/documentSnapshot/1.0",wp._jsonSchema={type:Wi("string",wp._jsonSchemaVersion),bundleSource:Wi("string","DocumentSnapshot"),bundleName:Wi("string"),bundle:Wi("string")};class Np extends wp{data(e={}){return super.data(e)}}class Sp{constructor(e,t,s,n){this._firestore=e,this._userDataWriter=t,this._snapshot=n,this.metadata=new bp(n.hasPendingWrites,n.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new Np(this._firestore,this._userDataWriter,s.key,s,new bp(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new gi(fi.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(s=>{const n=new Np(e._firestore,e._userDataWriter,s.doc.key,s.doc,new bp(e._snapshot.mutatedKeys.has(s.doc.key),e._snapshot.fromCache),e.query.converter);return s.doc,{type:"added",doc:n,oldIndex:-1,newIndex:t++}})}{let s=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const n=new Np(e._firestore,e._userDataWriter,t.doc.key,t.doc,new bp(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let r=-1,i=-1;return 0!==t.type&&(r=s.indexOf(t.doc.key),s=s.delete(t.doc.key)),1!==t.type&&(s=s.add(t.doc),i=s.indexOf(t.doc.key)),{type:Ep(t.type),doc:n,oldIndex:r,newIndex:i}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new gi(fi.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Sp._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=_i.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],n=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),s.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),n.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Ep(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ui(61501,{type:e})}}Sp._jsonSchemaVersion="firestore/querySnapshot/1.0",Sp._jsonSchema={type:Wi("string",Sp._jsonSchemaVersion),bundleSource:Wi("string","QuerySnapshot"),bundleName:Wi("string"),bundle:Wi("string")};class jp extends xp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dh(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ih(this.firestore,null,t)}}function Tp(e){e=Hi(e,_h);const t=Hi(e.firestore,Lh),s=Mh(t),n=new jp(t);return function(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new gi(fi.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(e._query),vh(s,e._query).then(s=>new Sp(t,n,e,s))}function _p(e,t,s){e=Hi(e,Ih);const n=Hi(e.firestore,Lh),r=vp(e.converter,t,s);return Ip(n,[Kh(Gh(n),"setDoc",e._key,r,null!==e.converter,s).toMutation(e._key,Nl.none())])}function Ip(e,t){return function(e,t){const s=new yi;return e.asyncQueue.enqueueAndForget(async()=>Wu(await function(e){return yh(e).then(e=>e.syncEngine)}(e),t,s)),s.promise}(Mh(e),t)}!function(e,t=!0){ri=wt,gt(new ae("firestore",(e,{instanceIdentifier:s,options:n})=>{const r=e.getProvider("app").getImmediate(),i=new Lh(new wi(e.getProvider("auth-internal")),new ji(r,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new gi(fi.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ra(e.options.projectId,t)}(r,s),r);return n={useFetchStreams:t,...n},i._setSettings(n),i},"PUBLIC").setMultipleInstances(!0)),Et(ti,si,e),Et(ti,si,"esm2020")}();const Cp="@firebase/installations",kp="0.6.19",Ap=1e4,Pp=`w:${kp}`,Op="FIS_v2",Rp=36e5,Lp=new Y("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Mp(e){return e instanceof K&&e.code.includes("request-failed")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp({projectId:e}){return`https://firebaseinstallations.googleapis.com/v1/projects/${e}/installations`}function Up(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function Fp(e,t){const s=(await t.json()).error;return Lp.create("request-failed",{requestName:e,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function Vp({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function Bp(e,{refreshToken:t}){const s=Vp(e);return s.append("Authorization",function(e){return`${Op} ${e}`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)),s}async function zp(e){const t=await e();return t.status>=500&&t.status<600?e():t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function qp(e){return new Promise(t=>{setTimeout(t,e)})}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const $p=/^[cdef][\w-]{21}$/;function Hp(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(s=e,btoa(String.fromCharCode(...s)).replace(/\+/g,"-").replace(/\//g,"_"));var s;return t.substr(0,22)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e);return $p.test(t)?t:""}catch{return""}}function Wp(e){return`${e.appName}!${e.appId}`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gp=new Map;function Kp(e,t){const s=Wp(e);Yp(s,t),function(e,t){const s=function(){!Qp&&"BroadcastChannel"in self&&(Qp=new BroadcastChannel("[Firebase] FID Change"),Qp.onmessage=e=>{Yp(e.data.key,e.data.fid)});return Qp}();s&&s.postMessage({key:e,fid:t});0===Gp.size&&Qp&&(Qp.close(),Qp=null)}(s,t)}function Yp(e,t){const s=Gp.get(e);if(s)for(const n of s)n(t)}let Qp=null;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Xp="firebase-installations-store";let Jp=null;function Zp(){return Jp||(Jp=Ce("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Xp)}})),Jp}async function em(e,t){const s=Wp(e),n=(await Zp()).transaction(Xp,"readwrite"),r=n.objectStore(Xp),i=await r.get(s);return await r.put(t,s),await n.done,i&&i.fid===t.fid||Kp(e,t.fid),t}async function tm(e){const t=Wp(e),s=(await Zp()).transaction(Xp,"readwrite");await s.objectStore(Xp).delete(t),await s.done}async function sm(e,t){const s=Wp(e),n=(await Zp()).transaction(Xp,"readwrite"),r=n.objectStore(Xp),i=await r.get(s),a=t(i);return void 0===a?await r.delete(s):await r.put(a,s),await n.done,!a||i&&i.fid===a.fid||Kp(e,a.fid),a}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nm(e){let t;const s=await sm(e.appConfig,s=>{const n=function(e){const t=e||{fid:Hp(),registrationStatus:0};return am(t)}(s),r=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(Lp.create("app-offline"))}}const s={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},n=async function(e,t){try{const s=await async function({appConfig:e,heartbeatServiceProvider:t},{fid:s}){const n=Dp(e),r=Vp(e),i=t.getImmediate({optional:!0});if(i){const e=await i.getHeartbeatsHeader();e&&r.append("x-firebase-client",e)}const a={fid:s,authVersion:Op,appId:e.appId,sdkVersion:Pp},o={method:"POST",headers:r,body:JSON.stringify(a)},l=await zp(()=>fetch(n,o));if(l.ok){const e=await l.json();return{fid:e.fid||s,registrationStatus:2,refreshToken:e.refreshToken,authToken:Up(e.authToken)}}throw await Fp("Create Installation",l)}(e,t);return em(e.appConfig,s)}catch(s){throw Mp(s)&&409===s.customData.serverCode?await tm(e.appConfig):await em(e.appConfig,{fid:t.fid,registrationStatus:0}),s}}(e,s);return{installationEntry:s,registrationPromise:n}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:rm(e)}:{installationEntry:t}}(e,n);return t=r.registrationPromise,r.installationEntry});return""===s.fid?{installationEntry:await t}:{installationEntry:s,registrationPromise:t}}async function rm(e){let t=await im(e.appConfig);for(;1===t.registrationStatus;)await qp(100),t=await im(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:s}=await nm(e);return s||t}return t}function im(e){return sm(e,e=>{if(!e)throw Lp.create("installation-not-found");return am(e)})}function am(e){return 1===(t=e).registrationStatus&&t.registrationTime+Ap<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}async function om({appConfig:e,heartbeatServiceProvider:t},s){const n=function(e,{fid:t}){return`${Dp(e)}/${t}/authTokens:generate`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,s),r=Bp(e,s),i=t.getImmediate({optional:!0});if(i){const e=await i.getHeartbeatsHeader();e&&r.append("x-firebase-client",e)}const a={installation:{sdkVersion:Pp,appId:e.appId}},o={method:"POST",headers:r,body:JSON.stringify(a)},l=await zp(()=>fetch(n,o));if(l.ok){return Up(await l.json())}throw await Fp("Generate Auth Token",l)}async function lm(e,t=!1){let s;const n=await sm(e.appConfig,n=>{if(!dm(n))throw Lp.create("not-registered");const r=n.authToken;if(!t&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Rp}(e)}(r))return n;if(1===r.requestStatus)return s=async function(e,t){let s=await cm(e.appConfig);for(;1===s.authToken.requestStatus;)await qp(100),s=await cm(e.appConfig);const n=s.authToken;return 0===n.requestStatus?lm(e,t):n}(e,t),n;{if(!navigator.onLine)throw Lp.create("app-offline");const t=function(e){const t={requestStatus:1,requestTime:Date.now()};return{...e,authToken:t}}(n);return s=async function(e,t){try{const s=await om(e,t),n={...t,authToken:s};return await em(e.appConfig,n),s}catch(s){if(!Mp(s)||401!==s.customData.serverCode&&404!==s.customData.serverCode){const s={...t,authToken:{requestStatus:0}};await em(e.appConfig,s)}else await tm(e.appConfig);throw s}}(e,t),t}});return s?await s:n.authToken}function cm(e){return sm(e,e=>{if(!dm(e))throw Lp.create("not-registered");const t=e.authToken;return 1===(s=t).requestStatus&&s.requestTime+Ap<Date.now()?{...e,authToken:{requestStatus:0}}:e;var s;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */})}function dm(e){return void 0!==e&&2===e.registrationStatus}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function um(e,t=!1){const s=e;await async function(e){const{registrationPromise:t}=await nm(e);t&&await t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(s);return(await lm(s,t)).token}function hm(e){return Lp.create("missing-app-config-values",{valueName:e})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm="installations",mm=e=>{const t=yt(e.getProvider("app").getImmediate(),pm).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:s,registrationPromise:n}=await nm(t);return n?n.catch(console.error):lm(t).catch(console.error),s.fid}(t),getToken:e=>um(t,e)}};gt(new ae(pm,e=>{const t=e.getProvider("app").getImmediate(),s=function(e){if(!e||!e.options)throw hm("App Configuration");if(!e.name)throw hm("App Name");const t=["projectId","apiKey","appId"];for(const s of t)if(!e.options[s])throw hm(s);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:s,heartbeatServiceProvider:yt(t,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),gt(new ae("installations-internal",mm,"PRIVATE")),Et(Cp,kp),Et(Cp,kp,"esm2020");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const fm="analytics",gm="https://www.googletagmanager.com/gtag/js",ym=new ge("@firebase/analytics"),xm=new Y("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function vm(e){if(!e.startsWith(gm)){const t=xm.create("invalid-gtag-resource",{gtagURL:e});return ym.warn(t.message),""}return e}function bm(e){return Promise.all(e.map(e=>e.catch(e=>e)))}function wm(e,t){const s=function(e,t){let s;return window.trustedTypes&&(s=window.trustedTypes.createPolicy(e,t)),s}("firebase-js-sdk-policy",{createScriptURL:vm}),n=document.createElement("script"),r=`${gm}?l=${e}&id=${t}`;n.src=s?s?.createScriptURL(r):r,n.async=!0,document.head.appendChild(n)}function Nm(e,t,s,n){return async function(r,...i){try{if("event"===r){const[n,r]=i;await async function(e,t,s,n,r){try{let i=[];if(r&&r.send_to){let e=r.send_to;Array.isArray(e)||(e=[e]);const n=await bm(s);for(const s of e){const e=n.find(e=>e.measurementId===s),r=e&&t[e.appId];if(!r){i=[];break}i.push(r)}}0===i.length&&(i=Object.values(t)),await Promise.all(i),e("event",n,r||{})}catch(i){ym.error(i)}}(e,t,s,n,r)}else if("config"===r){const[r,a]=i;await async function(e,t,s,n,r,i){const a=n[r];try{if(a)await t[a];else{const e=(await bm(s)).find(e=>e.measurementId===r);e&&await t[e.appId]}}catch(o){ym.error(o)}e("config",r,i)}(e,t,s,n,r,a)}else if("consent"===r){const[t,s]=i;e("consent",t,s)}else if("get"===r){const[t,s,n]=i;e("get",t,s,n)}else if("set"===r){const[t]=i;e("set",t)}else e(r,...i)}catch(a){ym.error(a)}}}const Sm=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Em(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function jm(e,t=Sm,s){const{appId:n,apiKey:r,measurementId:i}=e.options;if(!n)throw xm.create("no-app-id");if(!r){if(i)return{measurementId:i,appId:n};throw xm.create("no-api-key")}const a=t.getThrottleMetadata(n)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new _m;return setTimeout(async()=>{o.abort()},6e4),Tm({appId:n,apiKey:r,measurementId:i},a,o,t)}async function Tm(e,{throttleEndTimeMillis:t,backoffCount:s},n,r=Sm){const{appId:i,measurementId:a}=e;try{await function(e,t){return new Promise((s,n)=>{const r=Math.max(t-Date.now(),0),i=setTimeout(s,r);e.addEventListener(()=>{clearTimeout(i),n(xm.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}(n,t)}catch(o){if(a)return ym.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${o?.message}]`),{appId:i,measurementId:a};throw o}try{const t=await async function(e){const{appId:t,apiKey:s}=e,n={method:"GET",headers:Em(s)},r="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",t),i=await fetch(r,n);if(200!==i.status&&304!==i.status){let e="";try{const t=await i.json();t.error?.message&&(e=t.error.message)}catch(a){}throw xm.create("config-fetch-failed",{httpStatus:i.status,responseMessage:e})}return i.json()}(e);return r.deleteThrottleMetadata(i),t}catch(o){const t=o;if(!function(e){if(!(e instanceof K&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(t)){if(r.deleteThrottleMetadata(i),a)return ym.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${t?.message}]`),{appId:i,measurementId:a};throw o}const l=503===Number(t?.customData?.httpStatus)?re(s,r.intervalMillis,30):re(s,r.intervalMillis),c={throttleEndTimeMillis:Date.now()+l,backoffCount:s+1};return r.setThrottleMetadata(i,c),ym.debug(`Calling attemptFetch again in ${l} millis`),Tm(e,c,n,r)}}class _m{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function Im(e,t,s,n,r,i,a){const o=jm(e);o.then(t=>{s[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&ym.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(e=>ym.error(e)),t.push(o);const l=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(){if(!W())return ym.warn(xm.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await G()}catch(e){return ym.warn(xm.create("indexeddb-unavailable",{errorInfo:e?.toString()}).message),!1}return!0}().then(e=>e?n.getId():void 0),[c,d]=await Promise.all([o,l]);(function(e){const t=window.document.getElementsByTagName("script");for(const s of Object.values(t))if(s.src&&s.src.includes(gm)&&s.src.includes(e))return s;return null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)(i)||wm(i,c.measurementId),r("js",new Date);const u=a?.config??{};return u.origin="firebase",u.update=!0,null!=d&&(u.firebase_id=d),r("config",c.measurementId,u),c.measurementId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e){this.app=e}_delete(){return delete km[this.app.options.appId],Promise.resolve()}}let km={},Am=[];const Pm={};let Om,Rm,Lm="dataLayer",Mm=!1;function Dm(){const e=[];if($()&&e.push("This is a browser extension environment."),"undefined"!=typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map((e,t)=>`(${t+1}) ${e}`).join(" "),s=xm.create("invalid-analytics-context",{errorInfo:t});ym.warn(s.message)}}function Um(e,t,s){Dm();const n=e.options.appId;if(!n)throw xm.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw xm.create("no-api-key");ym.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=km[n])throw xm.create("already-exists",{id:n});if(!Mm){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Lm);const{wrappedGtag:e,gtagCore:t}=function(e,t,s,n,r){let i=function(...e){window[n].push(arguments)};return window[r]&&"function"==typeof window[r]&&(i=window[r]),window[r]=Nm(i,e,t,s),{gtagCore:i,wrappedGtag:window[r]}}(km,Am,Pm,Lm,"gtag");Rm=e,Om=t,Mm=!0}km[n]=Im(e,Am,Pm,t,Om,Lm,s);return new Cm(e)}const Fm="@firebase/analytics",Vm="0.10.18";gt(new ae(fm,(e,{options:t})=>Um(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),gt(new ae("analytics-internal",function(e){try{const t=e.getProvider(fm).getImmediate();return{logEvent:(e,s,n)=>function(e,t,s,n){e=ie(e),async function(e,t,s,n,r){if(r&&r.global)e("event",s,n);else{const r=await t;e("event",s,{...n,send_to:r})}}(Rm,km[e.app.options.appId],t,s,n).catch(e=>ym.error(e))}(t,e,s,n)}}catch(t){throw xm.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),Et(Fm,Vm),Et(Fm,Vm,"esm2020");const Bm=Nt({apiKey:"AIzaSyCTrU2IATfepLZ7tjn5HVSWW6PKKPpcRgg",authDomain:"svasam-a94e1.firebaseapp.com",projectId:"svasam-a94e1",storageBucket:"svasam-a94e1.firebasestorage.app",messagingSenderId:"857788126873",appId:"1:857788126873:web:dea096fcd1f7b9f1978a08",measurementId:"G-QW8YP54GS3"}),zm=function(e=St()){const t=yt(e,"auth");if(t.isInitialized())return t.getImmediate();const s=function(e,t){const s=yt(e,"auth");if(s.isInitialized()){const e=s.getImmediate();if(X(s.getOptions(),t??{}))return e;Vt(e,"already-initialized")}return s.initialize({options:t})}(e,{popupRedirectResolver:Mr,persistence:[Xn,Rn,Mn]}),n=M("authTokenSyncURL");if(n&&"boolean"==typeof isSecureContext&&isSecureContext){const e=new URL(n,location.origin);if(location.origin===e.origin){const t=(r=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),s=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>Vr)return;const n=t?.token;Br!==n&&(Br=n,await fetch(r,{method:n?"POST":"DELETE",headers:n?{Authorization:`Bearer ${n}`}:{}}))});!function(e,t,s){ie(e).beforeAuthStateChanged(t,s)}(s,t,()=>t(s.currentUser)),function(e,t,s,n){ie(e).onIdTokenChanged(t,s,n)}(s,e=>t(e))}}var r;const i=R("auth");return i&&nn(s,`http://${i}`),s}(Bm),qm=function(e){const t="object"==typeof e?e:St(),s="string"==typeof e?e:Oa,n=yt(t,"firestore").getImmediate({identifier:s});if(!n._initialized){const e=(e=>{const t=R(e);if(!t)return;const s=t.lastIndexOf(":");if(s<=0||s+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(s+1),10);return"["===t[0]?[t.substring(1,s-1),n]:[t.substring(0,s),n]})("firestore");e&&Th(n,...e)}return n}(Bm);!function(e=St()){const t=yt(e=ie(e),fm);t.isInitialized()?t.getImmediate():function(e,t={}){const s=yt(e,fm);if(s.isInitialized()){const e=s.getImmediate();if(X(t,s.getOptions()))return e;throw xm.create("already-initialized")}const n=s.initialize({options:t})}(e)}(Bm);const $m=async(e,t,s,n)=>{try{console.log("Starting signup process for:",t);const a=await async function(e,t,s){if(xt(e.app))return Promise.reject(qt(e));const n=Gs(e),r=sn(n,{returnSecureToken:!0,email:t,password:s,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Nn),i=await r.catch(t=>{throw"auth/password-does-not-meet-requirements"===t.code&&In(e),t}),a=await Sn._fromIdTokenResponse(n,"signIn",i);return await n._updateCurrentUser(a.user),a}(zm,t,s),o=a.user;console.log("User created in Auth:",o.uid);try{await kn(o,{displayName:e}),console.log("User profile updated with display name");const s={uid:o.uid,name:e,email:t,mobile:n,createdAt:(new Date).toISOString(),role:"user",emailVerified:o.emailVerified};return await _p(Ah(qm,"users",o.uid),s),console.log("User data saved to Firestore"),{success:!0,user:{uid:o.uid,email:o.email,displayName:e,...s}}}catch(r){console.error("Error in user setup:",r);try{await o.delete(),console.log("Cleaned up auth user due to failure")}catch(i){console.error("Error cleaning up auth user:",i)}throw r}}catch(a){return console.error("Signup error:",{code:a.code,message:a.message,name:a.name,stack:a.stack}),{success:!1,error:a.code||"auth/unknown-error",message:a.message}}},Hm=async()=>{try{return await(e=zm,ie(e).signOut()),{success:!0}}catch(t){return{success:!1,error:t.message}}var e},Wm=async e=>{try{return await async function(e,t){const s=Gs(e),n={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};await sn(s,n,"getOobCode",dn)}(zm,e),{success:!0}}catch(t){return{success:!1,error:t.message}}},Gm=new vn,Km=new xn,Ym=async()=>{try{const e=(await ir(zm,Gm)).user;return await _p(Ah(qm,"users",e.uid),{uid:e.uid,name:e.displayName||"",email:e.email||"",mobile:"",photoURL:e.photoURL||"",provider:"google",emailVerified:e.emailVerified,updatedAt:(new Date).toISOString()},{merge:!0}),{success:!0,user:e}}catch(e){}},Qm=async()=>{try{const e=(await ir(zm,Km)).user;return await _p(Ah(qm,"users",e.uid),{uid:e.uid,name:e.displayName||"",email:e.email||"",mobile:"",photoURL:e.photoURL||"",provider:"facebook",emailVerified:e.emailVerified,updatedAt:(new Date).toISOString()},{merge:!0}),{success:!0,user:e}}catch(e){return{success:!1,error:e.code||e.message}}},Xm=n.createContext();function Jm({children:e}){const[t,s]=n.useState(null),[r,i]=n.useState(!0);n.useEffect(()=>zm.onAuthStateChanged(e=>{s(e),i(!1)}),[]);const a={user:t,setUser:s,loading:r};return b.jsx(Xm.Provider,{value:a,children:!r&&e})}const Zm={},ef=(e,t,s,n)=>{rf(s)&&Zm[s]||(rf(s)&&(Zm[s]=new Date),((e,t,s,n)=>{const r=[s,{code:t,...n||{}}];if(e?.services?.logger?.forward)return e.services.logger.forward(r,"warn","react-i18next::",!0);rf(r[0])&&(r[0]=`react-i18next:: ${r[0]}`),e?.services?.logger?.warn?e.services.logger.warn(...r):console?.warn&&console.warn(...r)})(e,t,s,n))},tf=(e,t)=>()=>{if(e.isInitialized)t();else{const s=()=>{setTimeout(()=>{e.off("initialized",s)},0),t()};e.on("initialized",s)}},sf=(e,t,s)=>{e.loadNamespaces(t,tf(e,s))},nf=(e,t,s,n)=>{if(rf(s)&&(s=[s]),e.options.preload&&e.options.preload.indexOf(t)>-1)return sf(e,s,n);s.forEach(t=>{e.options.ns.indexOf(t)<0&&e.options.ns.push(t)}),e.loadLanguages(t,tf(e,n))},rf=e=>"string"==typeof e,af=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,of={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},lf=e=>of[e];let cf={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:e=>e.replace(af,lf)};const df=n.createContext();class uf{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(e=>{this.usedNamespaces[e]||(this.usedNamespaces[e]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var hf,pf,mf={exports:{}},ff={};var gf=(pf||(pf=1,mf.exports=function(){if(hf)return ff;hf=1;var t=e(),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=t.useState,r=t.useEffect,i=t.useLayoutEffect,a=t.useDebugValue;function o(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!s(e,n)}catch(r){return!0}}var l="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var s=t(),l=n({inst:{value:s,getSnapshot:t}}),c=l[0].inst,d=l[1];return i(function(){c.value=s,c.getSnapshot=t,o(c)&&d({inst:c})},[e,s,t]),r(function(){return o(c)&&d({inst:c}),e(function(){o(c)&&d({inst:c})})},[e]),a(s),s};return ff.useSyncExternalStore=void 0!==t.useSyncExternalStore?t.useSyncExternalStore:l,ff}()),mf.exports);const yf={t:(e,t)=>{return rf(t)?t:"object"==typeof(s=t)&&null!==s&&rf(t.defaultValue)?t.defaultValue:Array.isArray(e)?e[e.length-1]:e;var s},ready:!1},xf=()=>()=>{},vf=(e,t={})=>{const{i18n:s}=t,{i18n:r,defaultNS:i}=n.useContext(df)||{},a=s||r||void 0;a&&!a.reportNamespaces&&(a.reportNamespaces=new uf),a||ef(a,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const o=n.useMemo(()=>({...cf,...a?.options?.react,...t}),[a,t]),{useSuspense:l,keyPrefix:c}=o,d=n.useMemo(()=>{const e=i||a?.options?.defaultNS;return rf(e)?[e]:e||["translation"]},[e,i,a]);a?.reportNamespaces?.addUsedNamespaces?.(d);const u=n.useRef(0),h=n.useCallback(e=>{if(!a)return xf;const{bindI18n:t,bindI18nStore:s}=o,n=()=>{u.current+=1,e()};return t&&a.on(t,n),s&&a.store.on(s,n),()=>{t&&t.split(" ").forEach(e=>a.off(e,n)),s&&s.split(" ").forEach(e=>a.store.off(e,n))}},[a,o]),p=n.useRef(),m=n.useCallback(()=>{if(!a)return yf;const e=!(!a.isInitialized&&!a.initializedStoreOnce)&&d.every(e=>((e,t,s={})=>t.languages&&t.languages.length?t.hasLoadedNamespace(e,{lng:s.lng,precheck:(t,n)=>{if(s.bindI18n&&s.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!n(t.isLanguageChangingTo,e))return!1}}):(ef(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0))(e,a,o)),s=t.lng||a.language,n=u.current,r=p.current;if(r&&r.ready===e&&r.lng===s&&r.keyPrefix===c&&r.revision===n)return r;const i={t:a.getFixedT(s,"fallback"===o.nsMode?d:d[0],c),ready:e,lng:s,keyPrefix:c,revision:n};return p.current=i,i},[a,d,c,o,t.lng]),[f,g]=n.useState(0),{t:y,ready:x}=gf.useSyncExternalStore(h,m,m);n.useEffect(()=>{if(a&&!x&&!l){const e=()=>g(e=>e+1);t.lng?nf(a,t.lng,d,e):sf(a,d,e)}},[a,t.lng,d,x,l,f]);const v=a||{},b=n.useRef(null),w=n.useRef(),N=e=>{const t=Object.getOwnPropertyDescriptors(e);t.__original&&delete t.__original;const s=Object.create(Object.getPrototypeOf(e),t);if(!Object.prototype.hasOwnProperty.call(s,"__original"))try{Object.defineProperty(s,"__original",{value:e,writable:!1,enumerable:!1,configurable:!1})}catch(n){}return s},S=n.useMemo(()=>{const e=v,t=e?.language;let s=e;e&&(b.current&&b.current.__original===e?w.current!==t?(s=N(e),b.current=s,w.current=t):s=b.current:(s=N(e),b.current=s,w.current=t));const n=[y,s,x];return n.t=y,n.i18n=s,n.ready=x,n},[y,v,x,v.resolvedLanguage,v.language,v.languages]);if(a&&l&&!x)throw new Promise(e=>{const s=()=>e();t.lng?nf(a,t.lng,d,s):sf(a,d,s)});return S};function bf({title:e,titleId:t,...s},r){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?n.createElement("title",{id:t},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h14"}))}const wf=n.forwardRef(bf);function Nf({title:e,titleId:t,...s},r){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?n.createElement("title",{id:t},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const Sf=n.forwardRef(Nf);function Ef({title:e,titleId:t,...s},r){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?n.createElement("title",{id:t},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 10.5V6a3.75 3.75 0 1 0-7.5 0v4.5m11.356-1.993 1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 0 1-1.12-1.243l1.264-12A1.125 1.125 0 0 1 5.513 7.5h12.974c.576 0 1.059.435 1.119 1.007ZM8.625 10.5a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm7.5 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const jf=n.forwardRef(Ef);function Tf({title:e,titleId:t,...s},r){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?n.createElement("title",{id:t},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const _f=n.forwardRef(Tf),If=()=>{const{itemCount:e,setIsOpen:t}=j();return b.jsx("div",{className:"relative",children:b.jsxs("button",{onClick:()=>t(!0),className:"p-2 text-gray-400 hover:text-gray-500 relative",children:[b.jsx("span",{className:"sr-only",children:"Cart"}),b.jsx(jf,{className:"h-6 w-6","aria-hidden":"true"}),e>0&&b.jsx("span",{className:"absolute -top-1 -right-1 flex h-5 w-5 items-center justify-center rounded-full bg-main text-xs font-medium text-white",children:e>9?"9+":e})]})})};function Cf(){const{t:e}=vf(),{user:t,setUser:s}=n.useContext(Xm),[a,o]=n.useState(!1),l=r();n.useEffect(()=>{const e=zm.onAuthStateChanged(e=>{s(e)});return()=>e()},[]);const c=async()=>{await Hm(),s(null),l(window.location.pathname),window.location.reload()};return b.jsxs(b.Fragment,{children:[b.jsxs("nav",{className:"bg-background shadow px-4 sm:px-6 py-3 sm:py-4 flex items-center sticky top-0 z-50",children:[b.jsx("div",{className:"flex items-center gap-2",children:b.jsxs(i,{to:"/",className:"flex items-center gap-2","aria-label":"Svasam Home",children:[b.jsx("img",{src:"/assets/Logo-BnED6uQw.png",alt:"Svasam Logo",className:"h-8 w-8 sm:h-10 sm:w-10"}),b.jsx("span",{className:"text-xl sm:text-2xl font-bold text-main",children:"Svasam"})]})}),b.jsxs("ul",{className:"hidden md:flex gap-4 lg:gap-6 font-medium text-accent flex-1 justify-center",children:[b.jsxs("li",{className:"relative group",children:[b.jsxs("button",{className:"flex items-center gap-1 hover:text-main transition font-semibold focus:outline-none",children:["Categories",b.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})]}),b.jsx("div",{className:"absolute left-0 mt-3 w-48 bg-gradient-to-br from-background to-white rounded-xl shadow-2xl border border-accent opacity-0 invisible group-hover:visible group-hover:opacity-100 pointer-events-none group-hover:pointer-events-auto transform scale-95 group-hover:scale-100 transition-all duration-200 z-50",children:b.jsxs("div",{className:"py-2",children:[b.jsx(i,{to:"/mind",className:"block px-5 py-2 rounded-lg text-main hover:bg-accent hover:text-background transition font-semibold",children:"Mind"}),b.jsx(i,{to:"/body",className:"block px-5 py-2 rounded-lg text-main hover:bg-accent hover:text-background transition font-semibold",children:"Body"}),b.jsx(i,{to:"/soul",className:"block px-5 py-2 rounded-lg text-main hover:bg-accent hover:text-background transition font-semibold",children:"Soul"})]})})]}),b.jsx("li",{children:b.jsx(i,{to:"/store",className:"hover:text-main transition font-semibold",children:"Spiritual Store"})}),b.jsx("li",{children:b.jsx(i,{to:"/sessions",className:"hover:text-main transition font-semibold",children:"Personal Sessions"})}),b.jsx("li",{children:b.jsx(i,{to:"/blog",className:"hover:text-main transition font-semibold",children:"Blog"})})]}),b.jsx("button",{className:"md:hidden p-2 rounded-lg hover:bg-accent/20 transition-colors",onClick:()=>o(!a),children:b.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:a?b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}):b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})})}),b.jsxs("div",{className:"hidden md:flex items-center gap-2 lg:gap-4",children:[b.jsx("div",{className:"relative",children:b.jsx(If,{})}),t?b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsxs("span",{className:"hidden lg:flex px-4 py-2 rounded-full bg-gradient-to-r from-purple-100 via-purple-200 to-blue-100 text-main font-semibold shadow border border-purple-200 text-sm",children:[b.jsx("svg",{className:"w-4 h-4 inline-block mr-1",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 11a3 3 0 11-6 0 3 3 0 016 0z"})}),t?.displayName||t?.email||"User"]}),b.jsx(i,{to:"/dashboard",className:"px-3 py-2 rounded-full bg-main text-white font-semibold shadow border border-main hover:brightness-105 transition text-sm",children:"Dashboard"}),b.jsx("button",{onClick:c,className:"px-3 py-2 rounded-full bg-main text-white font-semibold shadow border border-main hover:brightness-105 transition text-sm",children:"Logout"})]}):b.jsxs(i,{to:"/login",className:"hidden sm:flex items-center gap-2 px-4 py-2 rounded-full bg-main text-white font-semibold shadow-lg hover:shadow-xl hover:brightness-105 hover:-translate-y-0.5 transition-all duration-200 border border-main text-sm",children:[b.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 11a3 3 0 11-6 0 3 3 0 016 0z"})}),b.jsx("span",{className:"hidden lg:inline",children:"My Sessions"}),b.jsx("span",{className:"lg:hidden",children:"Login"})]})]})]}),a&&b.jsx("div",{className:"md:hidden bg-background border-t border-accent/20 shadow-lg",children:b.jsxs("div",{className:"px-4 py-2 space-y-1",children:[b.jsxs("div",{className:"py-2",children:[b.jsx("p",{className:"text-xs font-semibold text-accent/60 uppercase tracking-wider mb-2",children:"Categories"}),b.jsxs("div",{className:"space-y-1 pl-2",children:[b.jsx(i,{to:"/mind",className:"block px-3 py-2 rounded-lg text-main hover:bg-accent/20 transition font-medium",children:"Mind"}),b.jsx(i,{to:"/body",className:"block px-3 py-2 rounded-lg text-main hover:bg-accent/20 transition font-medium",children:"Body"}),b.jsx(i,{to:"/soul",className:"block px-3 py-2 rounded-lg text-main hover:bg-accent/20 transition font-medium",children:"Soul"})]})]}),b.jsx(i,{to:"/store",className:"block px-3 py-2 rounded-lg hover:bg-accent/20 transition font-medium",children:"Svasam Store"}),b.jsx(i,{to:"/sessions",className:"block px-3 py-2 rounded-lg hover:bg-accent/20 transition font-medium",children:"Svasam Sessions"}),b.jsx(i,{to:"/blog",className:"block px-3 py-2 rounded-lg hover:bg-accent/20 transition font-medium",children:"Blog"}),b.jsxs("div",{className:"border-t border-accent/20 pt-2 mt-2",children:[b.jsxs(i,{to:"/cart",className:"flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-accent/20 transition font-medium",children:[b.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),"Cart"]}),t?b.jsxs("div",{className:"space-y-1",children:[b.jsx("div",{className:"px-3 py-2 text-sm text-accent",children:t?.displayName||t?.email||"User"}),b.jsx(i,{to:"/dashboard",className:"block px-3 py-2 rounded-lg bg-main text-white font-medium hover:brightness-105 transition",children:"Dashboard"}),b.jsx("button",{onClick:c,className:"w-full text-left px-3 py-2 rounded-lg bg-main text-white font-medium hover:brightness-105 transition",children:"Logout"})]}):b.jsx(i,{to:"/login",className:"block px-3 py-2 rounded-lg bg-main text-white font-medium hover:brightness-105 transition text-center",children:"Login / Register"})]})]})})]})}function kf({children:e}){const t=a(),[s,r]=n.useState(!0),[i,l]=n.useState(()=>zm.currentUser);return n.useEffect(()=>{const e=zm.onAuthStateChanged(e=>{l(e),r(!1)});return()=>e()},[]),s?b.jsx("div",{className:"min-h-[40vh] flex items-center justify-center text-gray-500 text-sm",children:"Checking authentication..."}):i?e:b.jsx(o,{to:"/login",state:{from:t.pathname},replace:!0})}function Af(){const{pathname:e}=a();return n.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"instant"})},[e]),null}function Pf(e,t){return function(){return e.apply(t,arguments)}}const{toString:Of}=Object.prototype,{getPrototypeOf:Rf}=Object,{iterator:Lf,toStringTag:Mf}=Symbol,Df=(e=>t=>{const s=Of.call(t);return e[s]||(e[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),Uf=e=>(e=e.toLowerCase(),t=>Df(t)===e),Ff=e=>t=>typeof t===e,{isArray:Vf}=Array,Bf=Ff("undefined");function zf(e){return null!==e&&!Bf(e)&&null!==e.constructor&&!Bf(e.constructor)&&Hf(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const qf=Uf("ArrayBuffer");const $f=Ff("string"),Hf=Ff("function"),Wf=Ff("number"),Gf=e=>null!==e&&"object"==typeof e,Kf=e=>{if("object"!==Df(e))return!1;const t=Rf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Mf in e||Lf in e)},Yf=Uf("Date"),Qf=Uf("File"),Xf=Uf("Blob"),Jf=Uf("FileList"),Zf=Uf("URLSearchParams"),[eg,tg,sg,ng]=["ReadableStream","Request","Response","Headers"].map(Uf);function rg(e,t,{allOwnKeys:s=!1}={}){if(null==e)return;let n,r;if("object"!=typeof e&&(e=[e]),Vf(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{if(zf(e))return;const r=s?Object.getOwnPropertyNames(e):Object.keys(e),i=r.length;let a;for(n=0;n<i;n++)a=r[n],t.call(null,e[a],a,e)}}function ig(e,t){if(zf(e))return null;t=t.toLowerCase();const s=Object.keys(e);let n,r=s.length;for(;r-- >0;)if(n=s[r],t===n.toLowerCase())return n;return null}const ag="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,og=e=>!Bf(e)&&e!==ag;const lg=(e=>t=>e&&t instanceof e)("undefined"!=typeof Uint8Array&&Rf(Uint8Array)),cg=Uf("HTMLFormElement"),dg=(({hasOwnProperty:e})=>(t,s)=>e.call(t,s))(Object.prototype),ug=Uf("RegExp"),hg=(e,t)=>{const s=Object.getOwnPropertyDescriptors(e),n={};rg(s,(s,r)=>{let i;!1!==(i=t(s,r,e))&&(n[r]=i||s)}),Object.defineProperties(e,n)};const pg=Uf("AsyncFunction"),mg=(fg="function"==typeof setImmediate,gg=Hf(ag.postMessage),fg?setImmediate:gg?(yg=`axios@${Math.random()}`,xg=[],ag.addEventListener("message",({source:e,data:t})=>{e===ag&&t===yg&&xg.length&&xg.shift()()},!1),e=>{xg.push(e),ag.postMessage(yg,"*")}):e=>setTimeout(e));var fg,gg,yg,xg;const vg="undefined"!=typeof queueMicrotask?queueMicrotask.bind(ag):"undefined"!=typeof process&&process.nextTick||mg,bg={isArray:Vf,isArrayBuffer:qf,isBuffer:zf,isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||Hf(e.append)&&("formdata"===(t=Df(e))||"object"===t&&Hf(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&qf(e.buffer),t},isString:$f,isNumber:Wf,isBoolean:e=>!0===e||!1===e,isObject:Gf,isPlainObject:Kf,isEmptyObject:e=>{if(!Gf(e)||zf(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(t){return!1}},isReadableStream:eg,isRequest:tg,isResponse:sg,isHeaders:ng,isUndefined:Bf,isDate:Yf,isFile:Qf,isBlob:Xf,isRegExp:ug,isFunction:Hf,isStream:e=>Gf(e)&&Hf(e.pipe),isURLSearchParams:Zf,isTypedArray:lg,isFileList:Jf,forEach:rg,merge:function e(){const{caseless:t,skipUndefined:s}=og(this)&&this||{},n={},r=(r,i)=>{const a=t&&ig(n,i)||i;Kf(n[a])&&Kf(r)?n[a]=e(n[a],r):Kf(r)?n[a]=e({},r):Vf(r)?n[a]=r.slice():s&&Bf(r)||(n[a]=r)};for(let i=0,a=arguments.length;i<a;i++)arguments[i]&&rg(arguments[i],r);return n},extend:(e,t,s,{allOwnKeys:n}={})=>(rg(t,(t,n)=>{s&&Hf(t)?e[n]=Pf(t,s):e[n]=t},{allOwnKeys:n}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,s,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),s&&Object.assign(e.prototype,s)},toFlatObject:(e,t,s,n)=>{let r,i,a;const o={};if(t=t||{},null==e)return t;do{for(r=Object.getOwnPropertyNames(e),i=r.length;i-- >0;)a=r[i],n&&!n(a,e,t)||o[a]||(t[a]=e[a],o[a]=!0);e=!1!==s&&Rf(e)}while(e&&(!s||s(e,t))&&e!==Object.prototype);return t},kindOf:Df,kindOfTest:Uf,endsWith:(e,t,s)=>{e=String(e),(void 0===s||s>e.length)&&(s=e.length),s-=t.length;const n=e.indexOf(t,s);return-1!==n&&n===s},toArray:e=>{if(!e)return null;if(Vf(e))return e;let t=e.length;if(!Wf(t))return null;const s=new Array(t);for(;t-- >0;)s[t]=e[t];return s},forEachEntry:(e,t)=>{const s=(e&&e[Lf]).call(e);let n;for(;(n=s.next())&&!n.done;){const s=n.value;t.call(e,s[0],s[1])}},matchAll:(e,t)=>{let s;const n=[];for(;null!==(s=e.exec(t));)n.push(s);return n},isHTMLForm:cg,hasOwnProperty:dg,hasOwnProp:dg,reduceDescriptors:hg,freezeMethods:e=>{hg(e,(t,s)=>{if(Hf(e)&&-1!==["arguments","caller","callee"].indexOf(s))return!1;const n=e[s];Hf(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")}))})},toObjectSet:(e,t)=>{const s={},n=e=>{e.forEach(e=>{s[e]=!0})};return Vf(e)?n(e):n(String(e).split(t)),s},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,s){return t.toUpperCase()+s}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:ig,global:ag,isContextDefined:og,isSpecCompliantForm:function(e){return!!(e&&Hf(e.append)&&"FormData"===e[Mf]&&e[Lf])},toJSONObject:e=>{const t=new Array(10),s=(e,n)=>{if(Gf(e)){if(t.indexOf(e)>=0)return;if(zf(e))return e;if(!("toJSON"in e)){t[n]=e;const r=Vf(e)?[]:{};return rg(e,(e,t)=>{const i=s(e,n+1);!Bf(i)&&(r[t]=i)}),t[n]=void 0,r}}return e};return s(e,0)},isAsyncFn:pg,isThenable:e=>e&&(Gf(e)||Hf(e))&&Hf(e.then)&&Hf(e.catch),setImmediate:mg,asap:vg,isIterable:e=>null!=e&&Hf(e[Lf])};function wg(e,t,s,n,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),s&&(this.config=s),n&&(this.request=n),r&&(this.response=r,this.status=r.status?r.status:null)}bg.inherits(wg,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:bg.toJSONObject(this.config),code:this.code,status:this.status}}});const Ng=wg.prototype,Sg={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Sg[e]={value:e}}),Object.defineProperties(wg,Sg),Object.defineProperty(Ng,"isAxiosError",{value:!0}),wg.from=(e,t,s,n,r,i)=>{const a=Object.create(Ng);bg.toFlatObject(e,a,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);const o=e&&e.message?e.message:"Error",l=null==t&&e?e.code:t;return wg.call(a,o,l,s,n,r),e&&null==a.cause&&Object.defineProperty(a,"cause",{value:e,configurable:!0}),a.name=e&&e.name||"Error",i&&Object.assign(a,i),a};function Eg(e){return bg.isPlainObject(e)||bg.isArray(e)}function jg(e){return bg.endsWith(e,"[]")?e.slice(0,-2):e}function Tg(e,t,s){return e?e.concat(t).map(function(e,t){return e=jg(e),!s&&t?"["+e+"]":e}).join(s?".":""):t}const _g=bg.toFlatObject(bg,{},null,function(e){return/^is[A-Z]/.test(e)});function Ig(e,t,s){if(!bg.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const n=(s=bg.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!bg.isUndefined(t[e])})).metaTokens,r=s.visitor||c,i=s.dots,a=s.indexes,o=(s.Blob||"undefined"!=typeof Blob&&Blob)&&bg.isSpecCompliantForm(t);if(!bg.isFunction(r))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(bg.isDate(e))return e.toISOString();if(bg.isBoolean(e))return e.toString();if(!o&&bg.isBlob(e))throw new wg("Blob is not supported. Use a Buffer instead.");return bg.isArrayBuffer(e)||bg.isTypedArray(e)?o&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,s,r){let o=e;if(e&&!r&&"object"==typeof e)if(bg.endsWith(s,"{}"))s=n?s:s.slice(0,-2),e=JSON.stringify(e);else if(bg.isArray(e)&&function(e){return bg.isArray(e)&&!e.some(Eg)}(e)||(bg.isFileList(e)||bg.endsWith(s,"[]"))&&(o=bg.toArray(e)))return s=jg(s),o.forEach(function(e,n){!bg.isUndefined(e)&&null!==e&&t.append(!0===a?Tg([s],n,i):null===a?s:s+"[]",l(e))}),!1;return!!Eg(e)||(t.append(Tg(r,s,i),l(e)),!1)}const d=[],u=Object.assign(_g,{defaultVisitor:c,convertValue:l,isVisitable:Eg});if(!bg.isObject(e))throw new TypeError("data must be an object");return function e(s,n){if(!bg.isUndefined(s)){if(-1!==d.indexOf(s))throw Error("Circular reference detected in "+n.join("."));d.push(s),bg.forEach(s,function(s,i){!0===(!(bg.isUndefined(s)||null===s)&&r.call(t,s,bg.isString(i)?i.trim():i,n,u))&&e(s,n?n.concat(i):[i])}),d.pop()}}(e),t}function Cg(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function kg(e,t){this._pairs=[],e&&Ig(e,this,t)}const Ag=kg.prototype;function Pg(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Og(e,t,s){if(!t)return e;const n=s&&s.encode||Pg;bg.isFunction(s)&&(s={serialize:s});const r=s&&s.serialize;let i;if(i=r?r(t,s):bg.isURLSearchParams(t)?t.toString():new kg(t,s).toString(n),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}Ag.append=function(e,t){this._pairs.push([e,t])},Ag.toString=function(e){const t=e?function(t){return e.call(this,t,Cg)}:Cg;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};class Rg{constructor(){this.handlers=[]}use(e,t,s){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!s&&s.synchronous,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){bg.forEach(this.handlers,function(t){null!==t&&e(t)})}}const Lg={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Mg={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:kg,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Dg="undefined"!=typeof window&&"undefined"!=typeof document,Ug="object"==typeof navigator&&navigator||void 0,Fg=Dg&&(!Ug||["ReactNative","NativeScript","NS"].indexOf(Ug.product)<0),Vg="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,Bg=Dg&&window.location.href||"http://localhost",zg={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Dg,hasStandardBrowserEnv:Fg,hasStandardBrowserWebWorkerEnv:Vg,navigator:Ug,origin:Bg},Symbol.toStringTag,{value:"Module"})),...Mg};function qg(e){function t(e,s,n,r){let i=e[r++];if("__proto__"===i)return!0;const a=Number.isFinite(+i),o=r>=e.length;if(i=!i&&bg.isArray(n)?n.length:i,o)return bg.hasOwnProp(n,i)?n[i]=[n[i],s]:n[i]=s,!a;n[i]&&bg.isObject(n[i])||(n[i]=[]);return t(e,s,n[i],r)&&bg.isArray(n[i])&&(n[i]=function(e){const t={},s=Object.keys(e);let n;const r=s.length;let i;for(n=0;n<r;n++)i=s[n],t[i]=e[i];return t}(n[i])),!a}if(bg.isFormData(e)&&bg.isFunction(e.entries)){const s={};return bg.forEachEntry(e,(e,n)=>{t(function(e){return bg.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),n,s,0)}),s}return null}const $g={transitional:Lg,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const s=t.getContentType()||"",n=s.indexOf("application/json")>-1,r=bg.isObject(e);r&&bg.isHTMLForm(e)&&(e=new FormData(e));if(bg.isFormData(e))return n?JSON.stringify(qg(e)):e;if(bg.isArrayBuffer(e)||bg.isBuffer(e)||bg.isStream(e)||bg.isFile(e)||bg.isBlob(e)||bg.isReadableStream(e))return e;if(bg.isArrayBufferView(e))return e.buffer;if(bg.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(r){if(s.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Ig(e,new zg.classes.URLSearchParams,{visitor:function(e,t,s,n){return zg.isNode&&bg.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)},...t})}(e,this.formSerializer).toString();if((i=bg.isFileList(e))||s.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Ig(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return r||n?(t.setContentType("application/json",!1),function(e,t,s){if(bg.isString(e))try{return(t||JSON.parse)(e),bg.trim(e)}catch(n){if("SyntaxError"!==n.name)throw n}return(s||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||$g.transitional,s=t&&t.forcedJSONParsing,n="json"===this.responseType;if(bg.isResponse(e)||bg.isReadableStream(e))return e;if(e&&bg.isString(e)&&(s&&!this.responseType||n)){const s=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e,this.parseReviver)}catch(r){if(s){if("SyntaxError"===r.name)throw wg.from(r,wg.ERR_BAD_RESPONSE,this,null,this.response);throw r}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:zg.classes.FormData,Blob:zg.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};bg.forEach(["delete","get","head","post","put","patch"],e=>{$g.headers[e]={}});const Hg=bg.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Wg=Symbol("internals");function Gg(e){return e&&String(e).trim().toLowerCase()}function Kg(e){return!1===e||null==e?e:bg.isArray(e)?e.map(Kg):String(e)}function Yg(e,t,s,n,r){return bg.isFunction(n)?n.call(this,t,s):(r&&(t=s),bg.isString(t)?bg.isString(n)?-1!==t.indexOf(n):bg.isRegExp(n)?n.test(t):void 0:void 0)}let Qg=class{constructor(e){e&&this.set(e)}set(e,t,s){const n=this;function r(e,t,s){const r=Gg(t);if(!r)throw new Error("header name must be a non-empty string");const i=bg.findKey(n,r);(!i||void 0===n[i]||!0===s||void 0===s&&!1!==n[i])&&(n[i||t]=Kg(e))}const i=(e,t)=>bg.forEach(e,(e,s)=>r(e,s,t));if(bg.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(bg.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))i((e=>{const t={};let s,n,r;return e&&e.split("\n").forEach(function(e){r=e.indexOf(":"),s=e.substring(0,r).trim().toLowerCase(),n=e.substring(r+1).trim(),!s||t[s]&&Hg[s]||("set-cookie"===s?t[s]?t[s].push(n):t[s]=[n]:t[s]=t[s]?t[s]+", "+n:n)}),t})(e),t);else if(bg.isObject(e)&&bg.isIterable(e)){let s,n,r={};for(const t of e){if(!bg.isArray(t))throw TypeError("Object iterator must return a key-value pair");r[n=t[0]]=(s=r[n])?bg.isArray(s)?[...s,t[1]]:[s,t[1]]:t[1]}i(r,t)}else null!=e&&r(t,e,s);return this}get(e,t){if(e=Gg(e)){const s=bg.findKey(this,e);if(s){const e=this[s];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=s.exec(e);)t[n[1]]=n[2];return t}(e);if(bg.isFunction(t))return t.call(this,e,s);if(bg.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Gg(e)){const s=bg.findKey(this,e);return!(!s||void 0===this[s]||t&&!Yg(0,this[s],s,t))}return!1}delete(e,t){const s=this;let n=!1;function r(e){if(e=Gg(e)){const r=bg.findKey(s,e);!r||t&&!Yg(0,s[r],r,t)||(delete s[r],n=!0)}}return bg.isArray(e)?e.forEach(r):r(e),n}clear(e){const t=Object.keys(this);let s=t.length,n=!1;for(;s--;){const r=t[s];e&&!Yg(0,this[r],r,e,!0)||(delete this[r],n=!0)}return n}normalize(e){const t=this,s={};return bg.forEach(this,(n,r)=>{const i=bg.findKey(s,r);if(i)return t[i]=Kg(n),void delete t[r];const a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,s)=>t.toUpperCase()+s)}(r):String(r).trim();a!==r&&delete t[r],t[a]=Kg(n),s[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return bg.forEach(this,(s,n)=>{null!=s&&!1!==s&&(t[n]=e&&bg.isArray(s)?s.join(", "):s)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const s=new this(e);return t.forEach(e=>s.set(e)),s}static accessor(e){const t=(this[Wg]=this[Wg]={accessors:{}}).accessors,s=this.prototype;function n(e){const n=Gg(e);t[n]||(!function(e,t){const s=bg.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+s,{value:function(e,s,r){return this[n].call(this,t,e,s,r)},configurable:!0})})}(s,e),t[n]=!0)}return bg.isArray(e)?e.forEach(n):n(e),this}};function Xg(e,t){const s=this||$g,n=t||s,r=Qg.from(n.headers);let i=n.data;return bg.forEach(e,function(e){i=e.call(s,i,r.normalize(),t?t.status:void 0)}),r.normalize(),i}function Jg(e){return!(!e||!e.__CANCEL__)}function Zg(e,t,s){wg.call(this,null==e?"canceled":e,wg.ERR_CANCELED,t,s),this.name="CanceledError"}function ey(e,t,s){const n=s.config.validateStatus;s.status&&n&&!n(s.status)?t(new wg("Request failed with status code "+s.status,[wg.ERR_BAD_REQUEST,wg.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s)):e(s)}Qg.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),bg.reduceDescriptors(Qg.prototype,({value:e},t)=>{let s=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[s]=e}}}),bg.freezeMethods(Qg),bg.inherits(Zg,wg,{__CANCEL__:!0});const ty=(e,t,s=3)=>{let n=0;const r=function(e,t){e=e||10;const s=new Array(e),n=new Array(e);let r,i=0,a=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=n[a];r||(r=l),s[i]=o,n[i]=l;let d=a,u=0;for(;d!==i;)u+=s[d++],d%=e;if(i=(i+1)%e,i===a&&(a=(a+1)%e),l-r<t)return;const h=c&&l-c;return h?Math.round(1e3*u/h):void 0}}(50,250);return function(e,t){let s,n,r=0,i=1e3/t;const a=(t,i=Date.now())=>{r=i,s=null,n&&(clearTimeout(n),n=null),e(...t)};return[(...e)=>{const t=Date.now(),o=t-r;o>=i?a(e,t):(s=e,n||(n=setTimeout(()=>{n=null,a(s)},i-o)))},()=>s&&a(s)]}(s=>{const i=s.loaded,a=s.lengthComputable?s.total:void 0,o=i-n,l=r(o);n=i;e({loaded:i,total:a,progress:a?i/a:void 0,bytes:o,rate:l||void 0,estimated:l&&a&&i<=a?(a-i)/l:void 0,event:s,lengthComputable:null!=a,[t?"download":"upload"]:!0})},s)},sy=(e,t)=>{const s=null!=e;return[n=>t[0]({lengthComputable:s,total:e,loaded:n}),t[1]]},ny=e=>(...t)=>bg.asap(()=>e(...t)),ry=zg.hasStandardBrowserEnv?((e,t)=>s=>(s=new URL(s,zg.origin),e.protocol===s.protocol&&e.host===s.host&&(t||e.port===s.port)))(new URL(zg.origin),zg.navigator&&/(msie|trident)/i.test(zg.navigator.userAgent)):()=>!0,iy=zg.hasStandardBrowserEnv?{write(e,t,s,n,r,i,a){if("undefined"==typeof document)return;const o=[`${e}=${encodeURIComponent(t)}`];bg.isNumber(s)&&o.push(`expires=${new Date(s).toUTCString()}`),bg.isString(n)&&o.push(`path=${n}`),bg.isString(r)&&o.push(`domain=${r}`),!0===i&&o.push("secure"),bg.isString(a)&&o.push(`SameSite=${a}`),document.cookie=o.join("; ")},read(e){if("undefined"==typeof document)return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read:()=>null,remove(){}};function ay(e,t,s){let n=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(n||0==s)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const oy=e=>e instanceof Qg?{...e}:e;function ly(e,t){t=t||{};const s={};function n(e,t,s,n){return bg.isPlainObject(e)&&bg.isPlainObject(t)?bg.merge.call({caseless:n},e,t):bg.isPlainObject(t)?bg.merge({},t):bg.isArray(t)?t.slice():t}function r(e,t,s,r){return bg.isUndefined(t)?bg.isUndefined(e)?void 0:n(void 0,e,0,r):n(e,t,0,r)}function i(e,t){if(!bg.isUndefined(t))return n(void 0,t)}function a(e,t){return bg.isUndefined(t)?bg.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function o(s,r,i){return i in t?n(s,r):i in e?n(void 0,s):void 0}const l={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(e,t,s)=>r(oy(e),oy(t),0,!0)};return bg.forEach(Object.keys({...e,...t}),function(n){const i=l[n]||r,a=i(e[n],t[n],n);bg.isUndefined(a)&&i!==o||(s[n]=a)}),s}const cy=e=>{const t=ly({},e);let{data:s,withXSRFToken:n,xsrfHeaderName:r,xsrfCookieName:i,headers:a,auth:o}=t;if(t.headers=a=Qg.from(a),t.url=Og(ay(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&a.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),bg.isFormData(s))if(zg.hasStandardBrowserEnv||zg.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(bg.isFunction(s.getHeaders)){const e=s.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(([e,s])=>{t.includes(e.toLowerCase())&&a.set(e,s)})}if(zg.hasStandardBrowserEnv&&(n&&bg.isFunction(n)&&(n=n(t)),n||!1!==n&&ry(t.url))){const e=r&&i&&iy.read(i);e&&a.set(r,e)}return t},dy="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise(function(t,s){const n=cy(e);let r=n.data;const i=Qg.from(n.headers).normalize();let a,o,l,c,d,{responseType:u,onUploadProgress:h,onDownloadProgress:p}=n;function m(){c&&c(),d&&d(),n.cancelToken&&n.cancelToken.unsubscribe(a),n.signal&&n.signal.removeEventListener("abort",a)}let f=new XMLHttpRequest;function g(){if(!f)return;const n=Qg.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders());ey(function(e){t(e),m()},function(e){s(e),m()},{data:u&&"text"!==u&&"json"!==u?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:n,config:e,request:f}),f=null}f.open(n.method.toUpperCase(),n.url,!0),f.timeout=n.timeout,"onloadend"in f?f.onloadend=g:f.onreadystatechange=function(){f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))&&setTimeout(g)},f.onabort=function(){f&&(s(new wg("Request aborted",wg.ECONNABORTED,e,f)),f=null)},f.onerror=function(t){const n=new wg(t&&t.message?t.message:"Network Error",wg.ERR_NETWORK,e,f);n.event=t||null,s(n),f=null},f.ontimeout=function(){let t=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const r=n.transitional||Lg;n.timeoutErrorMessage&&(t=n.timeoutErrorMessage),s(new wg(t,r.clarifyTimeoutError?wg.ETIMEDOUT:wg.ECONNABORTED,e,f)),f=null},void 0===r&&i.setContentType(null),"setRequestHeader"in f&&bg.forEach(i.toJSON(),function(e,t){f.setRequestHeader(t,e)}),bg.isUndefined(n.withCredentials)||(f.withCredentials=!!n.withCredentials),u&&"json"!==u&&(f.responseType=n.responseType),p&&([l,d]=ty(p,!0),f.addEventListener("progress",l)),h&&f.upload&&([o,c]=ty(h),f.upload.addEventListener("progress",o),f.upload.addEventListener("loadend",c)),(n.cancelToken||n.signal)&&(a=t=>{f&&(s(!t||t.type?new Zg(null,e,f):t),f.abort(),f=null)},n.cancelToken&&n.cancelToken.subscribe(a),n.signal&&(n.signal.aborted?a():n.signal.addEventListener("abort",a)));const y=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(n.url);y&&-1===zg.protocols.indexOf(y)?s(new wg("Unsupported protocol "+y+":",wg.ERR_BAD_REQUEST,e)):f.send(r||null)})},uy=(e,t)=>{const{length:s}=e=e?e.filter(Boolean):[];if(t||s){let s,n=new AbortController;const r=function(e){if(!s){s=!0,a();const t=e instanceof Error?e:this.reason;n.abort(t instanceof wg?t:new Zg(t instanceof Error?t.message:t))}};let i=t&&setTimeout(()=>{i=null,r(new wg(`timeout ${t} of ms exceeded`,wg.ETIMEDOUT))},t);const a=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(r):e.removeEventListener("abort",r)}),e=null)};e.forEach(e=>e.addEventListener("abort",r));const{signal:o}=n;return o.unsubscribe=()=>bg.asap(a),o}},hy=function*(e,t){let s=e.byteLength;if(s<t)return void(yield e);let n,r=0;for(;r<s;)n=r+t,yield e.slice(r,n),r=n},py=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:s}=await t.read();if(e)break;yield s}}finally{await t.cancel()}},my=(e,t,s,n)=>{const r=async function*(e,t){for await(const s of py(e))yield*hy(s,t)}(e,t);let i,a=0,o=e=>{i||(i=!0,n&&n(e))};return new ReadableStream({async pull(e){try{const{done:t,value:n}=await r.next();if(t)return o(),void e.close();let i=n.byteLength;if(s){let e=a+=i;s(e)}e.enqueue(new Uint8Array(n))}catch(t){throw o(t),t}},cancel:e=>(o(e),r.return())},{highWaterMark:2})},{isFunction:fy}=bg,gy=(({Request:e,Response:t})=>({Request:e,Response:t}))(bg.global),{ReadableStream:yy,TextEncoder:xy}=bg.global,vy=(e,...t)=>{try{return!!e(...t)}catch(s){return!1}},by=e=>{e=bg.merge.call({skipUndefined:!0},gy,e);const{fetch:t,Request:s,Response:n}=e,r=t?fy(t):"function"==typeof fetch,i=fy(s),a=fy(n);if(!r)return!1;const o=r&&fy(yy),l=r&&("function"==typeof xy?(e=>t=>e.encode(t))(new xy):async e=>new Uint8Array(await new s(e).arrayBuffer())),c=i&&o&&vy(()=>{let e=!1;const t=new s(zg.origin,{body:new yy,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),d=a&&o&&vy(()=>bg.isReadableStream(new n("").body)),u={stream:d&&(e=>e.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!u[e]&&(u[e]=(t,s)=>{let n=t&&t[e];if(n)return n.call(t);throw new wg(`Response type '${e}' is not supported`,wg.ERR_NOT_SUPPORT,s)})});const h=async(e,t)=>{const n=bg.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(bg.isBlob(e))return e.size;if(bg.isSpecCompliantForm(e)){const t=new s(zg.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return bg.isArrayBufferView(e)||bg.isArrayBuffer(e)?e.byteLength:(bg.isURLSearchParams(e)&&(e+=""),bg.isString(e)?(await l(e)).byteLength:void 0)})(t):n};return async e=>{let{url:r,method:a,data:o,signal:l,cancelToken:p,timeout:m,onDownloadProgress:f,onUploadProgress:g,responseType:y,headers:x,withCredentials:v="same-origin",fetchOptions:b}=cy(e),w=t||fetch;y=y?(y+"").toLowerCase():"text";let N=uy([l,p&&p.toAbortSignal()],m),S=null;const E=N&&N.unsubscribe&&(()=>{N.unsubscribe()});let j;try{if(g&&c&&"get"!==a&&"head"!==a&&0!==(j=await h(x,o))){let e,t=new s(r,{method:"POST",body:o,duplex:"half"});if(bg.isFormData(o)&&(e=t.headers.get("content-type"))&&x.setContentType(e),t.body){const[e,s]=sy(j,ty(ny(g)));o=my(t.body,65536,e,s)}}bg.isString(v)||(v=v?"include":"omit");const t=i&&"credentials"in s.prototype,l={...b,signal:N,method:a.toUpperCase(),headers:x.normalize().toJSON(),body:o,duplex:"half",credentials:t?v:void 0};S=i&&new s(r,l);let p=await(i?w(S,b):w(r,l));const m=d&&("stream"===y||"response"===y);if(d&&(f||m&&E)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=p[t]});const t=bg.toFiniteNumber(p.headers.get("content-length")),[s,r]=f&&sy(t,ty(ny(f),!0))||[];p=new n(my(p.body,65536,s,()=>{r&&r(),E&&E()}),e)}y=y||"text";let T=await u[bg.findKey(u,y)||"text"](p,e);return!m&&E&&E(),await new Promise((t,s)=>{ey(t,s,{data:T,headers:Qg.from(p.headers),status:p.status,statusText:p.statusText,config:e,request:S})})}catch(T){if(E&&E(),T&&"TypeError"===T.name&&/Load failed|fetch/i.test(T.message))throw Object.assign(new wg("Network Error",wg.ERR_NETWORK,e,S),{cause:T.cause||T});throw wg.from(T,T&&T.code,e,S)}}},wy=new Map,Ny=e=>{let t=e&&e.env||{};const{fetch:s,Request:n,Response:r}=t,i=[n,r,s];let a,o,l=i.length,c=wy;for(;l--;)a=i[l],o=c.get(a),void 0===o&&c.set(a,o=l?new Map:by(t)),c=o;return o};Ny();const Sy={http:null,xhr:dy,fetch:{get:Ny}};bg.forEach(Sy,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(s){}Object.defineProperty(e,"adapterName",{value:t})}});const Ey=e=>`- ${e}`,jy=e=>bg.isFunction(e)||null===e||!1===e;const Ty={getAdapter:function(e,t){e=bg.isArray(e)?e:[e];const{length:s}=e;let n,r;const i={};for(let a=0;a<s;a++){let s;if(n=e[a],r=n,!jy(n)&&(r=Sy[(s=String(n)).toLowerCase()],void 0===r))throw new wg(`Unknown adapter '${s}'`);if(r&&(bg.isFunction(r)||(r=r.get(t))))break;i[s||"#"+a]=r}if(!r){const e=Object.entries(i).map(([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build"));throw new wg("There is no suitable adapter to dispatch the request "+(s?e.length>1?"since :\n"+e.map(Ey).join("\n"):" "+Ey(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return r},adapters:Sy};function _y(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Zg(null,e)}function Iy(e){_y(e),e.headers=Qg.from(e.headers),e.data=Xg.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Ty.getAdapter(e.adapter||$g.adapter,e)(e).then(function(t){return _y(e),t.data=Xg.call(e,e.transformResponse,t),t.headers=Qg.from(t.headers),t},function(t){return Jg(t)||(_y(e),t&&t.response&&(t.response.data=Xg.call(e,e.transformResponse,t.response),t.response.headers=Qg.from(t.response.headers))),Promise.reject(t)})}const Cy="1.13.0",ky={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{ky[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const Ay={};ky.transitional=function(e,t,s){function n(e,t){return"[Axios v"+Cy+"] Transitional option '"+e+"'"+t+(s?". "+s:"")}return(s,r,i)=>{if(!1===e)throw new wg(n(r," has been removed"+(t?" in "+t:"")),wg.ERR_DEPRECATED);return t&&!Ay[r]&&(Ay[r]=!0,console.warn(n(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(s,r,i)}},ky.spelling=function(e){return(t,s)=>(console.warn(`${s} is likely a misspelling of ${e}`),!0)};const Py={assertOptions:function(e,t,s){if("object"!=typeof e)throw new wg("options must be an object",wg.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let r=n.length;for(;r-- >0;){const i=n[r],a=t[i];if(a){const t=e[i],s=void 0===t||a(t,i,e);if(!0!==s)throw new wg("option "+i+" must be "+s,wg.ERR_BAD_OPTION_VALUE);continue}if(!0!==s)throw new wg("Unknown option "+i,wg.ERR_BAD_OPTION)}},validators:ky},Oy=Py.validators;let Ry=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Rg,response:new Rg}}async request(e,t){try{return await this._request(e,t)}catch(s){if(s instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{s.stack?t&&!String(s.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(s.stack+="\n"+t):s.stack=t}catch(n){}}throw s}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=ly(this.defaults,t);const{transitional:s,paramsSerializer:n,headers:r}=t;void 0!==s&&Py.assertOptions(s,{silentJSONParsing:Oy.transitional(Oy.boolean),forcedJSONParsing:Oy.transitional(Oy.boolean),clarifyTimeoutError:Oy.transitional(Oy.boolean)},!1),null!=n&&(bg.isFunction(n)?t.paramsSerializer={serialize:n}:Py.assertOptions(n,{encode:Oy.function,serialize:Oy.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Py.assertOptions(t,{baseUrl:Oy.spelling("baseURL"),withXsrfToken:Oy.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=r&&bg.merge(r.common,r[t.method]);r&&bg.forEach(["delete","get","head","post","put","patch","common"],e=>{delete r[e]}),t.headers=Qg.concat(i,r);const a=[];let o=!0;this.interceptors.request.forEach(function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,a.unshift(e.fulfilled,e.rejected))});const l=[];let c;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let d,u=0;if(!o){const e=[Iy.bind(this),void 0];for(e.unshift(...a),e.push(...l),d=e.length,c=Promise.resolve(t);u<d;)c=c.then(e[u++],e[u++]);return c}d=a.length;let h=t;for(;u<d;){const e=a[u++],t=a[u++];try{h=e(h)}catch(p){t.call(this,p);break}}try{c=Iy.call(this,h)}catch(p){return Promise.reject(p)}for(u=0,d=l.length;u<d;)c=c.then(l[u++],l[u++]);return c}getUri(e){return Og(ay((e=ly(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}};bg.forEach(["delete","get","head","options"],function(e){Ry.prototype[e]=function(t,s){return this.request(ly(s||{},{method:e,url:t,data:(s||{}).data}))}}),bg.forEach(["post","put","patch"],function(e){function t(t){return function(s,n,r){return this.request(ly(r||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:s,data:n}))}}Ry.prototype[e]=t(),Ry.prototype[e+"Form"]=t(!0)});const Ly={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Ly).forEach(([e,t])=>{Ly[t]=e});const My=function e(t){const s=new Ry(t),n=Pf(Ry.prototype.request,s);return bg.extend(n,Ry.prototype,s,{allOwnKeys:!0}),bg.extend(n,s,null,{allOwnKeys:!0}),n.create=function(s){return e(ly(t,s))},n}($g);My.Axios=Ry,My.CanceledError=Zg,My.CancelToken=class e{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const s=this;this.promise.then(e=>{if(!s._listeners)return;let t=s._listeners.length;for(;t-- >0;)s._listeners[t](e);s._listeners=null}),this.promise.then=e=>{let t;const n=new Promise(e=>{s.subscribe(e),t=e}).then(e);return n.cancel=function(){s.unsubscribe(t)},n},e(function(e,n,r){s.reason||(s.reason=new Zg(e,n,r),t(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let t;return{token:new e(function(e){t=e}),cancel:t}}},My.isCancel=Jg,My.VERSION=Cy,My.toFormData=Ig,My.AxiosError=wg,My.Cancel=My.CanceledError,My.all=function(e){return Promise.all(e)},My.spread=function(e){return function(t){return e.apply(null,t)}},My.isAxiosError=function(e){return bg.isObject(e)&&!0===e.isAxiosError},My.mergeConfig=ly,My.AxiosHeaders=Qg,My.formToJSON=e=>qg(bg.isHTMLForm(e)?new FormData(e):e),My.getAdapter=Ty.getAdapter,My.HttpStatusCode=Ly,My.default=My;const{Axios:Dy,AxiosError:Uy,CanceledError:Fy,isCancel:Vy,CancelToken:By,VERSION:zy,all:qy,Cancel:$y,isAxiosError:Hy,spread:Wy,toFormData:Gy,AxiosHeaders:Ky,HttpStatusCode:Yy,formToJSON:Qy,getAdapter:Xy,mergeConfig:Jy}=My,Zy=()=>{const{cart:e,clearCart:t}=j(),s=r(),n=e.reduce((e,t)=>e+t.price*t.quantity,0);return b.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50",children:[b.jsx("h1",{className:"text-2xl font-semibold mb-6",children:"Checkout"}),e.length>0?b.jsxs(b.Fragment,{children:[b.jsxs("p",{className:"text-gray-700 mb-4",children:["Subtotal: ",b.jsxs("span",{className:"font-semibold",children:["",n]})]}),b.jsxs("button",{onClick:async()=>{if(zm.currentUser)if(0!==e.length)try{const s=await My.post("/.netlify/functions/create-order",{amount:100*n,currency:"INR"}),{order:r}=s.data,i={key:void 0,amount:r.amount,currency:r.currency,name:"Svasam Wellness Pvt. Ltd.",description:"Program Purchase",order_id:r.id,handler:async function(s){try{const t=zm.currentUser;t&&await function(e,t){const s=Hi(e.firestore,Lh),n=Ah(e),r=vp(e.converter,t);return Ip(s,[Kh(Gh(e.firestore),"addDoc",n._key,r,null!==e.converter,{}).toMutation(n._key,Nl.exists(!1))]).then(()=>n)}(kh(qm,"users",t.uid,"orders"),{amount:r.amount/100,currency:r.currency,gateway:"razorpay",razorpay:{orderId:r.id,paymentId:s.razorpay_payment_id,signature:s.razorpay_signature},items:e.map(e=>({id:e.id,title:e.title,price:e.price,quantity:e.quantity,image:e.image||null})),createdAt:new Yh("serverTimestamp"),status:"paid"}),alert(" Payment successful!")}catch(n){console.error("Failed to save order:",n)}finally{t()}},prefill:{name:"Customer Name",email:"customer@example.com",contact:"9999999999"},theme:{color:"#8B1F7A"}};new window.Razorpay(i).open()}catch(r){console.error("Checkout error:",r),alert("Something went wrong during checkout!")}else alert("Your cart is empty!");else s("/login",{state:{from:"/checkout"}})},className:"bg-main text-white px-8 py-3 rounded-md text-lg hover:bg-opacity-90 transition",children:["Pay ",n]})]}):b.jsx("p",{className:"text-gray-600 text-lg",children:"Your cart is empty."})]})};function ex(){const e=zm.currentUser,t=e?.uid,[s,r]=n.useState("orders"),[i,a]=n.useState([]),[o,l]=n.useState([]),[c,d]=n.useState([]),[u,h]=n.useState(!0),[p,m]=n.useState(null);n.useEffect(()=>{let e=!1;return async function(){if(t){h(!0),m(null);try{const[s,n,r]=await Promise.all([Tp(dp(kh(qm,"users",t,"orders"),mp("createdAt","desc"))),Tp(kh(qm,"users",t,"favorites")),Tp(kh(qm,"users",t,"enrollments"))]);if(e)return;a(s.docs.map(e=>({id:e.id,...e.data()}))),l(n.docs.map(e=>({id:e.id,...e.data()}))),d(r.docs.map(e=>({id:e.id,...e.data()})))}catch(s){e||m(s)}finally{e||h(!1)}}}(),()=>{e=!0}},[t]);const f=n.useMemo(()=>[{key:"orders",label:"Orders"},{key:"courses",label:"Courses"},{key:"favorites",label:"Favorites"}],[]);return b.jsx("div",{className:"min-h-screen w-full bg-background",children:b.jsxs("div",{className:"max-w-6xl mx-auto py-12 px-4 sm:px-6 lg:px-8",children:[b.jsxs("div",{className:"mb-8",children:[b.jsx("h1",{className:"text-3xl font-bold text-[#8e6192]",children:"My Dashboard"}),b.jsxs("p",{className:"text-gray-600 mt-1 text-sm",children:["Welcome back",e?.displayName?`, ${e.displayName}`:"","!"]})]}),b.jsx("div",{className:"flex gap-2 mb-6",children:f.map(e=>b.jsx("button",{onClick:()=>r(e.key),className:"px-4 py-2 rounded-lg text-sm font-semibold border transition "+(s===e.key?"bg-accent text-white border-accent":"bg-white text-main border-accent/30 hover:border-accent"),children:e.label},e.key))}),u?b.jsx("div",{className:"py-16 text-center text-gray-500",children:"Loading..."}):p?b.jsx("div",{className:"py-8 text-center text-red-600",children:"Failed to load dashboard."}):b.jsxs("div",{children:["orders"===s&&b.jsx("div",{className:"space-y-4",children:0===i.length?b.jsx("p",{className:"text-gray-600",children:"No orders yet."}):i.map(e=>b.jsxs("div",{className:"bg-white rounded-xl shadow p-4",children:[b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("div",{className:"font-semibold text-main",children:["Order  ",e.currency||"INR"," ",e.amount]}),b.jsx("div",{className:"text-xs text-gray-500",children:e.status||"paid"})]}),b.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[e.items?.length||0," item(s)"]})]},e.id))}),"courses"===s&&b.jsx("div",{className:"space-y-4",children:0===c.length?b.jsx("p",{className:"text-gray-600",children:"No course enrollments yet."}):c.map(e=>b.jsxs("div",{className:"bg-white rounded-xl shadow p-4",children:[b.jsx("div",{className:"font-semibold text-main",children:e.title||e.slug||"Course"}),b.jsxs("div",{className:"text-sm text-gray-600",children:["Access: ",e.access||"lifetime"]})]},e.id))}),"favorites"===s&&b.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:0===o.length?b.jsx("p",{className:"text-gray-600",children:"No favorites yet."}):o.map(e=>b.jsxs("div",{className:"bg-white rounded-xl shadow p-4",children:[b.jsx("div",{className:"font-semibold text-main mb-1",children:e.title||"Item"}),b.jsx("div",{className:"text-sm text-gray-600",children:e.type||"product"})]},e.id))})]})]})})}var tx,sx={exports:{}};function nx(){return tx||(tx=1,sx.exports=function(){function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,n=Array(t);s<t;s++)n[s]=e[s];return n}function t(e,t){var s="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(s)return(s=s.call(e)).next.bind(s);if(Array.isArray(e)||(s=n(e))||t){s&&(e=s);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},s.apply(null,arguments)}function n(t,s){if(t){if("string"==typeof t)return e(t,s);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(t,s):void 0}}var r="image-Tb9Ew8CXIwaY6R1kjMvI0uRR-2000x3000-jpg";function i(e){var t=e.split("-"),s=t[1],n=t[2],i=t[3];if(!s||!n||!i)throw new Error("Malformed asset _ref '"+e+"'. Expected an id like \""+r+'".');var a=n.split("x"),o=+a[0],l=+a[1];if(!isFinite(o)||!isFinite(l))throw new Error("Malformed asset _ref '"+e+"'. Expected an id like \""+r+'".');return{id:s,width:o,height:l,format:i}}var a=function(e){return!!e&&"string"==typeof e._ref},o=function(e){return!!e&&"string"==typeof e._id},l=function(e){var t=e;return!(!t||!t.asset)&&"string"==typeof t.asset.url},c=function(e){if("object"==typeof e&&null!==e){var t=e;return t._upload&&(!t.asset||!t.asset._ref)}return!1};function d(e){if(!e)return null;var t;if("string"==typeof e&&u(e))t={asset:{_ref:h(e)}};else if("string"==typeof e)t={asset:{_ref:e}};else if(a(e))t={asset:e};else if(o(e))t={asset:{_ref:e._id||""}};else if(l(e))t={asset:{_ref:h(e.asset.url)}};else{if("object"!=typeof e.asset)return null;t=s({},e)}var n=e;return n.crop&&(t.crop=n.crop),n.hotspot&&(t.hotspot=n.hotspot),p(t)}function u(e){return/^https?:\/\//.test(""+e)}function h(e){return("image-"+e.split("/").slice(-1)[0]).replace(/\.([a-z]+)$/,"-$1")}function p(e){if(e.crop&&e.hotspot)return e;var t=s({},e);return t.crop||(t.crop={left:0,top:0,bottom:0,right:0}),t.hotspot||(t.hotspot={x:.5,y:.5,height:1,width:1}),t}var m=[["width","w"],["height","h"],["format","fm"],["download","dl"],["blur","blur"],["sharpen","sharp"],["invert","invert"],["orientation","or"],["minHeight","min-h"],["maxHeight","max-h"],["minWidth","min-w"],["maxWidth","max-w"],["quality","q"],["fit","fit"],["crop","crop"],["saturation","sat"],["auto","auto"],["dpr","dpr"],["pad","pad"],["frame","frame"]];function f(e){var t=s({},e||{}),n=t.source;delete t.source;var r=d(n);if(!r){if(n&&c(n))return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8HwQACfsD/QNViZkAAAAASUVORK5CYII=";throw new Error("Unable to resolve image URL from source ("+JSON.stringify(n)+")")}var a=i(r.asset._ref||r.asset._id||""),o=Math.round(r.crop.left*a.width),l=Math.round(r.crop.top*a.height),u={left:o,top:l,width:Math.round(a.width-r.crop.right*a.width-o),height:Math.round(a.height-r.crop.bottom*a.height-l)},h=r.hotspot.height*a.height/2,p=r.hotspot.width*a.width/2,m=r.hotspot.x*a.width,f=r.hotspot.y*a.height,x={left:m-p,top:f-h,right:m+p,bottom:f+h};return t.rect||t.focalPoint||t.ignoreImageParams||t.crop||(t=s({},t,y({crop:u,hotspot:x},t))),g(s({},t,{asset:a}))}function g(e){var t=(e.baseUrl||"https://cdn.sanity.io").replace(/\/+$/,""),s=e.vanityName?"/"+e.vanityName:"",n=e.asset.id+"-"+e.asset.width+"x"+e.asset.height+"."+e.asset.format+s,r=t+"/images/"+e.projectId+"/"+e.dataset+"/"+n,i=[];if(e.rect){var a=e.rect,o=a.left,l=a.top,c=a.width,d=a.height;(0!==o||0!==l||d!==e.asset.height||c!==e.asset.width)&&i.push("rect="+o+","+l+","+c+","+d)}e.bg&&i.push("bg="+e.bg),e.focalPoint&&(i.push("fp-x="+e.focalPoint.x),i.push("fp-y="+e.focalPoint.y));var u=[e.flipHorizontal&&"h",e.flipVertical&&"v"].filter(Boolean).join("");return u&&i.push("flip="+u),m.forEach(function(t){var s=t[0],n=t[1];void 0!==e[s]?i.push(n+"="+encodeURIComponent(e[s])):void 0!==e[n]&&i.push(n+"="+encodeURIComponent(e[n]))}),0===i.length?r:r+"?"+i.join("&")}function y(e,t){var s,n=t.width,r=t.height;if(!n||!r)return{width:n,height:r,rect:e.crop};var i=e.crop,a=e.hotspot,o=n/r;if(i.width/i.height>o){var l=Math.round(i.height),c=Math.round(l*o),d=Math.max(0,Math.round(i.top)),u=Math.round((a.right-a.left)/2+a.left),h=Math.max(0,Math.round(u-c/2));h<i.left?h=i.left:h+c>i.left+i.width&&(h=i.left+i.width-c),s={left:h,top:d,width:c,height:l}}else{var p=i.width,m=Math.round(p/o),f=Math.max(0,Math.round(i.left)),g=Math.round((a.bottom-a.top)/2+a.top),y=Math.max(0,Math.round(g-m/2));y<i.top?y=i.top:y+m>i.top+i.height&&(y=i.top+i.height-m),s={left:f,top:y,width:p,height:m}}return{width:n,height:r,rect:s}}var x=["clip","crop","fill","fillmax","max","scale","min"],v=["top","bottom","left","right","center","focalpoint","entropy"],b=["format"];function w(e){return!(!e||!("config"in e))&&"function"==typeof e.config}function N(e){return!(!e||!("clientConfig"in e))&&"object"==typeof e.clientConfig}function S(e){for(var s,n=t(m);!(s=n()).done;){var r=s.value,i=r[0],a=r[1];if(e===i||e===a)return i}return e}function E(e){if(w(e)){var t=e.config(),s=t.apiHost,n=t.projectId,r=t.dataset;return new j(null,{baseUrl:(s||"https://api.sanity.io").replace(/^https:\/\/api\./,"https://cdn."),projectId:n,dataset:r})}if(N(e)){var i=e.clientConfig,a=i.apiHost,o=i.projectId,l=i.dataset;return new j(null,{baseUrl:(a||"https://api.sanity.io").replace(/^https:\/\/api\./,"https://cdn."),projectId:o,dataset:l})}return new j(null,e||{})}var j=function(){function e(e,t){this.options=void 0,this.options=e?s({},e.options||{},t||{}):s({},t||{})}var t=e.prototype;return t.withOptions=function(t){var n=t.baseUrl||this.options.baseUrl,r={baseUrl:n};for(var i in t)t.hasOwnProperty(i)&&(r[S(i)]=t[i]);return new e(this,s({baseUrl:n},r))},t.image=function(e){return this.withOptions({source:e})},t.dataset=function(e){return this.withOptions({dataset:e})},t.projectId=function(e){return this.withOptions({projectId:e})},t.bg=function(e){return this.withOptions({bg:e})},t.dpr=function(e){return this.withOptions(e&&1!==e?{dpr:e}:{})},t.width=function(e){return this.withOptions({width:e})},t.height=function(e){return this.withOptions({height:e})},t.focalPoint=function(e,t){return this.withOptions({focalPoint:{x:e,y:t}})},t.maxWidth=function(e){return this.withOptions({maxWidth:e})},t.minWidth=function(e){return this.withOptions({minWidth:e})},t.maxHeight=function(e){return this.withOptions({maxHeight:e})},t.minHeight=function(e){return this.withOptions({minHeight:e})},t.size=function(e,t){return this.withOptions({width:e,height:t})},t.blur=function(e){return this.withOptions({blur:e})},t.sharpen=function(e){return this.withOptions({sharpen:e})},t.rect=function(e,t,s,n){return this.withOptions({rect:{left:e,top:t,width:s,height:n}})},t.format=function(e){return this.withOptions({format:e})},t.invert=function(e){return this.withOptions({invert:e})},t.orientation=function(e){return this.withOptions({orientation:e})},t.quality=function(e){return this.withOptions({quality:e})},t.forceDownload=function(e){return this.withOptions({download:e})},t.flipHorizontal=function(){return this.withOptions({flipHorizontal:!0})},t.flipVertical=function(){return this.withOptions({flipVertical:!0})},t.ignoreImageParams=function(){return this.withOptions({ignoreImageParams:!0})},t.fit=function(e){if(-1===x.indexOf(e))throw new Error('Invalid fit mode "'+e+'"');return this.withOptions({fit:e})},t.crop=function(e){if(-1===v.indexOf(e))throw new Error('Invalid crop mode "'+e+'"');return this.withOptions({crop:e})},t.saturation=function(e){return this.withOptions({saturation:e})},t.auto=function(e){if(-1===b.indexOf(e))throw new Error('Invalid auto mode "'+e+'"');return this.withOptions({auto:e})},t.pad=function(e){return this.withOptions({pad:e})},t.vanityName=function(e){return this.withOptions({vanityName:e})},t.frame=function(e){if(1!==e)throw new Error('Invalid frame value "'+e+'"');return this.withOptions({frame:e})},t.url=function(){return f(this.options)},t.toString=function(){return this.url()},e}();return E}()),sx.exports}const rx=s(nx()),ix=m({projectId:"n5smwbzi",dataset:"production1",apiVersion:"2023-05-03",useCdn:!0});rx(ix);const ax=["mind","body","soul"];function ox(e){const[t,s]=n.useState([]),[r,i]=n.useState(!0),[a,o]=n.useState(null),l=n.useCallback(async()=>{if(!e)return s([]),void i(!1);if(!ax.includes(e)){const t=`Invalid category: ${e}. Must be one of: ${ax.join(", ")}`;return console.error(t),o(new Error(t)),void i(!1)}i(!0),o(null);try{const t='*[_type == "program" && category == $category] {\n        _id,\n        title,\n        description,\n        category,\n        "imageUrl": image.asset->url,\n        price,\n        duration,\n        "slug": select(slug.current != null => slug.current, _id) // Fallback to _id if no slug\n      } | order(title asc)';0;const n=await ix.fetch(t,{category:e});0,s(Array.isArray(n)?n:[]),o(null)}catch(t){console.error("Error fetching programs:",{error:t.message,category:e,timestamp:(new Date).toISOString()}),o(t),s([])}finally{i(!1)}},[e]);return n.useEffect(()=>{let t=!0;return e?(async()=>{try{await l()}catch(e){t&&(console.error("Error in loadData:",e),o(e),i(!1))}})():(s([]),i(!1)),()=>{t=!1}},[e,l]),{programs:t,loading:r,error:a,refetch:l}}function lx(e){return null!==e&&"object"==typeof e&&"constructor"in e&&e.constructor===Object}function cx(e,t){void 0===e&&(e={}),void 0===t&&(t={});const s=["__proto__","constructor","prototype"];Object.keys(t).filter(e=>s.indexOf(e)<0).forEach(s=>{void 0===e[s]?e[s]=t[s]:lx(t[s])&&lx(e[s])&&Object.keys(t[s]).length>0&&cx(e[s],t[s])})}const dx={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector:()=>null,querySelectorAll:()=>[],getElementById:()=>null,createEvent:()=>({initEvent(){}}),createElement:()=>({children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName:()=>[]}),createElementNS:()=>({}),importNode:()=>null,location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function ux(){const e="undefined"!=typeof document?document:{};return cx(e,dx),e}const hx={document:dx,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle:()=>({getPropertyValue:()=>""}),Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia:()=>({}),requestAnimationFrame:e=>"undefined"==typeof setTimeout?(e(),null):setTimeout(e,0),cancelAnimationFrame(e){"undefined"!=typeof setTimeout&&clearTimeout(e)}};function px(){const e="undefined"!=typeof window?window:{};return cx(e,hx),e}function mx(e,t){return void 0===t&&(t=0),setTimeout(e,t)}function fx(){return Date.now()}function gx(e,t){void 0===t&&(t="x");const s=px();let n,r,i;const a=function(e){const t=px();let s;return t.getComputedStyle&&(s=t.getComputedStyle(e,null)),!s&&e.currentStyle&&(s=e.currentStyle),s||(s=e.style),s}(e);return s.WebKitCSSMatrix?(r=a.transform||a.webkitTransform,r.split(",").length>6&&(r=r.split(", ").map(e=>e.replace(",",".")).join(", ")),i=new s.WebKitCSSMatrix("none"===r?"":r)):(i=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),n=i.toString().split(",")),"x"===t&&(r=s.WebKitCSSMatrix?i.m41:16===n.length?parseFloat(n[12]):parseFloat(n[4])),"y"===t&&(r=s.WebKitCSSMatrix?i.m42:16===n.length?parseFloat(n[13]):parseFloat(n[5])),r||0}function yx(e){return"object"==typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function xx(e){return"undefined"!=typeof window&&void 0!==window.HTMLElement?e instanceof HTMLElement:e&&(1===e.nodeType||11===e.nodeType)}function vx(){const e=Object(arguments.length<=0?void 0:arguments[0]),t=["__proto__","constructor","prototype"];for(let s=1;s<arguments.length;s+=1){const n=s<0||arguments.length<=s?void 0:arguments[s];if(null!=n&&!xx(n)){const s=Object.keys(Object(n)).filter(e=>t.indexOf(e)<0);for(let t=0,r=s.length;t<r;t+=1){const r=s[t],i=Object.getOwnPropertyDescriptor(n,r);void 0!==i&&i.enumerable&&(yx(e[r])&&yx(n[r])?n[r].__swiper__?e[r]=n[r]:vx(e[r],n[r]):!yx(e[r])&&yx(n[r])?(e[r]={},n[r].__swiper__?e[r]=n[r]:vx(e[r],n[r])):e[r]=n[r])}}}return e}function bx(e,t,s){e.style.setProperty(t,s)}function wx(e){let{swiper:t,targetPosition:s,side:n}=e;const r=px(),i=-t.translate;let a,o=null;const l=t.params.speed;t.wrapperEl.style.scrollSnapType="none",r.cancelAnimationFrame(t.cssModeFrameID);const c=s>i?"next":"prev",d=(e,t)=>"next"===c&&e>=t||"prev"===c&&e<=t,u=()=>{a=(new Date).getTime(),null===o&&(o=a);const e=Math.max(Math.min((a-o)/l,1),0),c=.5-Math.cos(e*Math.PI)/2;let h=i+c*(s-i);if(d(h,s)&&(h=s),t.wrapperEl.scrollTo({[n]:h}),d(h,s))return t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.scrollSnapType="",setTimeout(()=>{t.wrapperEl.style.overflow="",t.wrapperEl.scrollTo({[n]:h})}),void r.cancelAnimationFrame(t.cssModeFrameID);t.cssModeFrameID=r.requestAnimationFrame(u)};u()}function Nx(e,t){void 0===t&&(t="");const s=px(),n=[...e.children];return s.HTMLSlotElement&&e instanceof HTMLSlotElement&&n.push(...e.assignedElements()),t?n.filter(e=>e.matches(t)):n}function Sx(e){try{return void console.warn(e)}catch(t){}}function Ex(e,t){void 0===t&&(t=[]);const s=document.createElement(e);return s.classList.add(...Array.isArray(t)?t:function(e){return void 0===e&&(e=""),e.trim().split(" ").filter(e=>!!e.trim())}(t)),s}function jx(e,t){return px().getComputedStyle(e,null).getPropertyValue(t)}function Tx(e){let t,s=e;if(s){for(t=0;null!==(s=s.previousSibling);)1===s.nodeType&&(t+=1);return t}}function _x(e,t){const s=[];let n=e.parentElement;for(;n;)t?n.matches(t)&&s.push(n):s.push(n),n=n.parentElement;return s}function Ix(e,t,s){const n=px();return e["width"===t?"offsetWidth":"offsetHeight"]+parseFloat(n.getComputedStyle(e,null).getPropertyValue("width"===t?"margin-right":"margin-top"))+parseFloat(n.getComputedStyle(e,null).getPropertyValue("width"===t?"margin-left":"margin-bottom"))}function Cx(e){return(Array.isArray(e)?e:[e]).filter(e=>!!e)}function kx(e,t){void 0===t&&(t=""),"undefined"!=typeof trustedTypes?e.innerHTML=trustedTypes.createPolicy("html",{createHTML:e=>e}).createHTML(t):e.innerHTML=t}let Ax,Px,Ox;function Rx(){return Ax||(Ax=function(){const e=px(),t=ux();return{smoothScroll:t.documentElement&&t.documentElement.style&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch)}}()),Ax}function Lx(e){return void 0===e&&(e={}),Px||(Px=function(e){let{userAgent:t}=void 0===e?{}:e;const s=Rx(),n=px(),r=n.navigator.platform,i=t||n.navigator.userAgent,a={ios:!1,android:!1},o=n.screen.width,l=n.screen.height,c=i.match(/(Android);?[\s\/]+([\d.]+)?/);let d=i.match(/(iPad).*OS\s([\d_]+)/);const u=i.match(/(iPod)(.*OS\s([\d_]+))?/),h=!d&&i.match(/(iPhone\sOS|iOS)\s([\d_]+)/),p="Win32"===r;let m="MacIntel"===r;return!d&&m&&s.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf(`${o}x${l}`)>=0&&(d=i.match(/(Version)\/([\d.]+)/),d||(d=[0,1,"13_0_0"]),m=!1),c&&!p&&(a.os="android",a.android=!0),(d||h||u)&&(a.os="ios",a.ios=!0),a}(e)),Px}function Mx(){return Ox||(Ox=function(){const e=px(),t=Lx();let s=!1;function n(){const t=e.navigator.userAgent.toLowerCase();return t.indexOf("safari")>=0&&t.indexOf("chrome")<0&&t.indexOf("android")<0}if(n()){const t=String(e.navigator.userAgent);if(t.includes("Version/")){const[e,n]=t.split("Version/")[1].split(" ")[0].split(".").map(e=>Number(e));s=e<16||16===e&&n<2}}const r=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent),i=n();return{isSafari:s||i,needPerspectiveFix:s,need3dFix:i||r&&t.ios,isWebView:r}}()),Ox}const Dx=(e,t,s)=>{t&&!e.classList.contains(s)?e.classList.add(s):!t&&e.classList.contains(s)&&e.classList.remove(s)};const Ux=(e,t,s)=>{t&&!e.classList.contains(s)?e.classList.add(s):!t&&e.classList.contains(s)&&e.classList.remove(s)};const Fx=(e,t)=>{if(!e||e.destroyed||!e.params)return;const s=t.closest(e.isElement?"swiper-slide":`.${e.params.slideClass}`);if(s){let t=s.querySelector(`.${e.params.lazyPreloaderClass}`);!t&&e.isElement&&(s.shadowRoot?t=s.shadowRoot.querySelector(`.${e.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{s.shadowRoot&&(t=s.shadowRoot.querySelector(`.${e.params.lazyPreloaderClass}`),t&&t.remove())})),t&&t.remove()}},Vx=(e,t)=>{if(!e.slides[t])return;const s=e.slides[t].querySelector('[loading="lazy"]');s&&s.removeAttribute("loading")},Bx=e=>{if(!e||e.destroyed||!e.params)return;let t=e.params.lazyPreloadPrevNext;const s=e.slides.length;if(!s||!t||t<0)return;t=Math.min(t,s);const n="auto"===e.params.slidesPerView?e.slidesPerViewDynamic():Math.ceil(e.params.slidesPerView),r=e.activeIndex;if(e.params.grid&&e.params.grid.rows>1){const s=r,i=[s-t];return i.push(...Array.from({length:t}).map((e,t)=>s+n+t)),void e.slides.forEach((t,s)=>{i.includes(t.column)&&Vx(e,s)})}const i=r+n-1;if(e.params.rewind||e.params.loop)for(let a=r-t;a<=i+t;a+=1){const t=(a%s+s)%s;(t<r||t>i)&&Vx(e,t)}else for(let a=Math.max(r-t,0);a<=Math.min(i+t,s-1);a+=1)a!==r&&(a>i||a<r)&&Vx(e,a)};function zx(e){let{swiper:t,runCallbacks:s,direction:n,step:r}=e;const{activeIndex:i,previousIndex:a}=t;let o=n;o||(o=i>a?"next":i<a?"prev":"reset"),t.emit(`transition${r}`),s&&"reset"===o?t.emit(`slideResetTransition${r}`):s&&i!==a&&(t.emit(`slideChangeTransition${r}`),"next"===o?t.emit(`slideNextTransition${r}`):t.emit(`slidePrevTransition${r}`))}function qx(e,t,s){const n=px(),{params:r}=e,i=r.edgeSwipeDetection,a=r.edgeSwipeThreshold;return!i||!(s<=a||s>=n.innerWidth-a)||"prevent"===i&&(t.preventDefault(),!0)}function $x(e){const t=this,s=ux();let n=e;n.originalEvent&&(n=n.originalEvent);const r=t.touchEventsData;if("pointerdown"===n.type){if(null!==r.pointerId&&r.pointerId!==n.pointerId)return;r.pointerId=n.pointerId}else"touchstart"===n.type&&1===n.targetTouches.length&&(r.touchId=n.targetTouches[0].identifier);if("touchstart"===n.type)return void qx(t,n,n.targetTouches[0].pageX);const{params:i,touches:a,enabled:o}=t;if(!o)return;if(!i.simulateTouch&&"mouse"===n.pointerType)return;if(t.animating&&i.preventInteractionOnTransition)return;!t.animating&&i.cssMode&&i.loop&&t.loopFix();let l=n.target;if("wrapper"===i.touchEventsTarget&&!function(e,t){const s=px();let n=t.contains(e);!n&&s.HTMLSlotElement&&t instanceof HTMLSlotElement&&(n=[...t.assignedElements()].includes(e),n||(n=function(e,t){const s=[t];for(;s.length>0;){const t=s.shift();if(e===t)return!0;s.push(...t.children,...t.shadowRoot?t.shadowRoot.children:[],...t.assignedElements?t.assignedElements():[])}}(e,t)));return n}(l,t.wrapperEl))return;if("which"in n&&3===n.which)return;if("button"in n&&n.button>0)return;if(r.isTouched&&r.isMoved)return;const c=!!i.noSwipingClass&&""!==i.noSwipingClass,d=n.composedPath?n.composedPath():n.path;c&&n.target&&n.target.shadowRoot&&d&&(l=d[0]);const u=i.noSwipingSelector?i.noSwipingSelector:`.${i.noSwipingClass}`,h=!(!n.target||!n.target.shadowRoot);if(i.noSwiping&&(h?function(e,t){return void 0===t&&(t=this),function t(s){if(!s||s===ux()||s===px())return null;s.assignedSlot&&(s=s.assignedSlot);const n=s.closest(e);return n||s.getRootNode?n||t(s.getRootNode().host):null}(t)}(u,l):l.closest(u)))return void(t.allowClick=!0);if(i.swipeHandler&&!l.closest(i.swipeHandler))return;a.currentX=n.pageX,a.currentY=n.pageY;const p=a.currentX,m=a.currentY;if(!qx(t,n,p))return;Object.assign(r,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),a.startX=p,a.startY=m,r.touchStartTime=fx(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,i.threshold>0&&(r.allowThresholdMove=!1);let f=!0;l.matches(r.focusableElements)&&(f=!1,"SELECT"===l.nodeName&&(r.isTouched=!1)),s.activeElement&&s.activeElement.matches(r.focusableElements)&&s.activeElement!==l&&("mouse"===n.pointerType||"mouse"!==n.pointerType&&!l.matches(r.focusableElements))&&s.activeElement.blur();const g=f&&t.allowTouchMove&&i.touchStartPreventDefault;!i.touchStartForcePreventDefault&&!g||l.isContentEditable||n.preventDefault(),i.freeMode&&i.freeMode.enabled&&t.freeMode&&t.animating&&!i.cssMode&&t.freeMode.onTouchStart(),t.emit("touchStart",n)}function Hx(e){const t=ux(),s=this,n=s.touchEventsData,{params:r,touches:i,rtlTranslate:a,enabled:o}=s;if(!o)return;if(!r.simulateTouch&&"mouse"===e.pointerType)return;let l,c=e;if(c.originalEvent&&(c=c.originalEvent),"pointermove"===c.type){if(null!==n.touchId)return;if(c.pointerId!==n.pointerId)return}if("touchmove"===c.type){if(l=[...c.changedTouches].find(e=>e.identifier===n.touchId),!l||l.identifier!==n.touchId)return}else l=c;if(!n.isTouched)return void(n.startMoving&&n.isScrolling&&s.emit("touchMoveOpposite",c));const d=l.pageX,u=l.pageY;if(c.preventedByNestedSwiper)return i.startX=d,void(i.startY=u);if(!s.allowTouchMove)return c.target.matches(n.focusableElements)||(s.allowClick=!1),void(n.isTouched&&(Object.assign(i,{startX:d,startY:u,currentX:d,currentY:u}),n.touchStartTime=fx()));if(r.touchReleaseOnEdges&&!r.loop)if(s.isVertical()){if(u<i.startY&&s.translate<=s.maxTranslate()||u>i.startY&&s.translate>=s.minTranslate())return n.isTouched=!1,void(n.isMoved=!1)}else{if(a&&(d>i.startX&&-s.translate<=s.maxTranslate()||d<i.startX&&-s.translate>=s.minTranslate()))return;if(!a&&(d<i.startX&&s.translate<=s.maxTranslate()||d>i.startX&&s.translate>=s.minTranslate()))return}if(t.activeElement&&t.activeElement.matches(n.focusableElements)&&t.activeElement!==c.target&&"mouse"!==c.pointerType&&t.activeElement.blur(),t.activeElement&&c.target===t.activeElement&&c.target.matches(n.focusableElements))return n.isMoved=!0,void(s.allowClick=!1);n.allowTouchCallbacks&&s.emit("touchMove",c),i.previousX=i.currentX,i.previousY=i.currentY,i.currentX=d,i.currentY=u;const h=i.currentX-i.startX,p=i.currentY-i.startY;if(s.params.threshold&&Math.sqrt(h**2+p**2)<s.params.threshold)return;if(void 0===n.isScrolling){let e;s.isHorizontal()&&i.currentY===i.startY||s.isVertical()&&i.currentX===i.startX?n.isScrolling=!1:h*h+p*p>=25&&(e=180*Math.atan2(Math.abs(p),Math.abs(h))/Math.PI,n.isScrolling=s.isHorizontal()?e>r.touchAngle:90-e>r.touchAngle)}if(n.isScrolling&&s.emit("touchMoveOpposite",c),void 0===n.startMoving&&(i.currentX===i.startX&&i.currentY===i.startY||(n.startMoving=!0)),n.isScrolling||"touchmove"===c.type&&n.preventTouchMoveFromPointerMove)return void(n.isTouched=!1);if(!n.startMoving)return;s.allowClick=!1,!r.cssMode&&c.cancelable&&c.preventDefault(),r.touchMoveStopPropagation&&!r.nested&&c.stopPropagation();let m=s.isHorizontal()?h:p,f=s.isHorizontal()?i.currentX-i.previousX:i.currentY-i.previousY;r.oneWayMovement&&(m=Math.abs(m)*(a?1:-1),f=Math.abs(f)*(a?1:-1)),i.diff=m,m*=r.touchRatio,a&&(m=-m,f=-f);const g=s.touchesDirection;s.swipeDirection=m>0?"prev":"next",s.touchesDirection=f>0?"prev":"next";const y=s.params.loop&&!r.cssMode,x="next"===s.touchesDirection&&s.allowSlideNext||"prev"===s.touchesDirection&&s.allowSlidePrev;if(!n.isMoved){if(y&&x&&s.loopFix({direction:s.swipeDirection}),n.startTranslate=s.getTranslate(),s.setTransition(0),s.animating){const e=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});s.wrapperEl.dispatchEvent(e)}n.allowMomentumBounce=!1,!r.grabCursor||!0!==s.allowSlideNext&&!0!==s.allowSlidePrev||s.setGrabCursor(!0),s.emit("sliderFirstMove",c)}if((new Date).getTime(),!1!==r._loopSwapReset&&n.isMoved&&n.allowThresholdMove&&g!==s.touchesDirection&&y&&x&&Math.abs(m)>=1)return Object.assign(i,{startX:d,startY:u,currentX:d,currentY:u,startTranslate:n.currentTranslate}),n.loopSwapReset=!0,void(n.startTranslate=n.currentTranslate);s.emit("sliderMove",c),n.isMoved=!0,n.currentTranslate=m+n.startTranslate;let v=!0,b=r.resistanceRatio;if(r.touchReleaseOnEdges&&(b=0),m>0?(y&&x&&n.allowThresholdMove&&n.currentTranslate>(r.centeredSlides?s.minTranslate()-s.slidesSizesGrid[s.activeIndex+1]-("auto"!==r.slidesPerView&&s.slides.length-r.slidesPerView>=2?s.slidesSizesGrid[s.activeIndex+1]+s.params.spaceBetween:0)-s.params.spaceBetween:s.minTranslate())&&s.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),n.currentTranslate>s.minTranslate()&&(v=!1,r.resistance&&(n.currentTranslate=s.minTranslate()-1+(-s.minTranslate()+n.startTranslate+m)**b))):m<0&&(y&&x&&n.allowThresholdMove&&n.currentTranslate<(r.centeredSlides?s.maxTranslate()+s.slidesSizesGrid[s.slidesSizesGrid.length-1]+s.params.spaceBetween+("auto"!==r.slidesPerView&&s.slides.length-r.slidesPerView>=2?s.slidesSizesGrid[s.slidesSizesGrid.length-1]+s.params.spaceBetween:0):s.maxTranslate())&&s.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:s.slides.length-("auto"===r.slidesPerView?s.slidesPerViewDynamic():Math.ceil(parseFloat(r.slidesPerView,10)))}),n.currentTranslate<s.maxTranslate()&&(v=!1,r.resistance&&(n.currentTranslate=s.maxTranslate()+1-(s.maxTranslate()-n.startTranslate-m)**b))),v&&(c.preventedByNestedSwiper=!0),!s.allowSlideNext&&"next"===s.swipeDirection&&n.currentTranslate<n.startTranslate&&(n.currentTranslate=n.startTranslate),!s.allowSlidePrev&&"prev"===s.swipeDirection&&n.currentTranslate>n.startTranslate&&(n.currentTranslate=n.startTranslate),s.allowSlidePrev||s.allowSlideNext||(n.currentTranslate=n.startTranslate),r.threshold>0){if(!(Math.abs(m)>r.threshold||n.allowThresholdMove))return void(n.currentTranslate=n.startTranslate);if(!n.allowThresholdMove)return n.allowThresholdMove=!0,i.startX=i.currentX,i.startY=i.currentY,n.currentTranslate=n.startTranslate,void(i.diff=s.isHorizontal()?i.currentX-i.startX:i.currentY-i.startY)}r.followFinger&&!r.cssMode&&((r.freeMode&&r.freeMode.enabled&&s.freeMode||r.watchSlidesProgress)&&(s.updateActiveIndex(),s.updateSlidesClasses()),r.freeMode&&r.freeMode.enabled&&s.freeMode&&s.freeMode.onTouchMove(),s.updateProgress(n.currentTranslate),s.setTranslate(n.currentTranslate))}function Wx(e){const t=this,s=t.touchEventsData;let n,r=e;r.originalEvent&&(r=r.originalEvent);if("touchend"===r.type||"touchcancel"===r.type){if(n=[...r.changedTouches].find(e=>e.identifier===s.touchId),!n||n.identifier!==s.touchId)return}else{if(null!==s.touchId)return;if(r.pointerId!==s.pointerId)return;n=r}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(r.type)){if(!(["pointercancel","contextmenu"].includes(r.type)&&(t.browser.isSafari||t.browser.isWebView)))return}s.pointerId=null,s.touchId=null;const{params:i,touches:a,rtlTranslate:o,slidesGrid:l,enabled:c}=t;if(!c)return;if(!i.simulateTouch&&"mouse"===r.pointerType)return;if(s.allowTouchCallbacks&&t.emit("touchEnd",r),s.allowTouchCallbacks=!1,!s.isTouched)return s.isMoved&&i.grabCursor&&t.setGrabCursor(!1),s.isMoved=!1,void(s.startMoving=!1);i.grabCursor&&s.isMoved&&s.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);const d=fx(),u=d-s.touchStartTime;if(t.allowClick){const e=r.path||r.composedPath&&r.composedPath();t.updateClickedSlide(e&&e[0]||r.target,e),t.emit("tap click",r),u<300&&d-s.lastClickTime<300&&t.emit("doubleTap doubleClick",r)}if(s.lastClickTime=fx(),mx(()=>{t.destroyed||(t.allowClick=!0)}),!s.isTouched||!s.isMoved||!t.swipeDirection||0===a.diff&&!s.loopSwapReset||s.currentTranslate===s.startTranslate&&!s.loopSwapReset)return s.isTouched=!1,s.isMoved=!1,void(s.startMoving=!1);let h;if(s.isTouched=!1,s.isMoved=!1,s.startMoving=!1,h=i.followFinger?o?t.translate:-t.translate:-s.currentTranslate,i.cssMode)return;if(i.freeMode&&i.freeMode.enabled)return void t.freeMode.onTouchEnd({currentPos:h});const p=h>=-t.maxTranslate()&&!t.params.loop;let m=0,f=t.slidesSizesGrid[0];for(let b=0;b<l.length;b+=b<i.slidesPerGroupSkip?1:i.slidesPerGroup){const e=b<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;void 0!==l[b+e]?(p||h>=l[b]&&h<l[b+e])&&(m=b,f=l[b+e]-l[b]):(p||h>=l[b])&&(m=b,f=l[l.length-1]-l[l.length-2])}let g=null,y=null;i.rewind&&(t.isBeginning?y=i.virtual&&i.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(g=0));const x=(h-l[m])/f,v=m<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;if(u>i.longSwipesMs){if(!i.longSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&(x>=i.longSwipesRatio?t.slideTo(i.rewind&&t.isEnd?g:m+v):t.slideTo(m)),"prev"===t.swipeDirection&&(x>1-i.longSwipesRatio?t.slideTo(m+v):null!==y&&x<0&&Math.abs(x)>i.longSwipesRatio?t.slideTo(y):t.slideTo(m))}else{if(!i.shortSwipes)return void t.slideTo(t.activeIndex);t.navigation&&(r.target===t.navigation.nextEl||r.target===t.navigation.prevEl)?r.target===t.navigation.nextEl?t.slideTo(m+v):t.slideTo(m):("next"===t.swipeDirection&&t.slideTo(null!==g?g:m+v),"prev"===t.swipeDirection&&t.slideTo(null!==y?y:m))}}function Gx(){const e=this,{params:t,el:s}=e;if(s&&0===s.offsetWidth)return;t.breakpoints&&e.setBreakpoint();const{allowSlideNext:n,allowSlidePrev:r,snapGrid:i}=e,a=e.virtual&&e.params.virtual.enabled;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses();const o=a&&t.loop;!("auto"===t.slidesPerView||t.slidesPerView>1)||!e.isEnd||e.isBeginning||e.params.centeredSlides||o?e.params.loop&&!a?e.slideToLoop(e.realIndex,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0):e.slideTo(e.slides.length-1,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&(clearTimeout(e.autoplay.resizeTimeout),e.autoplay.resizeTimeout=setTimeout(()=>{e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.resume()},500)),e.allowSlidePrev=r,e.allowSlideNext=n,e.params.watchOverflow&&i!==e.snapGrid&&e.checkOverflow()}function Kx(e){const t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation())))}function Yx(){const e=this,{wrapperEl:t,rtlTranslate:s,enabled:n}=e;if(!n)return;let r;e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-t.scrollLeft:e.translate=-t.scrollTop,0===e.translate&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();const i=e.maxTranslate()-e.minTranslate();r=0===i?0:(e.translate-e.minTranslate())/i,r!==e.progress&&e.updateProgress(s?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}function Qx(e){const t=this;Fx(t,e.target),t.params.cssMode||"auto"!==t.params.slidesPerView&&!t.params.autoHeight||t.update()}function Xx(){const e=this;e.documentTouchHandlerProceeded||(e.documentTouchHandlerProceeded=!0,e.params.touchReleaseOnEdges&&(e.el.style.touchAction="auto"))}const Jx=(e,t)=>{const s=ux(),{params:n,el:r,wrapperEl:i,device:a}=e,o=!!n.nested,l="on"===t?"addEventListener":"removeEventListener",c=t;r&&"string"!=typeof r&&(s[l]("touchstart",e.onDocumentTouchStart,{passive:!1,capture:o}),r[l]("touchstart",e.onTouchStart,{passive:!1}),r[l]("pointerdown",e.onTouchStart,{passive:!1}),s[l]("touchmove",e.onTouchMove,{passive:!1,capture:o}),s[l]("pointermove",e.onTouchMove,{passive:!1,capture:o}),s[l]("touchend",e.onTouchEnd,{passive:!0}),s[l]("pointerup",e.onTouchEnd,{passive:!0}),s[l]("pointercancel",e.onTouchEnd,{passive:!0}),s[l]("touchcancel",e.onTouchEnd,{passive:!0}),s[l]("pointerout",e.onTouchEnd,{passive:!0}),s[l]("pointerleave",e.onTouchEnd,{passive:!0}),s[l]("contextmenu",e.onTouchEnd,{passive:!0}),(n.preventClicks||n.preventClicksPropagation)&&r[l]("click",e.onClick,!0),n.cssMode&&i[l]("scroll",e.onScroll),n.updateOnWindowResize?e[c](a.ios||a.android?"resize orientationchange observerUpdate":"resize observerUpdate",Gx,!0):e[c]("observerUpdate",Gx,!0),r[l]("load",e.onLoad,{capture:!0}))};const Zx=(e,t)=>e.grid&&t.grid&&t.grid.rows>1;var ev={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function tv(e,t){return function(s){void 0===s&&(s={});const n=Object.keys(s)[0],r=s[n];"object"==typeof r&&null!==r?(!0===e[n]&&(e[n]={enabled:!0}),"navigation"===n&&e[n]&&e[n].enabled&&!e[n].prevEl&&!e[n].nextEl&&(e[n].auto=!0),["pagination","scrollbar"].indexOf(n)>=0&&e[n]&&e[n].enabled&&!e[n].el&&(e[n].auto=!0),n in e&&"enabled"in r?("object"!=typeof e[n]||"enabled"in e[n]||(e[n].enabled=!0),e[n]||(e[n]={enabled:!1}),vx(t,s)):vx(t,s)):vx(t,s)}}const sv={eventsEmitter:{on(e,t,s){const n=this;if(!n.eventsListeners||n.destroyed)return n;if("function"!=typeof t)return n;const r=s?"unshift":"push";return e.split(" ").forEach(e=>{n.eventsListeners[e]||(n.eventsListeners[e]=[]),n.eventsListeners[e][r](t)}),n},once(e,t,s){const n=this;if(!n.eventsListeners||n.destroyed)return n;if("function"!=typeof t)return n;function r(){n.off(e,r),r.__emitterProxy&&delete r.__emitterProxy;for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];t.apply(n,i)}return r.__emitterProxy=t,n.on(e,r,s)},onAny(e,t){const s=this;if(!s.eventsListeners||s.destroyed)return s;if("function"!=typeof e)return s;const n=t?"unshift":"push";return s.eventsAnyListeners.indexOf(e)<0&&s.eventsAnyListeners[n](e),s},offAny(e){const t=this;if(!t.eventsListeners||t.destroyed)return t;if(!t.eventsAnyListeners)return t;const s=t.eventsAnyListeners.indexOf(e);return s>=0&&t.eventsAnyListeners.splice(s,1),t},off(e,t){const s=this;return!s.eventsListeners||s.destroyed?s:s.eventsListeners?(e.split(" ").forEach(e=>{void 0===t?s.eventsListeners[e]=[]:s.eventsListeners[e]&&s.eventsListeners[e].forEach((n,r)=>{(n===t||n.__emitterProxy&&n.__emitterProxy===t)&&s.eventsListeners[e].splice(r,1)})}),s):s},emit(){const e=this;if(!e.eventsListeners||e.destroyed)return e;if(!e.eventsListeners)return e;let t,s,n;for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];"string"==typeof i[0]||Array.isArray(i[0])?(t=i[0],s=i.slice(1,i.length),n=e):(t=i[0].events,s=i[0].data,n=i[0].context||e),s.unshift(n);return(Array.isArray(t)?t:t.split(" ")).forEach(t=>{e.eventsAnyListeners&&e.eventsAnyListeners.length&&e.eventsAnyListeners.forEach(e=>{e.apply(n,[t,...s])}),e.eventsListeners&&e.eventsListeners[t]&&e.eventsListeners[t].forEach(e=>{e.apply(n,s)})}),e}},update:{updateSize:function(){const e=this;let t,s;const n=e.el;t=void 0!==e.params.width&&null!==e.params.width?e.params.width:n.clientWidth,s=void 0!==e.params.height&&null!==e.params.height?e.params.height:n.clientHeight,0===t&&e.isHorizontal()||0===s&&e.isVertical()||(t=t-parseInt(jx(n,"padding-left")||0,10)-parseInt(jx(n,"padding-right")||0,10),s=s-parseInt(jx(n,"padding-top")||0,10)-parseInt(jx(n,"padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(s)&&(s=0),Object.assign(e,{width:t,height:s,size:e.isHorizontal()?t:s}))},updateSlides:function(){const e=this;function t(t,s){return parseFloat(t.getPropertyValue(e.getDirectionLabel(s))||0)}const s=e.params,{wrapperEl:n,slidesEl:r,size:i,rtlTranslate:a,wrongRTL:o}=e,l=e.virtual&&s.virtual.enabled,c=l?e.virtual.slides.length:e.slides.length,d=Nx(r,`.${e.params.slideClass}, swiper-slide`),u=l?e.virtual.slides.length:d.length;let h=[];const p=[],m=[];let f=s.slidesOffsetBefore;"function"==typeof f&&(f=s.slidesOffsetBefore.call(e));let g=s.slidesOffsetAfter;"function"==typeof g&&(g=s.slidesOffsetAfter.call(e));const y=e.snapGrid.length,x=e.slidesGrid.length;let v=s.spaceBetween,b=-f,w=0,N=0;if(void 0===i)return;"string"==typeof v&&v.indexOf("%")>=0?v=parseFloat(v.replace("%",""))/100*i:"string"==typeof v&&(v=parseFloat(v)),e.virtualSize=-v,d.forEach(e=>{a?e.style.marginLeft="":e.style.marginRight="",e.style.marginBottom="",e.style.marginTop=""}),s.centeredSlides&&s.cssMode&&(bx(n,"--swiper-centered-offset-before",""),bx(n,"--swiper-centered-offset-after",""));const S=s.grid&&s.grid.rows>1&&e.grid;let E;S?e.grid.initSlides(d):e.grid&&e.grid.unsetSlides();const j="auto"===s.slidesPerView&&s.breakpoints&&Object.keys(s.breakpoints).filter(e=>void 0!==s.breakpoints[e].slidesPerView).length>0;for(let T=0;T<u;T+=1){let n;if(E=0,d[T]&&(n=d[T]),S&&e.grid.updateSlide(T,n,d),!d[T]||"none"!==jx(n,"display")){if("auto"===s.slidesPerView){j&&(d[T].style[e.getDirectionLabel("width")]="");const r=getComputedStyle(n),i=n.style.transform,a=n.style.webkitTransform;if(i&&(n.style.transform="none"),a&&(n.style.webkitTransform="none"),s.roundLengths)E=e.isHorizontal()?Ix(n,"width"):Ix(n,"height");else{const e=t(r,"width"),s=t(r,"padding-left"),i=t(r,"padding-right"),a=t(r,"margin-left"),o=t(r,"margin-right"),l=r.getPropertyValue("box-sizing");if(l&&"border-box"===l)E=e+a+o;else{const{clientWidth:t,offsetWidth:r}=n;E=e+s+i+a+o+(r-t)}}i&&(n.style.transform=i),a&&(n.style.webkitTransform=a),s.roundLengths&&(E=Math.floor(E))}else E=(i-(s.slidesPerView-1)*v)/s.slidesPerView,s.roundLengths&&(E=Math.floor(E)),d[T]&&(d[T].style[e.getDirectionLabel("width")]=`${E}px`);d[T]&&(d[T].swiperSlideSize=E),m.push(E),s.centeredSlides?(b=b+E/2+w/2+v,0===w&&0!==T&&(b=b-i/2-v),0===T&&(b=b-i/2-v),Math.abs(b)<.001&&(b=0),s.roundLengths&&(b=Math.floor(b)),N%s.slidesPerGroup===0&&h.push(b),p.push(b)):(s.roundLengths&&(b=Math.floor(b)),(N-Math.min(e.params.slidesPerGroupSkip,N))%e.params.slidesPerGroup===0&&h.push(b),p.push(b),b=b+E+v),e.virtualSize+=E+v,w=E,N+=1}}if(e.virtualSize=Math.max(e.virtualSize,i)+g,a&&o&&("slide"===s.effect||"coverflow"===s.effect)&&(n.style.width=`${e.virtualSize+v}px`),s.setWrapperSize&&(n.style[e.getDirectionLabel("width")]=`${e.virtualSize+v}px`),S&&e.grid.updateWrapperSize(E,h),!s.centeredSlides){const t=[];for(let n=0;n<h.length;n+=1){let r=h[n];s.roundLengths&&(r=Math.floor(r)),h[n]<=e.virtualSize-i&&t.push(r)}h=t,Math.floor(e.virtualSize-i)-Math.floor(h[h.length-1])>1&&h.push(e.virtualSize-i)}if(l&&s.loop){const t=m[0]+v;if(s.slidesPerGroup>1){const n=Math.ceil((e.virtual.slidesBefore+e.virtual.slidesAfter)/s.slidesPerGroup),r=t*s.slidesPerGroup;for(let e=0;e<n;e+=1)h.push(h[h.length-1]+r)}for(let n=0;n<e.virtual.slidesBefore+e.virtual.slidesAfter;n+=1)1===s.slidesPerGroup&&h.push(h[h.length-1]+t),p.push(p[p.length-1]+t),e.virtualSize+=t}if(0===h.length&&(h=[0]),0!==v){const t=e.isHorizontal()&&a?"marginLeft":e.getDirectionLabel("marginRight");d.filter((e,t)=>!(s.cssMode&&!s.loop)||t!==d.length-1).forEach(e=>{e.style[t]=`${v}px`})}if(s.centeredSlides&&s.centeredSlidesBounds){let e=0;m.forEach(t=>{e+=t+(v||0)}),e-=v;const t=e>i?e-i:0;h=h.map(e=>e<=0?-f:e>t?t+g:e)}if(s.centerInsufficientSlides){let e=0;m.forEach(t=>{e+=t+(v||0)}),e-=v;const t=(s.slidesOffsetBefore||0)+(s.slidesOffsetAfter||0);if(e+t<i){const s=(i-e-t)/2;h.forEach((e,t)=>{h[t]=e-s}),p.forEach((e,t)=>{p[t]=e+s})}}if(Object.assign(e,{slides:d,snapGrid:h,slidesGrid:p,slidesSizesGrid:m}),s.centeredSlides&&s.cssMode&&!s.centeredSlidesBounds){bx(n,"--swiper-centered-offset-before",-h[0]+"px"),bx(n,"--swiper-centered-offset-after",e.size/2-m[m.length-1]/2+"px");const t=-e.snapGrid[0],s=-e.slidesGrid[0];e.snapGrid=e.snapGrid.map(e=>e+t),e.slidesGrid=e.slidesGrid.map(e=>e+s)}if(u!==c&&e.emit("slidesLengthChange"),h.length!==y&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),p.length!==x&&e.emit("slidesGridLengthChange"),s.watchSlidesProgress&&e.updateSlidesOffset(),e.emit("slidesUpdated"),!(l||s.cssMode||"slide"!==s.effect&&"fade"!==s.effect)){const t=`${s.containerModifierClass}backface-hidden`,n=e.el.classList.contains(t);u<=s.maxBackfaceHiddenSlides?n||e.el.classList.add(t):n&&e.el.classList.remove(t)}},updateAutoHeight:function(e){const t=this,s=[],n=t.virtual&&t.params.virtual.enabled;let r,i=0;"number"==typeof e?t.setTransition(e):!0===e&&t.setTransition(t.params.speed);const a=e=>n?t.slides[t.getSlideIndexByData(e)]:t.slides[e];if("auto"!==t.params.slidesPerView&&t.params.slidesPerView>1)if(t.params.centeredSlides)(t.visibleSlides||[]).forEach(e=>{s.push(e)});else for(r=0;r<Math.ceil(t.params.slidesPerView);r+=1){const e=t.activeIndex+r;if(e>t.slides.length&&!n)break;s.push(a(e))}else s.push(a(t.activeIndex));for(r=0;r<s.length;r+=1)if(void 0!==s[r]){const e=s[r].offsetHeight;i=e>i?e:i}(i||0===i)&&(t.wrapperEl.style.height=`${i}px`)},updateSlidesOffset:function(){const e=this,t=e.slides,s=e.isElement?e.isHorizontal()?e.wrapperEl.offsetLeft:e.wrapperEl.offsetTop:0;for(let n=0;n<t.length;n+=1)t[n].swiperSlideOffset=(e.isHorizontal()?t[n].offsetLeft:t[n].offsetTop)-s-e.cssOverflowAdjustment()},updateSlidesProgress:function(e){void 0===e&&(e=this&&this.translate||0);const t=this,s=t.params,{slides:n,rtlTranslate:r,snapGrid:i}=t;if(0===n.length)return;void 0===n[0].swiperSlideOffset&&t.updateSlidesOffset();let a=-e;r&&(a=e),t.visibleSlidesIndexes=[],t.visibleSlides=[];let o=s.spaceBetween;"string"==typeof o&&o.indexOf("%")>=0?o=parseFloat(o.replace("%",""))/100*t.size:"string"==typeof o&&(o=parseFloat(o));for(let l=0;l<n.length;l+=1){const e=n[l];let c=e.swiperSlideOffset;s.cssMode&&s.centeredSlides&&(c-=n[0].swiperSlideOffset);const d=(a+(s.centeredSlides?t.minTranslate():0)-c)/(e.swiperSlideSize+o),u=(a-i[0]+(s.centeredSlides?t.minTranslate():0)-c)/(e.swiperSlideSize+o),h=-(a-c),p=h+t.slidesSizesGrid[l],m=h>=0&&h<=t.size-t.slidesSizesGrid[l],f=h>=0&&h<t.size-1||p>1&&p<=t.size||h<=0&&p>=t.size;f&&(t.visibleSlides.push(e),t.visibleSlidesIndexes.push(l)),Dx(e,f,s.slideVisibleClass),Dx(e,m,s.slideFullyVisibleClass),e.progress=r?-d:d,e.originalProgress=r?-u:u}},updateProgress:function(e){const t=this;if(void 0===e){const s=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*s||0}const s=t.params,n=t.maxTranslate()-t.minTranslate();let{progress:r,isBeginning:i,isEnd:a,progressLoop:o}=t;const l=i,c=a;if(0===n)r=0,i=!0,a=!0;else{r=(e-t.minTranslate())/n;const s=Math.abs(e-t.minTranslate())<1,o=Math.abs(e-t.maxTranslate())<1;i=s||r<=0,a=o||r>=1,s&&(r=0),o&&(r=1)}if(s.loop){const s=t.getSlideIndexByData(0),n=t.getSlideIndexByData(t.slides.length-1),r=t.slidesGrid[s],i=t.slidesGrid[n],a=t.slidesGrid[t.slidesGrid.length-1],l=Math.abs(e);o=l>=r?(l-r)/a:(l+a-i)/a,o>1&&(o-=1)}Object.assign(t,{progress:r,progressLoop:o,isBeginning:i,isEnd:a}),(s.watchSlidesProgress||s.centeredSlides&&s.autoHeight)&&t.updateSlidesProgress(e),i&&!l&&t.emit("reachBeginning toEdge"),a&&!c&&t.emit("reachEnd toEdge"),(l&&!i||c&&!a)&&t.emit("fromEdge"),t.emit("progress",r)},updateSlidesClasses:function(){const e=this,{slides:t,params:s,slidesEl:n,activeIndex:r}=e,i=e.virtual&&s.virtual.enabled,a=e.grid&&s.grid&&s.grid.rows>1,o=e=>Nx(n,`.${s.slideClass}${e}, swiper-slide${e}`)[0];let l,c,d;if(i)if(s.loop){let t=r-e.virtual.slidesBefore;t<0&&(t=e.virtual.slides.length+t),t>=e.virtual.slides.length&&(t-=e.virtual.slides.length),l=o(`[data-swiper-slide-index="${t}"]`)}else l=o(`[data-swiper-slide-index="${r}"]`);else a?(l=t.find(e=>e.column===r),d=t.find(e=>e.column===r+1),c=t.find(e=>e.column===r-1)):l=t[r];l&&(a||(d=function(e,t){const s=[];for(;e.nextElementSibling;){const n=e.nextElementSibling;t?n.matches(t)&&s.push(n):s.push(n),e=n}return s}(l,`.${s.slideClass}, swiper-slide`)[0],s.loop&&!d&&(d=t[0]),c=function(e,t){const s=[];for(;e.previousElementSibling;){const n=e.previousElementSibling;t?n.matches(t)&&s.push(n):s.push(n),e=n}return s}(l,`.${s.slideClass}, swiper-slide`)[0],s.loop&&0===!c&&(c=t[t.length-1]))),t.forEach(e=>{Ux(e,e===l,s.slideActiveClass),Ux(e,e===d,s.slideNextClass),Ux(e,e===c,s.slidePrevClass)}),e.emitSlidesClasses()},updateActiveIndex:function(e){const t=this,s=t.rtlTranslate?t.translate:-t.translate,{snapGrid:n,params:r,activeIndex:i,realIndex:a,snapIndex:o}=t;let l,c=e;const d=e=>{let s=e-t.virtual.slidesBefore;return s<0&&(s=t.virtual.slides.length+s),s>=t.virtual.slides.length&&(s-=t.virtual.slides.length),s};if(void 0===c&&(c=function(e){const{slidesGrid:t,params:s}=e,n=e.rtlTranslate?e.translate:-e.translate;let r;for(let i=0;i<t.length;i+=1)void 0!==t[i+1]?n>=t[i]&&n<t[i+1]-(t[i+1]-t[i])/2?r=i:n>=t[i]&&n<t[i+1]&&(r=i+1):n>=t[i]&&(r=i);return s.normalizeSlideIndex&&(r<0||void 0===r)&&(r=0),r}(t)),n.indexOf(s)>=0)l=n.indexOf(s);else{const e=Math.min(r.slidesPerGroupSkip,c);l=e+Math.floor((c-e)/r.slidesPerGroup)}if(l>=n.length&&(l=n.length-1),c===i&&!t.params.loop)return void(l!==o&&(t.snapIndex=l,t.emit("snapIndexChange")));if(c===i&&t.params.loop&&t.virtual&&t.params.virtual.enabled)return void(t.realIndex=d(c));const u=t.grid&&r.grid&&r.grid.rows>1;let h;if(t.virtual&&r.virtual.enabled&&r.loop)h=d(c);else if(u){const e=t.slides.find(e=>e.column===c);let s=parseInt(e.getAttribute("data-swiper-slide-index"),10);Number.isNaN(s)&&(s=Math.max(t.slides.indexOf(e),0)),h=Math.floor(s/r.grid.rows)}else if(t.slides[c]){const e=t.slides[c].getAttribute("data-swiper-slide-index");h=e?parseInt(e,10):c}else h=c;Object.assign(t,{previousSnapIndex:o,snapIndex:l,previousRealIndex:a,realIndex:h,previousIndex:i,activeIndex:c}),t.initialized&&Bx(t),t.emit("activeIndexChange"),t.emit("snapIndexChange"),(t.initialized||t.params.runCallbacksOnInit)&&(a!==h&&t.emit("realIndexChange"),t.emit("slideChange"))},updateClickedSlide:function(e,t){const s=this,n=s.params;let r=e.closest(`.${n.slideClass}, swiper-slide`);!r&&s.isElement&&t&&t.length>1&&t.includes(e)&&[...t.slice(t.indexOf(e)+1,t.length)].forEach(e=>{!r&&e.matches&&e.matches(`.${n.slideClass}, swiper-slide`)&&(r=e)});let i,a=!1;if(r)for(let o=0;o<s.slides.length;o+=1)if(s.slides[o]===r){a=!0,i=o;break}if(!r||!a)return s.clickedSlide=void 0,void(s.clickedIndex=void 0);s.clickedSlide=r,s.virtual&&s.params.virtual.enabled?s.clickedIndex=parseInt(r.getAttribute("data-swiper-slide-index"),10):s.clickedIndex=i,n.slideToClickedSlide&&void 0!==s.clickedIndex&&s.clickedIndex!==s.activeIndex&&s.slideToClickedSlide()}},translate:{getTranslate:function(e){void 0===e&&(e=this.isHorizontal()?"x":"y");const{params:t,rtlTranslate:s,translate:n,wrapperEl:r}=this;if(t.virtualTranslate)return s?-n:n;if(t.cssMode)return n;let i=gx(r,e);return i+=this.cssOverflowAdjustment(),s&&(i=-i),i||0},setTranslate:function(e,t){const s=this,{rtlTranslate:n,params:r,wrapperEl:i,progress:a}=s;let o,l=0,c=0;s.isHorizontal()?l=n?-e:e:c=e,r.roundLengths&&(l=Math.floor(l),c=Math.floor(c)),s.previousTranslate=s.translate,s.translate=s.isHorizontal()?l:c,r.cssMode?i[s.isHorizontal()?"scrollLeft":"scrollTop"]=s.isHorizontal()?-l:-c:r.virtualTranslate||(s.isHorizontal()?l-=s.cssOverflowAdjustment():c-=s.cssOverflowAdjustment(),i.style.transform=`translate3d(${l}px, ${c}px, 0px)`);const d=s.maxTranslate()-s.minTranslate();o=0===d?0:(e-s.minTranslate())/d,o!==a&&s.updateProgress(e),s.emit("setTranslate",s.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(e,t,s,n,r){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===s&&(s=!0),void 0===n&&(n=!0);const i=this,{params:a,wrapperEl:o}=i;if(i.animating&&a.preventInteractionOnTransition)return!1;const l=i.minTranslate(),c=i.maxTranslate();let d;if(d=n&&e>l?l:n&&e<c?c:e,i.updateProgress(d),a.cssMode){const e=i.isHorizontal();if(0===t)o[e?"scrollLeft":"scrollTop"]=-d;else{if(!i.support.smoothScroll)return wx({swiper:i,targetPosition:-d,side:e?"left":"top"}),!0;o.scrollTo({[e?"left":"top"]:-d,behavior:"smooth"})}return!0}return 0===t?(i.setTransition(0),i.setTranslate(d),s&&(i.emit("beforeTransitionStart",t,r),i.emit("transitionEnd"))):(i.setTransition(t),i.setTranslate(d),s&&(i.emit("beforeTransitionStart",t,r),i.emit("transitionStart")),i.animating||(i.animating=!0,i.onTranslateToWrapperTransitionEnd||(i.onTranslateToWrapperTransitionEnd=function(e){i&&!i.destroyed&&e.target===this&&(i.wrapperEl.removeEventListener("transitionend",i.onTranslateToWrapperTransitionEnd),i.onTranslateToWrapperTransitionEnd=null,delete i.onTranslateToWrapperTransitionEnd,i.animating=!1,s&&i.emit("transitionEnd"))}),i.wrapperEl.addEventListener("transitionend",i.onTranslateToWrapperTransitionEnd))),!0}},transition:{setTransition:function(e,t){const s=this;s.params.cssMode||(s.wrapperEl.style.transitionDuration=`${e}ms`,s.wrapperEl.style.transitionDelay=0===e?"0ms":""),s.emit("setTransition",e,t)},transitionStart:function(e,t){void 0===e&&(e=!0);const s=this,{params:n}=s;n.cssMode||(n.autoHeight&&s.updateAutoHeight(),zx({swiper:s,runCallbacks:e,direction:t,step:"Start"}))},transitionEnd:function(e,t){void 0===e&&(e=!0);const s=this,{params:n}=s;s.animating=!1,n.cssMode||(s.setTransition(0),zx({swiper:s,runCallbacks:e,direction:t,step:"End"}))}},slide:{slideTo:function(e,t,s,n,r){void 0===e&&(e=0),void 0===s&&(s=!0),"string"==typeof e&&(e=parseInt(e,10));const i=this;let a=e;a<0&&(a=0);const{params:o,snapGrid:l,slidesGrid:c,previousIndex:d,activeIndex:u,rtlTranslate:h,wrapperEl:p,enabled:m}=i;if(!m&&!n&&!r||i.destroyed||i.animating&&o.preventInteractionOnTransition)return!1;void 0===t&&(t=i.params.speed);const f=Math.min(i.params.slidesPerGroupSkip,a);let g=f+Math.floor((a-f)/i.params.slidesPerGroup);g>=l.length&&(g=l.length-1);const y=-l[g];if(o.normalizeSlideIndex)for(let w=0;w<c.length;w+=1){const e=-Math.floor(100*y),t=Math.floor(100*c[w]),s=Math.floor(100*c[w+1]);void 0!==c[w+1]?e>=t&&e<s-(s-t)/2?a=w:e>=t&&e<s&&(a=w+1):e>=t&&(a=w)}if(i.initialized&&a!==u){if(!i.allowSlideNext&&(h?y>i.translate&&y>i.minTranslate():y<i.translate&&y<i.minTranslate()))return!1;if(!i.allowSlidePrev&&y>i.translate&&y>i.maxTranslate()&&(u||0)!==a)return!1}let x;a!==(d||0)&&s&&i.emit("beforeSlideChangeStart"),i.updateProgress(y),x=a>u?"next":a<u?"prev":"reset";const v=i.virtual&&i.params.virtual.enabled;if(!(v&&r)&&(h&&-y===i.translate||!h&&y===i.translate))return i.updateActiveIndex(a),o.autoHeight&&i.updateAutoHeight(),i.updateSlidesClasses(),"slide"!==o.effect&&i.setTranslate(y),"reset"!==x&&(i.transitionStart(s,x),i.transitionEnd(s,x)),!1;if(o.cssMode){const e=i.isHorizontal(),s=h?y:-y;if(0===t)v&&(i.wrapperEl.style.scrollSnapType="none",i._immediateVirtual=!0),v&&!i._cssModeVirtualInitialSet&&i.params.initialSlide>0?(i._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{p[e?"scrollLeft":"scrollTop"]=s})):p[e?"scrollLeft":"scrollTop"]=s,v&&requestAnimationFrame(()=>{i.wrapperEl.style.scrollSnapType="",i._immediateVirtual=!1});else{if(!i.support.smoothScroll)return wx({swiper:i,targetPosition:s,side:e?"left":"top"}),!0;p.scrollTo({[e?"left":"top"]:s,behavior:"smooth"})}return!0}const b=Mx().isSafari;return v&&!r&&b&&i.isElement&&i.virtual.update(!1,!1,a),i.setTransition(t),i.setTranslate(y),i.updateActiveIndex(a),i.updateSlidesClasses(),i.emit("beforeTransitionStart",t,n),i.transitionStart(s,x),0===t?i.transitionEnd(s,x):i.animating||(i.animating=!0,i.onSlideToWrapperTransitionEnd||(i.onSlideToWrapperTransitionEnd=function(e){i&&!i.destroyed&&e.target===this&&(i.wrapperEl.removeEventListener("transitionend",i.onSlideToWrapperTransitionEnd),i.onSlideToWrapperTransitionEnd=null,delete i.onSlideToWrapperTransitionEnd,i.transitionEnd(s,x))}),i.wrapperEl.addEventListener("transitionend",i.onSlideToWrapperTransitionEnd)),!0},slideToLoop:function(e,t,s,n){if(void 0===e&&(e=0),void 0===s&&(s=!0),"string"==typeof e){e=parseInt(e,10)}const r=this;if(r.destroyed)return;void 0===t&&(t=r.params.speed);const i=r.grid&&r.params.grid&&r.params.grid.rows>1;let a=e;if(r.params.loop)if(r.virtual&&r.params.virtual.enabled)a+=r.virtual.slidesBefore;else{let e;if(i){const t=a*r.params.grid.rows;e=r.slides.find(e=>1*e.getAttribute("data-swiper-slide-index")===t).column}else e=r.getSlideIndexByData(a);const t=i?Math.ceil(r.slides.length/r.params.grid.rows):r.slides.length,{centeredSlides:s}=r.params;let o=r.params.slidesPerView;"auto"===o?o=r.slidesPerViewDynamic():(o=Math.ceil(parseFloat(r.params.slidesPerView,10)),s&&o%2==0&&(o+=1));let l=t-e<o;if(s&&(l=l||e<Math.ceil(o/2)),n&&s&&"auto"!==r.params.slidesPerView&&!i&&(l=!1),l){const n=s?e<r.activeIndex?"prev":"next":e-r.activeIndex-1<r.params.slidesPerView?"next":"prev";r.loopFix({direction:n,slideTo:!0,activeSlideIndex:"next"===n?e+1:e-t+1,slideRealIndex:"next"===n?r.realIndex:void 0})}if(i){const e=a*r.params.grid.rows;a=r.slides.find(t=>1*t.getAttribute("data-swiper-slide-index")===e).column}else a=r.getSlideIndexByData(a)}return requestAnimationFrame(()=>{r.slideTo(a,t,s,n)}),r},slideNext:function(e,t,s){void 0===t&&(t=!0);const n=this,{enabled:r,params:i,animating:a}=n;if(!r||n.destroyed)return n;void 0===e&&(e=n.params.speed);let o=i.slidesPerGroup;"auto"===i.slidesPerView&&1===i.slidesPerGroup&&i.slidesPerGroupAuto&&(o=Math.max(n.slidesPerViewDynamic("current",!0),1));const l=n.activeIndex<i.slidesPerGroupSkip?1:o,c=n.virtual&&i.virtual.enabled;if(i.loop){if(a&&!c&&i.loopPreventsSliding)return!1;if(n.loopFix({direction:"next"}),n._clientLeft=n.wrapperEl.clientLeft,n.activeIndex===n.slides.length-1&&i.cssMode)return requestAnimationFrame(()=>{n.slideTo(n.activeIndex+l,e,t,s)}),!0}return i.rewind&&n.isEnd?n.slideTo(0,e,t,s):n.slideTo(n.activeIndex+l,e,t,s)},slidePrev:function(e,t,s){void 0===t&&(t=!0);const n=this,{params:r,snapGrid:i,slidesGrid:a,rtlTranslate:o,enabled:l,animating:c}=n;if(!l||n.destroyed)return n;void 0===e&&(e=n.params.speed);const d=n.virtual&&r.virtual.enabled;if(r.loop){if(c&&!d&&r.loopPreventsSliding)return!1;n.loopFix({direction:"prev"}),n._clientLeft=n.wrapperEl.clientLeft}function u(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}const h=u(o?n.translate:-n.translate),p=i.map(e=>u(e)),m=r.freeMode&&r.freeMode.enabled;let f=i[p.indexOf(h)-1];if(void 0===f&&(r.cssMode||m)){let e;i.forEach((t,s)=>{h>=t&&(e=s)}),void 0!==e&&(f=m?i[e]:i[e>0?e-1:e])}let g=0;if(void 0!==f&&(g=a.indexOf(f),g<0&&(g=n.activeIndex-1),"auto"===r.slidesPerView&&1===r.slidesPerGroup&&r.slidesPerGroupAuto&&(g=g-n.slidesPerViewDynamic("previous",!0)+1,g=Math.max(g,0))),r.rewind&&n.isBeginning){const r=n.params.virtual&&n.params.virtual.enabled&&n.virtual?n.virtual.slides.length-1:n.slides.length-1;return n.slideTo(r,e,t,s)}return r.loop&&0===n.activeIndex&&r.cssMode?(requestAnimationFrame(()=>{n.slideTo(g,e,t,s)}),!0):n.slideTo(g,e,t,s)},slideReset:function(e,t,s){void 0===t&&(t=!0);const n=this;if(!n.destroyed)return void 0===e&&(e=n.params.speed),n.slideTo(n.activeIndex,e,t,s)},slideToClosest:function(e,t,s,n){void 0===t&&(t=!0),void 0===n&&(n=.5);const r=this;if(r.destroyed)return;void 0===e&&(e=r.params.speed);let i=r.activeIndex;const a=Math.min(r.params.slidesPerGroupSkip,i),o=a+Math.floor((i-a)/r.params.slidesPerGroup),l=r.rtlTranslate?r.translate:-r.translate;if(l>=r.snapGrid[o]){const e=r.snapGrid[o];l-e>(r.snapGrid[o+1]-e)*n&&(i+=r.params.slidesPerGroup)}else{const e=r.snapGrid[o-1];l-e<=(r.snapGrid[o]-e)*n&&(i-=r.params.slidesPerGroup)}return i=Math.max(i,0),i=Math.min(i,r.slidesGrid.length-1),r.slideTo(i,e,t,s)},slideToClickedSlide:function(){const e=this;if(e.destroyed)return;const{params:t,slidesEl:s}=e,n="auto"===t.slidesPerView?e.slidesPerViewDynamic():t.slidesPerView;let r,i=e.getSlideIndexWhenGrid(e.clickedIndex);const a=e.isElement?"swiper-slide":`.${t.slideClass}`,o=e.grid&&e.params.grid&&e.params.grid.rows>1;if(t.loop){if(e.animating)return;r=parseInt(e.clickedSlide.getAttribute("data-swiper-slide-index"),10),t.centeredSlides?e.slideToLoop(r):i>(o?(e.slides.length-n)/2-(e.params.grid.rows-1):e.slides.length-n)?(e.loopFix(),i=e.getSlideIndex(Nx(s,`${a}[data-swiper-slide-index="${r}"]`)[0]),mx(()=>{e.slideTo(i)})):e.slideTo(i)}else e.slideTo(i)}},loop:{loopCreate:function(e,t){const s=this,{params:n,slidesEl:r}=s;if(!n.loop||s.virtual&&s.params.virtual.enabled)return;const i=()=>{Nx(r,`.${n.slideClass}, swiper-slide`).forEach((e,t)=>{e.setAttribute("data-swiper-slide-index",t)})},a=s.grid&&n.grid&&n.grid.rows>1;n.loopAddBlankSlides&&(n.slidesPerGroup>1||a)&&(()=>{const e=Nx(r,`.${n.slideBlankClass}`);e.forEach(e=>{e.remove()}),e.length>0&&(s.recalcSlides(),s.updateSlides())})();const o=n.slidesPerGroup*(a?n.grid.rows:1),l=s.slides.length%o!==0,c=a&&s.slides.length%n.grid.rows!==0,d=e=>{for(let t=0;t<e;t+=1){const e=s.isElement?Ex("swiper-slide",[n.slideBlankClass]):Ex("div",[n.slideClass,n.slideBlankClass]);s.slidesEl.append(e)}};if(l){if(n.loopAddBlankSlides){d(o-s.slides.length%o),s.recalcSlides(),s.updateSlides()}else Sx("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");i()}else if(c){if(n.loopAddBlankSlides){d(n.grid.rows-s.slides.length%n.grid.rows),s.recalcSlides(),s.updateSlides()}else Sx("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");i()}else i();s.loopFix({slideRealIndex:e,direction:n.centeredSlides?void 0:"next",initial:t})},loopFix:function(e){let{slideRealIndex:t,slideTo:s=!0,direction:n,setTranslate:r,activeSlideIndex:i,initial:a,byController:o,byMousewheel:l}=void 0===e?{}:e;const c=this;if(!c.params.loop)return;c.emit("beforeLoopFix");const{slides:d,allowSlidePrev:u,allowSlideNext:h,slidesEl:p,params:m}=c,{centeredSlides:f,initialSlide:g}=m;if(c.allowSlidePrev=!0,c.allowSlideNext=!0,c.virtual&&m.virtual.enabled)return s&&(m.centeredSlides||0!==c.snapIndex?m.centeredSlides&&c.snapIndex<m.slidesPerView?c.slideTo(c.virtual.slides.length+c.snapIndex,0,!1,!0):c.snapIndex===c.snapGrid.length-1&&c.slideTo(c.virtual.slidesBefore,0,!1,!0):c.slideTo(c.virtual.slides.length,0,!1,!0)),c.allowSlidePrev=u,c.allowSlideNext=h,void c.emit("loopFix");let y=m.slidesPerView;"auto"===y?y=c.slidesPerViewDynamic():(y=Math.ceil(parseFloat(m.slidesPerView,10)),f&&y%2==0&&(y+=1));const x=m.slidesPerGroupAuto?y:m.slidesPerGroup;let v=f?Math.max(x,Math.ceil(y/2)):x;v%x!==0&&(v+=x-v%x),v+=m.loopAdditionalSlides,c.loopedSlides=v;const b=c.grid&&m.grid&&m.grid.rows>1;d.length<y+v||"cards"===c.params.effect&&d.length<y+2*v?Sx("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled or not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):b&&"row"===m.grid.fill&&Sx("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const w=[],N=[],S=b?Math.ceil(d.length/m.grid.rows):d.length,E=a&&S-g<y&&!f;let j=E?g:c.activeIndex;void 0===i?i=c.getSlideIndex(d.find(e=>e.classList.contains(m.slideActiveClass))):j=i;const T="next"===n||!n,_="prev"===n||!n;let I=0,C=0;const k=(b?d[i].column:i)+(f&&void 0===r?-y/2+.5:0);if(k<v){I=Math.max(v-k,x);for(let e=0;e<v-k;e+=1){const t=e-Math.floor(e/S)*S;if(b){const e=S-t-1;for(let t=d.length-1;t>=0;t-=1)d[t].column===e&&w.push(t)}else w.push(S-t-1)}}else if(k+y>S-v){C=Math.max(k-(S-2*v),x),E&&(C=Math.max(C,y-S+g+1));for(let e=0;e<C;e+=1){const t=e-Math.floor(e/S)*S;b?d.forEach((e,s)=>{e.column===t&&N.push(s)}):N.push(t)}}if(c.__preventObserver__=!0,requestAnimationFrame(()=>{c.__preventObserver__=!1}),"cards"===c.params.effect&&d.length<y+2*v&&(N.includes(i)&&N.splice(N.indexOf(i),1),w.includes(i)&&w.splice(w.indexOf(i),1)),_&&w.forEach(e=>{d[e].swiperLoopMoveDOM=!0,p.prepend(d[e]),d[e].swiperLoopMoveDOM=!1}),T&&N.forEach(e=>{d[e].swiperLoopMoveDOM=!0,p.append(d[e]),d[e].swiperLoopMoveDOM=!1}),c.recalcSlides(),"auto"===m.slidesPerView?c.updateSlides():b&&(w.length>0&&_||N.length>0&&T)&&c.slides.forEach((e,t)=>{c.grid.updateSlide(t,e,c.slides)}),m.watchSlidesProgress&&c.updateSlidesOffset(),s)if(w.length>0&&_){if(void 0===t){const e=c.slidesGrid[j],t=c.slidesGrid[j+I]-e;l?c.setTranslate(c.translate-t):(c.slideTo(j+Math.ceil(I),0,!1,!0),r&&(c.touchEventsData.startTranslate=c.touchEventsData.startTranslate-t,c.touchEventsData.currentTranslate=c.touchEventsData.currentTranslate-t))}else if(r){const e=b?w.length/m.grid.rows:w.length;c.slideTo(c.activeIndex+e,0,!1,!0),c.touchEventsData.currentTranslate=c.translate}}else if(N.length>0&&T)if(void 0===t){const e=c.slidesGrid[j],t=c.slidesGrid[j-C]-e;l?c.setTranslate(c.translate-t):(c.slideTo(j-C,0,!1,!0),r&&(c.touchEventsData.startTranslate=c.touchEventsData.startTranslate-t,c.touchEventsData.currentTranslate=c.touchEventsData.currentTranslate-t))}else{const e=b?N.length/m.grid.rows:N.length;c.slideTo(c.activeIndex-e,0,!1,!0)}if(c.allowSlidePrev=u,c.allowSlideNext=h,c.controller&&c.controller.control&&!o){const e={slideRealIndex:t,direction:n,setTranslate:r,activeSlideIndex:i,byController:!0};Array.isArray(c.controller.control)?c.controller.control.forEach(t=>{!t.destroyed&&t.params.loop&&t.loopFix({...e,slideTo:t.params.slidesPerView===m.slidesPerView&&s})}):c.controller.control instanceof c.constructor&&c.controller.control.params.loop&&c.controller.control.loopFix({...e,slideTo:c.controller.control.params.slidesPerView===m.slidesPerView&&s})}c.emit("loopFix")},loopDestroy:function(){const e=this,{params:t,slidesEl:s}=e;if(!t.loop||!s||e.virtual&&e.params.virtual.enabled)return;e.recalcSlides();const n=[];e.slides.forEach(e=>{const t=void 0===e.swiperSlideIndex?1*e.getAttribute("data-swiper-slide-index"):e.swiperSlideIndex;n[t]=e}),e.slides.forEach(e=>{e.removeAttribute("data-swiper-slide-index")}),n.forEach(e=>{s.append(e)}),e.recalcSlides(),e.slideTo(e.realIndex,0)}},grabCursor:{setGrabCursor:function(e){const t=this;if(!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)return;const s="container"===t.params.touchEventsTarget?t.el:t.wrapperEl;t.isElement&&(t.__preventObserver__=!0),s.style.cursor="move",s.style.cursor=e?"grabbing":"grab",t.isElement&&requestAnimationFrame(()=>{t.__preventObserver__=!1})},unsetGrabCursor:function(){const e=this;e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e.isElement&&(e.__preventObserver__=!0),e["container"===e.params.touchEventsTarget?"el":"wrapperEl"].style.cursor="",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1}))}},events:{attachEvents:function(){const e=this,{params:t}=e;e.onTouchStart=$x.bind(e),e.onTouchMove=Hx.bind(e),e.onTouchEnd=Wx.bind(e),e.onDocumentTouchStart=Xx.bind(e),t.cssMode&&(e.onScroll=Yx.bind(e)),e.onClick=Kx.bind(e),e.onLoad=Qx.bind(e),Jx(e,"on")},detachEvents:function(){Jx(this,"off")}},breakpoints:{setBreakpoint:function(){const e=this,{realIndex:t,initialized:s,params:n,el:r}=e,i=n.breakpoints;if(!i||i&&0===Object.keys(i).length)return;const a=ux(),o="window"!==n.breakpointsBase&&n.breakpointsBase?"container":n.breakpointsBase,l=["window","container"].includes(n.breakpointsBase)||!n.breakpointsBase?e.el:a.querySelector(n.breakpointsBase),c=e.getBreakpoint(i,o,l);if(!c||e.currentBreakpoint===c)return;const d=(c in i?i[c]:void 0)||e.originalParams,u=Zx(e,n),h=Zx(e,d),p=e.params.grabCursor,m=d.grabCursor,f=n.enabled;u&&!h?(r.classList.remove(`${n.containerModifierClass}grid`,`${n.containerModifierClass}grid-column`),e.emitContainerClasses()):!u&&h&&(r.classList.add(`${n.containerModifierClass}grid`),(d.grid.fill&&"column"===d.grid.fill||!d.grid.fill&&"column"===n.grid.fill)&&r.classList.add(`${n.containerModifierClass}grid-column`),e.emitContainerClasses()),p&&!m?e.unsetGrabCursor():!p&&m&&e.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(t=>{if(void 0===d[t])return;const s=n[t]&&n[t].enabled,r=d[t]&&d[t].enabled;s&&!r&&e[t].disable(),!s&&r&&e[t].enable()});const g=d.direction&&d.direction!==n.direction,y=n.loop&&(d.slidesPerView!==n.slidesPerView||g),x=n.loop;g&&s&&e.changeDirection(),vx(e.params,d);const v=e.params.enabled,b=e.params.loop;Object.assign(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),f&&!v?e.disable():!f&&v&&e.enable(),e.currentBreakpoint=c,e.emit("_beforeBreakpoint",d),s&&(y?(e.loopDestroy(),e.loopCreate(t),e.updateSlides()):!x&&b?(e.loopCreate(t),e.updateSlides()):x&&!b&&e.loopDestroy()),e.emit("breakpoint",d)},getBreakpoint:function(e,t,s){if(void 0===t&&(t="window"),!e||"container"===t&&!s)return;let n=!1;const r=px(),i="window"===t?r.innerHeight:s.clientHeight,a=Object.keys(e).map(e=>{if("string"==typeof e&&0===e.indexOf("@")){const t=parseFloat(e.substr(1));return{value:i*t,point:e}}return{value:e,point:e}});a.sort((e,t)=>parseInt(e.value,10)-parseInt(t.value,10));for(let o=0;o<a.length;o+=1){const{point:e,value:i}=a[o];"window"===t?r.matchMedia(`(min-width: ${i}px)`).matches&&(n=e):i<=s.clientWidth&&(n=e)}return n||"max"}},checkOverflow:{checkOverflow:function(){const e=this,{isLocked:t,params:s}=e,{slidesOffsetBefore:n}=s;if(n){const t=e.slides.length-1,s=e.slidesGrid[t]+e.slidesSizesGrid[t]+2*n;e.isLocked=e.size>s}else e.isLocked=1===e.snapGrid.length;!0===s.allowSlideNext&&(e.allowSlideNext=!e.isLocked),!0===s.allowSlidePrev&&(e.allowSlidePrev=!e.isLocked),t&&t!==e.isLocked&&(e.isEnd=!1),t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock")}},classes:{addClasses:function(){const e=this,{classNames:t,params:s,rtl:n,el:r,device:i}=e,a=function(e,t){const s=[];return e.forEach(e=>{"object"==typeof e?Object.keys(e).forEach(n=>{e[n]&&s.push(t+n)}):"string"==typeof e&&s.push(t+e)}),s}(["initialized",s.direction,{"free-mode":e.params.freeMode&&s.freeMode.enabled},{autoheight:s.autoHeight},{rtl:n},{grid:s.grid&&s.grid.rows>1},{"grid-column":s.grid&&s.grid.rows>1&&"column"===s.grid.fill},{android:i.android},{ios:i.ios},{"css-mode":s.cssMode},{centered:s.cssMode&&s.centeredSlides},{"watch-progress":s.watchSlidesProgress}],s.containerModifierClass);t.push(...a),r.classList.add(...t),e.emitContainerClasses()},removeClasses:function(){const{el:e,classNames:t}=this;e&&"string"!=typeof e&&(e.classList.remove(...t),this.emitContainerClasses())}}},nv={};let rv=class e{constructor(){let t,s;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];1===r.length&&r[0].constructor&&"Object"===Object.prototype.toString.call(r[0]).slice(8,-1)?s=r[0]:[t,s]=r,s||(s={}),s=vx({},s),t&&!s.el&&(s.el=t);const a=ux();if(s.el&&"string"==typeof s.el&&a.querySelectorAll(s.el).length>1){const t=[];return a.querySelectorAll(s.el).forEach(n=>{const r=vx({},s,{el:n});t.push(new e(r))}),t}const o=this;o.__swiper__=!0,o.support=Rx(),o.device=Lx({userAgent:s.userAgent}),o.browser=Mx(),o.eventsListeners={},o.eventsAnyListeners=[],o.modules=[...o.__modules__],s.modules&&Array.isArray(s.modules)&&o.modules.push(...s.modules);const l={};o.modules.forEach(e=>{e({params:s,swiper:o,extendParams:tv(s,l),on:o.on.bind(o),once:o.once.bind(o),off:o.off.bind(o),emit:o.emit.bind(o)})});const c=vx({},ev,l);return o.params=vx({},c,nv,s),o.originalParams=vx({},o.params),o.passedParams=vx({},s),o.params&&o.params.on&&Object.keys(o.params.on).forEach(e=>{o.on(e,o.params.on[e])}),o.params&&o.params.onAny&&o.onAny(o.params.onAny),Object.assign(o,{enabled:o.params.enabled,el:t,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:()=>"horizontal"===o.params.direction,isVertical:()=>"vertical"===o.params.direction,activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:o.params.allowSlideNext,allowSlidePrev:o.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:o.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:o.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),o.emit("_swiper"),o.params.init&&o.init(),o}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:t,params:s}=this,n=Tx(Nx(t,`.${s.slideClass}, swiper-slide`)[0]);return Tx(e)-n}getSlideIndexByData(e){return this.getSlideIndex(this.slides.find(t=>1*t.getAttribute("data-swiper-slide-index")===e))}getSlideIndexWhenGrid(e){return this.grid&&this.params.grid&&this.params.grid.rows>1&&("column"===this.params.grid.fill?e=Math.floor(e/this.params.grid.rows):"row"===this.params.grid.fill&&(e%=Math.ceil(this.slides.length/this.params.grid.rows))),e}recalcSlides(){const{slidesEl:e,params:t}=this;this.slides=Nx(e,`.${t.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const s=this;e=Math.min(Math.max(e,0),1);const n=s.minTranslate(),r=(s.maxTranslate()-n)*e+n;s.translateTo(r,void 0===t?0:t),s.updateActiveIndex(),s.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter(t=>0===t.indexOf("swiper")||0===t.indexOf(e.params.containerModifierClass));e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter(e=>0===e.indexOf("swiper-slide")||0===e.indexOf(t.params.slideClass)).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach(s=>{const n=e.getSlideClasses(s);t.push({slideEl:s,classNames:n}),e.emit("_slideClass",s,n)}),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){void 0===e&&(e="current"),void 0===t&&(t=!1);const{params:s,slides:n,slidesGrid:r,slidesSizesGrid:i,size:a,activeIndex:o}=this;let l=1;if("number"==typeof s.slidesPerView)return s.slidesPerView;if(s.centeredSlides){let e,t=n[o]?Math.ceil(n[o].swiperSlideSize):0;for(let s=o+1;s<n.length;s+=1)n[s]&&!e&&(t+=Math.ceil(n[s].swiperSlideSize),l+=1,t>a&&(e=!0));for(let s=o-1;s>=0;s-=1)n[s]&&!e&&(t+=n[s].swiperSlideSize,l+=1,t>a&&(e=!0))}else if("current"===e)for(let c=o+1;c<n.length;c+=1){(t?r[c]+i[c]-r[o]<a:r[c]-r[o]<a)&&(l+=1)}else for(let c=o-1;c>=0;c-=1){r[o]-r[c]<a&&(l+=1)}return l}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:s}=e;function n(){const t=e.rtlTranslate?-1*e.translate:e.translate,s=Math.min(Math.max(t,e.maxTranslate()),e.minTranslate());e.setTranslate(s),e.updateActiveIndex(),e.updateSlidesClasses()}let r;if(s.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(t=>{t.complete&&Fx(e,t)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),s.freeMode&&s.freeMode.enabled&&!s.cssMode)n(),s.autoHeight&&e.updateAutoHeight();else{if(("auto"===s.slidesPerView||s.slidesPerView>1)&&e.isEnd&&!s.centeredSlides){const t=e.virtual&&s.virtual.enabled?e.virtual.slides:e.slides;r=e.slideTo(t.length-1,0,!1,!0)}else r=e.slideTo(e.activeIndex,0,!1,!0);r||n()}s.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){void 0===t&&(t=!0);const s=this,n=s.params.direction;return e||(e="horizontal"===n?"vertical":"horizontal"),e===n||"horizontal"!==e&&"vertical"!==e||(s.el.classList.remove(`${s.params.containerModifierClass}${n}`),s.el.classList.add(`${s.params.containerModifierClass}${e}`),s.emitContainerClasses(),s.params.direction=e,s.slides.forEach(t=>{"vertical"===e?t.style.width="":t.style.height=""}),s.emit("changeDirection"),t&&s.update()),s}changeLanguageDirection(e){const t=this;t.rtl&&"rtl"===e||!t.rtl&&"ltr"===e||(t.rtl="rtl"===e,t.rtlTranslate="horizontal"===t.params.direction&&t.rtl,t.rtl?(t.el.classList.add(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.el.classList.remove(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let s=e||t.params.el;if("string"==typeof s&&(s=document.querySelector(s)),!s)return!1;s.swiper=t,s.parentNode&&s.parentNode.host&&s.parentNode.host.nodeName===t.params.swiperElementNodeName.toUpperCase()&&(t.isElement=!0);const n=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`;let r=(()=>{if(s&&s.shadowRoot&&s.shadowRoot.querySelector){return s.shadowRoot.querySelector(n())}return Nx(s,n())[0]})();return!r&&t.params.createElements&&(r=Ex("div",t.params.wrapperClass),s.append(r),Nx(s,`.${t.params.slideClass}`).forEach(e=>{r.append(e)})),Object.assign(t,{el:s,wrapperEl:r,slidesEl:t.isElement&&!s.parentNode.host.slideSlots?s.parentNode.host:r,hostEl:t.isElement?s.parentNode.host:s,mounted:!0,rtl:"rtl"===s.dir.toLowerCase()||"rtl"===jx(s,"direction"),rtlTranslate:"horizontal"===t.params.direction&&("rtl"===s.dir.toLowerCase()||"rtl"===jx(s,"direction")),wrongRTL:"-webkit-box"===jx(r,"display")}),!0}init(e){const t=this;if(t.initialized)return t;if(!1===t.mount(e))return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(void 0,!0),t.attachEvents();const s=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&s.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),s.forEach(e=>{e.complete?Fx(t,e):e.addEventListener("load",e=>{Fx(t,e.target)})}),Bx(t),t.initialized=!0,Bx(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);const s=this,{params:n,el:r,wrapperEl:i,slides:a}=s;return void 0===s.params||s.destroyed||(s.emit("beforeDestroy"),s.initialized=!1,s.detachEvents(),n.loop&&s.loopDestroy(),t&&(s.removeClasses(),r&&"string"!=typeof r&&r.removeAttribute("style"),i&&i.removeAttribute("style"),a&&a.length&&a.forEach(e=>{e.classList.remove(n.slideVisibleClass,n.slideFullyVisibleClass,n.slideActiveClass,n.slideNextClass,n.slidePrevClass),e.removeAttribute("style"),e.removeAttribute("data-swiper-slide-index")})),s.emit("destroy"),Object.keys(s.eventsListeners).forEach(e=>{s.off(e)}),!1!==e&&(s.el&&"string"!=typeof s.el&&(s.el.swiper=null),function(e){const t=e;Object.keys(t).forEach(e=>{try{t[e]=null}catch(s){}try{delete t[e]}catch(s){}})}(s)),s.destroyed=!0),null}static extendDefaults(e){vx(nv,e)}static get extendedDefaults(){return nv}static get defaults(){return ev}static installModule(t){e.prototype.__modules__||(e.prototype.__modules__=[]);const s=e.prototype.__modules__;"function"==typeof t&&s.indexOf(t)<0&&s.push(t)}static use(t){return Array.isArray(t)?(t.forEach(t=>e.installModule(t)),e):(e.installModule(t),e)}};Object.keys(sv).forEach(e=>{Object.keys(sv[e]).forEach(t=>{rv.prototype[t]=sv[e][t]})}),rv.use([function(e){let{swiper:t,on:s,emit:n}=e;const r=px();let i=null,a=null;const o=()=>{t&&!t.destroyed&&t.initialized&&(n("beforeResize"),n("resize"))},l=()=>{t&&!t.destroyed&&t.initialized&&n("orientationchange")};s("init",()=>{t.params.resizeObserver&&void 0!==r.ResizeObserver?t&&!t.destroyed&&t.initialized&&(i=new ResizeObserver(e=>{a=r.requestAnimationFrame(()=>{const{width:s,height:n}=t;let r=s,i=n;e.forEach(e=>{let{contentBoxSize:s,contentRect:n,target:a}=e;a&&a!==t.el||(r=n?n.width:(s[0]||s).inlineSize,i=n?n.height:(s[0]||s).blockSize)}),r===s&&i===n||o()})}),i.observe(t.el)):(r.addEventListener("resize",o),r.addEventListener("orientationchange",l))}),s("destroy",()=>{a&&r.cancelAnimationFrame(a),i&&i.unobserve&&t.el&&(i.unobserve(t.el),i=null),r.removeEventListener("resize",o),r.removeEventListener("orientationchange",l)})},function(e){let{swiper:t,extendParams:s,on:n,emit:r}=e;const i=[],a=px(),o=function(e,s){void 0===s&&(s={});const n=new(a.MutationObserver||a.WebkitMutationObserver)(e=>{if(t.__preventObserver__)return;if(1===e.length)return void r("observerUpdate",e[0]);const s=function(){r("observerUpdate",e[0])};a.requestAnimationFrame?a.requestAnimationFrame(s):a.setTimeout(s,0)});n.observe(e,{attributes:void 0===s.attributes||s.attributes,childList:t.isElement||(void 0===s.childList||s).childList,characterData:void 0===s.characterData||s.characterData}),i.push(n)};s({observer:!1,observeParents:!1,observeSlideChildren:!1}),n("init",()=>{if(t.params.observer){if(t.params.observeParents){const e=_x(t.hostEl);for(let t=0;t<e.length;t+=1)o(e[t])}o(t.hostEl,{childList:t.params.observeSlideChildren}),o(t.wrapperEl,{attributes:!1})}}),n("destroy",()=>{i.forEach(e=>{e.disconnect()}),i.splice(0,i.length)})}]);const iv=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function av(e){return"object"==typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)&&!e.__swiper__}function ov(e,t){const s=["__proto__","constructor","prototype"];Object.keys(t).filter(e=>s.indexOf(e)<0).forEach(s=>{void 0===e[s]?e[s]=t[s]:av(t[s])&&av(e[s])&&Object.keys(t[s]).length>0?t[s].__swiper__?e[s]=t[s]:ov(e[s],t[s]):e[s]=t[s]})}function lv(e){return void 0===e&&(e={}),e.navigation&&void 0===e.navigation.nextEl&&void 0===e.navigation.prevEl}function cv(e){return void 0===e&&(e={}),e.pagination&&void 0===e.pagination.el}function dv(e){return void 0===e&&(e={}),e.scrollbar&&void 0===e.scrollbar.el}function uv(e){void 0===e&&(e="");const t=e.split(" ").map(e=>e.trim()).filter(e=>!!e),s=[];return t.forEach(e=>{s.indexOf(e)<0&&s.push(e)}),s.join(" ")}function hv(e){return void 0===e&&(e=""),e?e.includes("swiper-wrapper")?e:`swiper-wrapper ${e}`:"swiper-wrapper"}function pv(){return pv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},pv.apply(this,arguments)}function mv(e){return e.type&&e.type.displayName&&e.type.displayName.includes("SwiperSlide")}function fv(e){const t=[];return l.Children.toArray(e).forEach(e=>{mv(e)?t.push(e):e.props&&e.props.children&&fv(e.props.children).forEach(e=>t.push(e))}),t}function gv(e){const t=[],s={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return l.Children.toArray(e).forEach(e=>{if(mv(e))t.push(e);else if(e.props&&e.props.slot&&s[e.props.slot])s[e.props.slot].push(e);else if(e.props&&e.props.children){const n=fv(e.props.children);n.length>0?n.forEach(e=>t.push(e)):s["container-end"].push(e)}else s["container-end"].push(e)}),{slides:t,slots:s}}function yv(e,t){return"undefined"==typeof window?n.useEffect(e,t):n.useLayoutEffect(e,t)}const xv=n.createContext(null),vv=n.createContext(null),bv=n.forwardRef(function(e,t){let{className:s,tag:r="div",wrapperTag:i="div",children:a,onSwiper:o,...c}=void 0===e?{}:e,d=!1;const[u,h]=n.useState("swiper"),[p,m]=n.useState(null),[f,g]=n.useState(!1),y=n.useRef(!1),x=n.useRef(null),v=n.useRef(null),b=n.useRef(null),w=n.useRef(null),N=n.useRef(null),S=n.useRef(null),E=n.useRef(null),j=n.useRef(null),{params:T,passedParams:_,rest:I,events:C}=function(e,t){void 0===e&&(e={}),void 0===t&&(t=!0);const s={on:{}},n={},r={};ov(s,ev),s._emitClasses=!0,s.init=!1;const i={},a=iv.map(e=>e.replace(/_/,"")),o=Object.assign({},e);return Object.keys(o).forEach(o=>{void 0!==e[o]&&(a.indexOf(o)>=0?av(e[o])?(s[o]={},r[o]={},ov(s[o],e[o]),ov(r[o],e[o])):(s[o]=e[o],r[o]=e[o]):0===o.search(/on[A-Z]/)&&"function"==typeof e[o]?t?n[`${o[2].toLowerCase()}${o.substr(3)}`]=e[o]:s.on[`${o[2].toLowerCase()}${o.substr(3)}`]=e[o]:i[o]=e[o])}),["navigation","pagination","scrollbar"].forEach(e=>{!0===s[e]&&(s[e]={}),!1===s[e]&&delete s[e]}),{params:s,passedParams:r,rest:i,events:n}}(c),{slides:k,slots:A}=gv(a),P=()=>{g(!f)};Object.assign(T.on,{_containerClasses(e,t){h(t)}});const O=()=>{Object.assign(T.on,C),d=!0;const e={...T};if(delete e.wrapperClass,v.current=new rv(e),v.current.virtual&&v.current.params.virtual.enabled){v.current.virtual.slides=k;const e={cache:!1,slides:k,renderExternal:m,renderExternalUpdate:!1};ov(v.current.params.virtual,e),ov(v.current.originalParams.virtual,e)}};x.current||O(),v.current&&v.current.on("_beforeBreakpoint",P);return n.useEffect(()=>()=>{v.current&&v.current.off("_beforeBreakpoint",P)}),n.useEffect(()=>{!y.current&&v.current&&(v.current.emitSlidesClasses(),y.current=!0)}),yv(()=>{if(t&&(t.current=x.current),x.current)return v.current.destroyed&&O(),function(e,t){let{el:s,nextEl:n,prevEl:r,paginationEl:i,scrollbarEl:a,swiper:o}=e;lv(t)&&n&&r&&(o.params.navigation.nextEl=n,o.originalParams.navigation.nextEl=n,o.params.navigation.prevEl=r,o.originalParams.navigation.prevEl=r),cv(t)&&i&&(o.params.pagination.el=i,o.originalParams.pagination.el=i),dv(t)&&a&&(o.params.scrollbar.el=a,o.originalParams.scrollbar.el=a),o.init(s)}({el:x.current,nextEl:N.current,prevEl:S.current,paginationEl:E.current,scrollbarEl:j.current,swiper:v.current},T),o&&!v.current.destroyed&&o(v.current),()=>{v.current&&!v.current.destroyed&&v.current.destroy(!0,!1)}},[]),yv(()=>{!d&&C&&v.current&&Object.keys(C).forEach(e=>{v.current.on(e,C[e])});const e=function(e,t,s,n,r){const i=[];if(!t)return i;const a=e=>{i.indexOf(e)<0&&i.push(e)};if(s&&n){const e=n.map(r),t=s.map(r);e.join("")!==t.join("")&&a("children"),n.length!==s.length&&a("children")}return iv.filter(e=>"_"===e[0]).map(e=>e.replace(/_/,"")).forEach(s=>{if(s in e&&s in t)if(av(e[s])&&av(t[s])){const n=Object.keys(e[s]),r=Object.keys(t[s]);n.length!==r.length?a(s):(n.forEach(n=>{e[s][n]!==t[s][n]&&a(s)}),r.forEach(n=>{e[s][n]!==t[s][n]&&a(s)}))}else e[s]!==t[s]&&a(s)}),i}(_,b.current,k,w.current,e=>e.key);return b.current=_,w.current=k,e.length&&v.current&&!v.current.destroyed&&function(e){let{swiper:t,slides:s,passedParams:n,changedParams:r,nextEl:i,prevEl:a,scrollbarEl:o,paginationEl:l}=e;const c=r.filter(e=>"children"!==e&&"direction"!==e&&"wrapperClass"!==e),{params:d,pagination:u,navigation:h,scrollbar:p,virtual:m,thumbs:f}=t;let g,y,x,v,b,w,N,S;r.includes("thumbs")&&n.thumbs&&n.thumbs.swiper&&!n.thumbs.swiper.destroyed&&d.thumbs&&(!d.thumbs.swiper||d.thumbs.swiper.destroyed)&&(g=!0),r.includes("controller")&&n.controller&&n.controller.control&&d.controller&&!d.controller.control&&(y=!0),r.includes("pagination")&&n.pagination&&(n.pagination.el||l)&&(d.pagination||!1===d.pagination)&&u&&!u.el&&(x=!0),r.includes("scrollbar")&&n.scrollbar&&(n.scrollbar.el||o)&&(d.scrollbar||!1===d.scrollbar)&&p&&!p.el&&(v=!0),r.includes("navigation")&&n.navigation&&(n.navigation.prevEl||a)&&(n.navigation.nextEl||i)&&(d.navigation||!1===d.navigation)&&h&&!h.prevEl&&!h.nextEl&&(b=!0);const E=e=>{t[e]&&(t[e].destroy(),"navigation"===e?(t.isElement&&(t[e].prevEl.remove(),t[e].nextEl.remove()),d[e].prevEl=void 0,d[e].nextEl=void 0,t[e].prevEl=void 0,t[e].nextEl=void 0):(t.isElement&&t[e].el.remove(),d[e].el=void 0,t[e].el=void 0))};r.includes("loop")&&t.isElement&&(d.loop&&!n.loop?w=!0:!d.loop&&n.loop?N=!0:S=!0),c.forEach(e=>{if(av(d[e])&&av(n[e]))Object.assign(d[e],n[e]),"navigation"!==e&&"pagination"!==e&&"scrollbar"!==e||!("enabled"in n[e])||n[e].enabled||E(e);else{const t=n[e];!0!==t&&!1!==t||"navigation"!==e&&"pagination"!==e&&"scrollbar"!==e?d[e]=n[e]:!1===t&&E(e)}}),c.includes("controller")&&!y&&t.controller&&t.controller.control&&d.controller&&d.controller.control&&(t.controller.control=d.controller.control),r.includes("children")&&s&&m&&d.virtual.enabled?(m.slides=s,m.update(!0)):r.includes("virtual")&&m&&d.virtual.enabled&&(s&&(m.slides=s),m.update(!0)),r.includes("children")&&s&&d.loop&&(S=!0),g&&f.init()&&f.update(!0);y&&(t.controller.control=d.controller.control),x&&(!t.isElement||l&&"string"!=typeof l||(l=document.createElement("div"),l.classList.add("swiper-pagination"),l.part.add("pagination"),t.el.appendChild(l)),l&&(d.pagination.el=l),u.init(),u.render(),u.update()),v&&(!t.isElement||o&&"string"!=typeof o||(o=document.createElement("div"),o.classList.add("swiper-scrollbar"),o.part.add("scrollbar"),t.el.appendChild(o)),o&&(d.scrollbar.el=o),p.init(),p.updateSize(),p.setTranslate()),b&&(t.isElement&&(i&&"string"!=typeof i||(i=document.createElement("div"),i.classList.add("swiper-button-next"),kx(i,t.hostEl.constructor.nextButtonSvg),i.part.add("button-next"),t.el.appendChild(i)),a&&"string"!=typeof a||(a=document.createElement("div"),a.classList.add("swiper-button-prev"),kx(a,t.hostEl.constructor.prevButtonSvg),a.part.add("button-prev"),t.el.appendChild(a))),i&&(d.navigation.nextEl=i),a&&(d.navigation.prevEl=a),h.init(),h.update()),r.includes("allowSlideNext")&&(t.allowSlideNext=n.allowSlideNext),r.includes("allowSlidePrev")&&(t.allowSlidePrev=n.allowSlidePrev),r.includes("direction")&&t.changeDirection(n.direction,!1),(w||S)&&t.loopDestroy(),(N||S)&&t.loopCreate(),t.update()}({swiper:v.current,slides:k,passedParams:_,changedParams:e,nextEl:N.current,prevEl:S.current,scrollbarEl:j.current,paginationEl:E.current}),()=>{C&&v.current&&Object.keys(C).forEach(e=>{v.current.off(e,C[e])})}}),yv(()=>{var e;!(e=v.current)||e.destroyed||!e.params.virtual||e.params.virtual&&!e.params.virtual.enabled||(e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.emit("_virtualUpdated"),e.parallax&&e.params.parallax&&e.params.parallax.enabled&&e.parallax.setTranslate())},[p]),l.createElement(r,pv({ref:x,className:uv(`${u}${s?` ${s}`:""}`)},I),l.createElement(vv.Provider,{value:v.current},A["container-start"],l.createElement(i,{className:hv(T.wrapperClass)},A["wrapper-start"],T.virtual?function(e,t,s){if(!s)return null;const n=e=>{let s=e;return e<0?s=t.length+e:s>=t.length&&(s-=t.length),s},r=e.isHorizontal()?{[e.rtlTranslate?"right":"left"]:`${s.offset}px`}:{top:`${s.offset}px`},{from:i,to:a}=s,o=e.params.loop?-t.length:0,c=e.params.loop?2*t.length:t.length,d=[];for(let l=o;l<c;l+=1)l>=i&&l<=a&&d.push(t[n(l)]);return d.map((t,s)=>l.cloneElement(t,{swiper:e,style:r,key:t.props.virtualIndex||t.key||`slide-${s}`}))}(v.current,k,p):k.map((e,t)=>l.cloneElement(e,{swiper:v.current,swiperSlideIndex:t})),A["wrapper-end"]),lv(T)&&l.createElement(l.Fragment,null,l.createElement("div",{ref:S,className:"swiper-button-prev"}),l.createElement("div",{ref:N,className:"swiper-button-next"})),dv(T)&&l.createElement("div",{ref:j,className:"swiper-scrollbar"}),cv(T)&&l.createElement("div",{ref:E,className:"swiper-pagination"}),A["container-end"]))});bv.displayName="Swiper";const wv=n.forwardRef(function(e,t){let{tag:s="div",children:r,className:i="",swiper:a,zoom:o,lazy:c,virtualIndex:d,swiperSlideIndex:u,...h}=void 0===e?{}:e;const p=n.useRef(null),[m,f]=n.useState("swiper-slide"),[g,y]=n.useState(!1);function x(e,t,s){t===p.current&&f(s)}yv(()=>{if(void 0!==u&&(p.current.swiperSlideIndex=u),t&&(t.current=p.current),p.current&&a){if(!a.destroyed)return a.on("_slideClass",x),()=>{a&&a.off("_slideClass",x)};"swiper-slide"!==m&&f("swiper-slide")}}),yv(()=>{a&&p.current&&!a.destroyed&&f(a.getSlideClasses(p.current))},[a]);const v={isActive:m.indexOf("swiper-slide-active")>=0,isVisible:m.indexOf("swiper-slide-visible")>=0,isPrev:m.indexOf("swiper-slide-prev")>=0,isNext:m.indexOf("swiper-slide-next")>=0},b=()=>"function"==typeof r?r(v):r;return l.createElement(s,pv({ref:p,className:uv(`${m}${i?` ${i}`:""}`),"data-swiper-slide-index":d,onLoad:()=>{y(!0)}},h),o&&l.createElement(xv.Provider,{value:v},l.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":"number"==typeof o?o:void 0},b(),c&&!g&&l.createElement("div",{className:"swiper-lazy-preloader"}))),!o&&l.createElement(xv.Provider,{value:v},b(),c&&!g&&l.createElement("div",{className:"swiper-lazy-preloader"})))});function Nv(e,t,s,n){return e.params.createElements&&Object.keys(n).forEach(r=>{if(!s[r]&&!0===s.auto){let i=Nx(e.el,`.${n[r]}`)[0];i||(i=Ex("div",n[r]),i.className=n[r],e.el.append(i)),s[r]=i,t[r]=i}}),s}function Sv(e){let{swiper:t,extendParams:s,on:n,emit:r}=e;function i(e){let s;return e&&"string"==typeof e&&t.isElement&&(s=t.el.querySelector(e)||t.hostEl.querySelector(e),s)?s:(e&&("string"==typeof e&&(s=[...document.querySelectorAll(e)]),t.params.uniqueNavElements&&"string"==typeof e&&s&&s.length>1&&1===t.el.querySelectorAll(e).length?s=t.el.querySelector(e):s&&1===s.length&&(s=s[0])),e&&!s?e:s)}function a(e,s){const n=t.params.navigation;(e=Cx(e)).forEach(e=>{e&&(e.classList[s?"add":"remove"](...n.disabledClass.split(" ")),"BUTTON"===e.tagName&&(e.disabled=s),t.params.watchOverflow&&t.enabled&&e.classList[t.isLocked?"add":"remove"](n.lockClass))})}function o(){const{nextEl:e,prevEl:s}=t.navigation;if(t.params.loop)return a(s,!1),void a(e,!1);a(s,t.isBeginning&&!t.params.rewind),a(e,t.isEnd&&!t.params.rewind)}function l(e){e.preventDefault(),(!t.isBeginning||t.params.loop||t.params.rewind)&&(t.slidePrev(),r("navigationPrev"))}function c(e){e.preventDefault(),(!t.isEnd||t.params.loop||t.params.rewind)&&(t.slideNext(),r("navigationNext"))}function d(){const e=t.params.navigation;if(t.params.navigation=Nv(t,t.originalParams.navigation,t.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!e.nextEl&&!e.prevEl)return;let s=i(e.nextEl),n=i(e.prevEl);Object.assign(t.navigation,{nextEl:s,prevEl:n}),s=Cx(s),n=Cx(n);const r=(s,n)=>{s&&s.addEventListener("click","next"===n?c:l),!t.enabled&&s&&s.classList.add(...e.lockClass.split(" "))};s.forEach(e=>r(e,"next")),n.forEach(e=>r(e,"prev"))}function u(){let{nextEl:e,prevEl:s}=t.navigation;e=Cx(e),s=Cx(s);const n=(e,s)=>{e.removeEventListener("click","next"===s?c:l),e.classList.remove(...t.params.navigation.disabledClass.split(" "))};e.forEach(e=>n(e,"next")),s.forEach(e=>n(e,"prev"))}s({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),t.navigation={nextEl:null,prevEl:null},n("init",()=>{!1===t.params.navigation.enabled?h():(d(),o())}),n("toEdge fromEdge lock unlock",()=>{o()}),n("destroy",()=>{u()}),n("enable disable",()=>{let{nextEl:e,prevEl:s}=t.navigation;e=Cx(e),s=Cx(s),t.enabled?o():[...e,...s].filter(e=>!!e).forEach(e=>e.classList.add(t.params.navigation.lockClass))}),n("click",(e,s)=>{let{nextEl:n,prevEl:i}=t.navigation;n=Cx(n),i=Cx(i);const a=s.target;let o=i.includes(a)||n.includes(a);if(t.isElement&&!o){const e=s.path||s.composedPath&&s.composedPath();e&&(o=e.find(e=>n.includes(e)||i.includes(e)))}if(t.params.navigation.hideOnClick&&!o){if(t.pagination&&t.params.pagination&&t.params.pagination.clickable&&(t.pagination.el===a||t.pagination.el.contains(a)))return;let e;n.length?e=n[0].classList.contains(t.params.navigation.hiddenClass):i.length&&(e=i[0].classList.contains(t.params.navigation.hiddenClass)),r(!0===e?"navigationShow":"navigationHide"),[...n,...i].filter(e=>!!e).forEach(e=>e.classList.toggle(t.params.navigation.hiddenClass))}});const h=()=>{t.el.classList.add(...t.params.navigation.navigationDisabledClass.split(" ")),u()};Object.assign(t.navigation,{enable:()=>{t.el.classList.remove(...t.params.navigation.navigationDisabledClass.split(" ")),d(),o()},disable:h,update:o,init:d,destroy:u})}function Ev(e){return void 0===e&&(e=""),`.${e.trim().replace(/([\.:!+\/()[\]])/g,"\\$1").replace(/ /g,".")}`}function jv(e){let{swiper:t,extendParams:s,on:n,emit:r}=e;const i="swiper-pagination";let a;s({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:e=>e,formatFractionTotal:e=>e,bulletClass:`${i}-bullet`,bulletActiveClass:`${i}-bullet-active`,modifierClass:`${i}-`,currentClass:`${i}-current`,totalClass:`${i}-total`,hiddenClass:`${i}-hidden`,progressbarFillClass:`${i}-progressbar-fill`,progressbarOppositeClass:`${i}-progressbar-opposite`,clickableClass:`${i}-clickable`,lockClass:`${i}-lock`,horizontalClass:`${i}-horizontal`,verticalClass:`${i}-vertical`,paginationDisabledClass:`${i}-disabled`}}),t.pagination={el:null,bullets:[]};let o=0;function l(){return!t.params.pagination.el||!t.pagination.el||Array.isArray(t.pagination.el)&&0===t.pagination.el.length}function c(e,s){const{bulletActiveClass:n}=t.params.pagination;e&&(e=e[("prev"===s?"previous":"next")+"ElementSibling"])&&(e.classList.add(`${n}-${s}`),(e=e[("prev"===s?"previous":"next")+"ElementSibling"])&&e.classList.add(`${n}-${s}-${s}`))}function d(e){const s=e.target.closest(Ev(t.params.pagination.bulletClass));if(!s)return;e.preventDefault();const n=Tx(s)*t.params.slidesPerGroup;if(t.params.loop){if(t.realIndex===n)return;const e=(r=t.realIndex,i=n,a=t.slides.length,(i%=a)===1+(r%=a)?"next":i===r-1?"previous":void 0);"next"===e?t.slideNext():"previous"===e?t.slidePrev():t.slideToLoop(n)}else t.slideTo(n);var r,i,a}function u(){const e=t.rtl,s=t.params.pagination;if(l())return;let n,i,d=t.pagination.el;d=Cx(d);const u=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.slides.length,h=t.params.loop?Math.ceil(u/t.params.slidesPerGroup):t.snapGrid.length;if(t.params.loop?(i=t.previousRealIndex||0,n=t.params.slidesPerGroup>1?Math.floor(t.realIndex/t.params.slidesPerGroup):t.realIndex):void 0!==t.snapIndex?(n=t.snapIndex,i=t.previousSnapIndex):(i=t.previousIndex||0,n=t.activeIndex||0),"bullets"===s.type&&t.pagination.bullets&&t.pagination.bullets.length>0){const r=t.pagination.bullets;let l,u,h;if(s.dynamicBullets&&(a=Ix(r[0],t.isHorizontal()?"width":"height"),d.forEach(e=>{e.style[t.isHorizontal()?"width":"height"]=a*(s.dynamicMainBullets+4)+"px"}),s.dynamicMainBullets>1&&void 0!==i&&(o+=n-(i||0),o>s.dynamicMainBullets-1?o=s.dynamicMainBullets-1:o<0&&(o=0)),l=Math.max(n-o,0),u=l+(Math.min(r.length,s.dynamicMainBullets)-1),h=(u+l)/2),r.forEach(e=>{const t=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(e=>`${s.bulletActiveClass}${e}`)].map(e=>"string"==typeof e&&e.includes(" ")?e.split(" "):e).flat();e.classList.remove(...t)}),d.length>1)r.forEach(e=>{const r=Tx(e);r===n?e.classList.add(...s.bulletActiveClass.split(" ")):t.isElement&&e.setAttribute("part","bullet"),s.dynamicBullets&&(r>=l&&r<=u&&e.classList.add(...`${s.bulletActiveClass}-main`.split(" ")),r===l&&c(e,"prev"),r===u&&c(e,"next"))});else{const e=r[n];if(e&&e.classList.add(...s.bulletActiveClass.split(" ")),t.isElement&&r.forEach((e,t)=>{e.setAttribute("part",t===n?"bullet-active":"bullet")}),s.dynamicBullets){const e=r[l],t=r[u];for(let n=l;n<=u;n+=1)r[n]&&r[n].classList.add(...`${s.bulletActiveClass}-main`.split(" "));c(e,"prev"),c(t,"next")}}if(s.dynamicBullets){const n=Math.min(r.length,s.dynamicMainBullets+4),i=(a*n-a)/2-h*a,o=e?"right":"left";r.forEach(e=>{e.style[t.isHorizontal()?o:"top"]=`${i}px`})}}d.forEach((e,i)=>{if("fraction"===s.type&&(e.querySelectorAll(Ev(s.currentClass)).forEach(e=>{e.textContent=s.formatFractionCurrent(n+1)}),e.querySelectorAll(Ev(s.totalClass)).forEach(e=>{e.textContent=s.formatFractionTotal(h)})),"progressbar"===s.type){let r;r=s.progressbarOpposite?t.isHorizontal()?"vertical":"horizontal":t.isHorizontal()?"horizontal":"vertical";const i=(n+1)/h;let a=1,o=1;"horizontal"===r?a=i:o=i,e.querySelectorAll(Ev(s.progressbarFillClass)).forEach(e=>{e.style.transform=`translate3d(0,0,0) scaleX(${a}) scaleY(${o})`,e.style.transitionDuration=`${t.params.speed}ms`})}"custom"===s.type&&s.renderCustom?(kx(e,s.renderCustom(t,n+1,h)),0===i&&r("paginationRender",e)):(0===i&&r("paginationRender",e),r("paginationUpdate",e)),t.params.watchOverflow&&t.enabled&&e.classList[t.isLocked?"add":"remove"](s.lockClass)})}function h(){const e=t.params.pagination;if(l())return;const s=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.grid&&t.params.grid.rows>1?t.slides.length/Math.ceil(t.params.grid.rows):t.slides.length;let n=t.pagination.el;n=Cx(n);let i="";if("bullets"===e.type){let n=t.params.loop?Math.ceil(s/t.params.slidesPerGroup):t.snapGrid.length;t.params.freeMode&&t.params.freeMode.enabled&&n>s&&(n=s);for(let s=0;s<n;s+=1)e.renderBullet?i+=e.renderBullet.call(t,s,e.bulletClass):i+=`<${e.bulletElement} ${t.isElement?'part="bullet"':""} class="${e.bulletClass}"></${e.bulletElement}>`}"fraction"===e.type&&(i=e.renderFraction?e.renderFraction.call(t,e.currentClass,e.totalClass):`<span class="${e.currentClass}"></span> / <span class="${e.totalClass}"></span>`),"progressbar"===e.type&&(i=e.renderProgressbar?e.renderProgressbar.call(t,e.progressbarFillClass):`<span class="${e.progressbarFillClass}"></span>`),t.pagination.bullets=[],n.forEach(s=>{"custom"!==e.type&&kx(s,i||""),"bullets"===e.type&&t.pagination.bullets.push(...s.querySelectorAll(Ev(e.bulletClass)))}),"custom"!==e.type&&r("paginationRender",n[0])}function p(){t.params.pagination=Nv(t,t.originalParams.pagination,t.params.pagination,{el:"swiper-pagination"});const e=t.params.pagination;if(!e.el)return;let s;"string"==typeof e.el&&t.isElement&&(s=t.el.querySelector(e.el)),s||"string"!=typeof e.el||(s=[...document.querySelectorAll(e.el)]),s||(s=e.el),s&&0!==s.length&&(t.params.uniqueNavElements&&"string"==typeof e.el&&Array.isArray(s)&&s.length>1&&(s=[...t.el.querySelectorAll(e.el)],s.length>1&&(s=s.find(e=>_x(e,".swiper")[0]===t.el))),Array.isArray(s)&&1===s.length&&(s=s[0]),Object.assign(t.pagination,{el:s}),s=Cx(s),s.forEach(s=>{"bullets"===e.type&&e.clickable&&s.classList.add(...(e.clickableClass||"").split(" ")),s.classList.add(e.modifierClass+e.type),s.classList.add(t.isHorizontal()?e.horizontalClass:e.verticalClass),"bullets"===e.type&&e.dynamicBullets&&(s.classList.add(`${e.modifierClass}${e.type}-dynamic`),o=0,e.dynamicMainBullets<1&&(e.dynamicMainBullets=1)),"progressbar"===e.type&&e.progressbarOpposite&&s.classList.add(e.progressbarOppositeClass),e.clickable&&s.addEventListener("click",d),t.enabled||s.classList.add(e.lockClass)}))}function m(){const e=t.params.pagination;if(l())return;let s=t.pagination.el;s&&(s=Cx(s),s.forEach(s=>{s.classList.remove(e.hiddenClass),s.classList.remove(e.modifierClass+e.type),s.classList.remove(t.isHorizontal()?e.horizontalClass:e.verticalClass),e.clickable&&(s.classList.remove(...(e.clickableClass||"").split(" ")),s.removeEventListener("click",d))})),t.pagination.bullets&&t.pagination.bullets.forEach(t=>t.classList.remove(...e.bulletActiveClass.split(" ")))}n("changeDirection",()=>{if(!t.pagination||!t.pagination.el)return;const e=t.params.pagination;let{el:s}=t.pagination;s=Cx(s),s.forEach(s=>{s.classList.remove(e.horizontalClass,e.verticalClass),s.classList.add(t.isHorizontal()?e.horizontalClass:e.verticalClass)})}),n("init",()=>{!1===t.params.pagination.enabled?f():(p(),h(),u())}),n("activeIndexChange",()=>{void 0===t.snapIndex&&u()}),n("snapIndexChange",()=>{u()}),n("snapGridLengthChange",()=>{h(),u()}),n("destroy",()=>{m()}),n("enable disable",()=>{let{el:e}=t.pagination;e&&(e=Cx(e),e.forEach(e=>e.classList[t.enabled?"remove":"add"](t.params.pagination.lockClass)))}),n("lock unlock",()=>{u()}),n("click",(e,s)=>{const n=s.target,i=Cx(t.pagination.el);if(t.params.pagination.el&&t.params.pagination.hideOnClick&&i&&i.length>0&&!n.classList.contains(t.params.pagination.bulletClass)){if(t.navigation&&(t.navigation.nextEl&&n===t.navigation.nextEl||t.navigation.prevEl&&n===t.navigation.prevEl))return;const e=i[0].classList.contains(t.params.pagination.hiddenClass);r(!0===e?"paginationShow":"paginationHide"),i.forEach(e=>e.classList.toggle(t.params.pagination.hiddenClass))}});const f=()=>{t.el.classList.add(t.params.pagination.paginationDisabledClass);let{el:e}=t.pagination;e&&(e=Cx(e),e.forEach(e=>e.classList.add(t.params.pagination.paginationDisabledClass))),m()};Object.assign(t.pagination,{enable:()=>{t.el.classList.remove(t.params.pagination.paginationDisabledClass);let{el:e}=t.pagination;e&&(e=Cx(e),e.forEach(e=>e.classList.remove(t.params.pagination.paginationDisabledClass))),p(),h(),u()},disable:f,render:h,update:u,init:p,destroy:m})}function Tv(e){let t,s,{swiper:n,extendParams:r,on:i,emit:a,params:o}=e;n.autoplay={running:!1,paused:!1,timeLeft:0},r({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let l,c,d,u,h,p,m,f,g=o&&o.autoplay?o.autoplay.delay:3e3,y=o&&o.autoplay?o.autoplay.delay:3e3,x=(new Date).getTime();function v(e){n&&!n.destroyed&&n.wrapperEl&&e.target===n.wrapperEl&&(n.wrapperEl.removeEventListener("transitionend",v),f||e.detail&&e.detail.bySwiperTouchMove||j())}const b=()=>{if(n.destroyed||!n.autoplay.running)return;n.autoplay.paused?c=!0:c&&(y=l,c=!1);const e=n.autoplay.paused?l:x+y-(new Date).getTime();n.autoplay.timeLeft=e,a("autoplayTimeLeft",e,e/g),s=requestAnimationFrame(()=>{b()})},w=e=>{if(n.destroyed||!n.autoplay.running)return;cancelAnimationFrame(s),b();let r=void 0===e?n.params.autoplay.delay:e;g=n.params.autoplay.delay,y=n.params.autoplay.delay;const i=(()=>{let e;if(e=n.virtual&&n.params.virtual.enabled?n.slides.find(e=>e.classList.contains("swiper-slide-active")):n.slides[n.activeIndex],!e)return;return parseInt(e.getAttribute("data-swiper-autoplay"),10)})();!Number.isNaN(i)&&i>0&&void 0===e&&(r=i,g=i,y=i),l=r;const o=n.params.speed,c=()=>{n&&!n.destroyed&&(n.params.autoplay.reverseDirection?!n.isBeginning||n.params.loop||n.params.rewind?(n.slidePrev(o,!0,!0),a("autoplay")):n.params.autoplay.stopOnLastSlide||(n.slideTo(n.slides.length-1,o,!0,!0),a("autoplay")):!n.isEnd||n.params.loop||n.params.rewind?(n.slideNext(o,!0,!0),a("autoplay")):n.params.autoplay.stopOnLastSlide||(n.slideTo(0,o,!0,!0),a("autoplay")),n.params.cssMode&&(x=(new Date).getTime(),requestAnimationFrame(()=>{w()})))};return r>0?(clearTimeout(t),t=setTimeout(()=>{c()},r)):requestAnimationFrame(()=>{c()}),r},N=()=>{x=(new Date).getTime(),n.autoplay.running=!0,w(),a("autoplayStart")},S=()=>{n.autoplay.running=!1,clearTimeout(t),cancelAnimationFrame(s),a("autoplayStop")},E=(e,s)=>{if(n.destroyed||!n.autoplay.running)return;clearTimeout(t),e||(m=!0);const r=()=>{a("autoplayPause"),n.params.autoplay.waitForTransition?n.wrapperEl.addEventListener("transitionend",v):j()};if(n.autoplay.paused=!0,s)return p&&(l=n.params.autoplay.delay),p=!1,void r();const i=l||n.params.autoplay.delay;l=i-((new Date).getTime()-x),n.isEnd&&l<0&&!n.params.loop||(l<0&&(l=0),r())},j=()=>{n.isEnd&&l<0&&!n.params.loop||n.destroyed||!n.autoplay.running||(x=(new Date).getTime(),m?(m=!1,w(l)):w(),n.autoplay.paused=!1,a("autoplayResume"))},T=()=>{if(n.destroyed||!n.autoplay.running)return;const e=ux();"hidden"===e.visibilityState&&(m=!0,E(!0)),"visible"===e.visibilityState&&j()},_=e=>{"mouse"===e.pointerType&&(m=!0,f=!0,n.animating||n.autoplay.paused||E(!0))},I=e=>{"mouse"===e.pointerType&&(f=!1,n.autoplay.paused&&j())};i("init",()=>{n.params.autoplay.enabled&&(n.params.autoplay.pauseOnMouseEnter&&(n.el.addEventListener("pointerenter",_),n.el.addEventListener("pointerleave",I)),ux().addEventListener("visibilitychange",T),N())}),i("destroy",()=>{n.el&&"string"!=typeof n.el&&(n.el.removeEventListener("pointerenter",_),n.el.removeEventListener("pointerleave",I)),ux().removeEventListener("visibilitychange",T),n.autoplay.running&&S()}),i("_freeModeStaticRelease",()=>{(u||m)&&j()}),i("_freeModeNoMomentumRelease",()=>{n.params.autoplay.disableOnInteraction?S():E(!0,!0)}),i("beforeTransitionStart",(e,t,s)=>{!n.destroyed&&n.autoplay.running&&(s||!n.params.autoplay.disableOnInteraction?E(!0,!0):S())}),i("sliderFirstMove",()=>{!n.destroyed&&n.autoplay.running&&(n.params.autoplay.disableOnInteraction?S():(d=!0,u=!1,m=!1,h=setTimeout(()=>{m=!0,u=!0,E(!0)},200)))}),i("touchEnd",()=>{if(!n.destroyed&&n.autoplay.running&&d){if(clearTimeout(h),clearTimeout(t),n.params.autoplay.disableOnInteraction)return u=!1,void(d=!1);u&&n.params.cssMode&&j(),u=!1,d=!1}}),i("slideChange",()=>{!n.destroyed&&n.autoplay.running&&(p=!0)}),Object.assign(n.autoplay,{start:N,stop:S,pause:E,resume:j})}function _v(e){let t,s,n,r,{swiper:i,extendParams:a,on:o}=e;a({grid:{rows:1,fill:"column"}});const l=()=>{let e=i.params.spaceBetween;return"string"==typeof e&&e.indexOf("%")>=0?e=parseFloat(e.replace("%",""))/100*i.size:"string"==typeof e&&(e=parseFloat(e)),e};o("init",()=>{r=i.params.grid&&i.params.grid.rows>1}),o("update",()=>{const{params:e,el:t}=i,s=e.grid&&e.grid.rows>1;r&&!s?(t.classList.remove(`${e.containerModifierClass}grid`,`${e.containerModifierClass}grid-column`),n=1,i.emitContainerClasses()):!r&&s&&(t.classList.add(`${e.containerModifierClass}grid`),"column"===e.grid.fill&&t.classList.add(`${e.containerModifierClass}grid-column`),i.emitContainerClasses()),r=s}),i.grid={initSlides:e=>{const{slidesPerView:r}=i.params,{rows:a,fill:o}=i.params.grid,l=i.virtual&&i.params.virtual.enabled?i.virtual.slides.length:e.length;n=Math.floor(l/a),t=Math.floor(l/a)===l/a?l:Math.ceil(l/a)*a,"auto"!==r&&"row"===o&&(t=Math.max(t,r*a)),s=t/a},unsetSlides:()=>{i.slides&&i.slides.forEach(e=>{e.swiperSlideGridSet&&(e.style.height="",e.style[i.getDirectionLabel("margin-top")]="")})},updateSlide:(e,r,a)=>{const{slidesPerGroup:o}=i.params,c=l(),{rows:d,fill:u}=i.params.grid,h=i.virtual&&i.params.virtual.enabled?i.virtual.slides.length:a.length;let p,m,f;if("row"===u&&o>1){const s=Math.floor(e/(o*d)),n=e-d*o*s,i=0===s?o:Math.min(Math.ceil((h-s*d*o)/d),o);f=Math.floor(n/i),m=n-f*i+s*o,p=m+f*t/d,r.style.order=p}else"column"===u?(m=Math.floor(e/d),f=e-m*d,(m>n||m===n&&f===d-1)&&(f+=1,f>=d&&(f=0,m+=1))):(f=Math.floor(e/s),m=e-f*s);r.row=f,r.column=m,r.style.height=`calc((100% - ${(d-1)*c}px) / ${d})`,r.style[i.getDirectionLabel("margin-top")]=0!==f?c&&`${c}px`:"",r.swiperSlideGridSet=!0},updateWrapperSize:(e,s)=>{const{centeredSlides:n,roundLengths:r}=i.params,a=l(),{rows:o}=i.params.grid;if(i.virtualSize=(e+a)*t,i.virtualSize=Math.ceil(i.virtualSize/o)-a,i.params.cssMode||(i.wrapperEl.style[i.getDirectionLabel("width")]=`${i.virtualSize+a}px`),n){const e=[];for(let t=0;t<s.length;t+=1){let n=s[t];r&&(n=Math.floor(n)),s[t]<i.virtualSize+s[0]&&e.push(n)}s.splice(0,s.length),s.push(...e)}}}}wv.displayName="SwiperSlide";const Iv=()=>{const[e,t]=n.useState([]),[s,r]=n.useState(!0),[a,o]=n.useState(null),[l,c]=n.useState(0),d=n.useRef(null),{programs:u,loading:h}=ox("mind"),{programs:p,loading:m}=ox("body"),{programs:f,loading:g}=ox("soul");return n.useEffect(()=>{if(!h&&!m&&!g)try{const e=[...u||[],...p||[],...f||[]];t(e),o(null)}catch(e){console.error("Error combining programs:",e),o(e)}finally{r(!1)}},[h,m,g,u,p,f]),s?b.jsxs("div",{className:"py-12 text-center",children:[b.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-main mx-auto"}),b.jsx("p",{className:"mt-4 text-text",children:"Loading programs..."})]}):a?b.jsx("div",{className:"py-12 text-center",children:b.jsx("p",{className:"text-red-500",children:"Error loading programs. Please try again later."})}):0===e.length?b.jsx("div",{className:"py-8 text-center",children:b.jsx("p",{children:"No programs available at the moment."})}):b.jsx("div",{className:"py-12 px-4",children:b.jsxs("div",{className:"max-w-7xl mx-auto",children:[b.jsx("h2",{className:"text-3xl font-bold text-center text-main mb-4",children:"Featured Sessions"}),b.jsx("p",{className:"text-center text-gray-600 mb-12 max-w-3xl mx-auto",children:"Explore our carefully curated programs designed to nurture your mind, body, and soul"}),b.jsxs("div",{className:"relative",children:[b.jsx(bv,{ref:d,modules:[Sv,jv,Tv,_v],spaceBetween:30,slidesPerView:1,grid:{rows:2,fill:"row"},breakpoints:{640:{slidesPerView:1,grid:{rows:2,fill:"row"}},768:{slidesPerView:2,grid:{rows:2,fill:"row"}},1024:{slidesPerView:3,grid:{rows:2,fill:"row"}}},autoplay:{delay:5e3,disableOnInteraction:!1},pagination:{clickable:!0,el:".programs-pagination",bulletClass:"w-2 h-2 bg-gray-300 rounded-full inline-block mx-1 cursor-pointer",bulletActiveClass:"bg-main w-6"},onSlideChange:e=>c(e.realIndex),className:"pb-12",children:e.map(e=>b.jsx(wv,{children:b.jsx(i,{to:`/programs/${e.slug}`,className:"block h-full",children:b.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden h-full mx-2 hover:shadow-lg transition-all duration-300 group",children:[b.jsxs("div",{className:"relative h-48",children:[b.jsx("img",{src:e.imageUrl||"/placeholder-program.jpg",alt:e.title,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",loading:"lazy"}),b.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/80 to-transparent",children:b.jsx("span",{className:"inline-block px-3 py-1 text-xs font-semibold text-white bg-main rounded-full",children:e.category})})]}),b.jsxs("div",{className:"p-6",children:[b.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 line-clamp-2 h-14 group-hover:text-main transition-colors",children:e.title}),b.jsx("p",{className:"text-gray-600 mb-4 line-clamp-3 h-16",children:e.description}),b.jsx("div",{className:"mt-4",children:b.jsxs("span",{className:"inline-flex items-center text-lg font-bold text-main",children:[e.price?`$${e.price}`:"Free",b.jsx("svg",{className:"ml-2 w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]})})]})]})})},e._id))}),b.jsx("div",{className:"flex justify-center mt-8",children:b.jsx("div",{className:"programs-pagination flex space-x-2",children:Array.from({length:Math.ceil(e.length/6)}).map((e,t)=>b.jsx("span",{className:"w-2 h-2 rounded-full transition-all duration-300 cursor-pointer "+(t===Math.floor(l/6)?"bg-main w-6":"bg-gray-300"),onClick:()=>d.current?.swiper.slideTo(6*t)},t))})})]}),b.jsx("div",{className:"mt-12 text-center",children:b.jsxs(i,{to:"/sessions",className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-main hover:bg-accent transition-colors duration-200",children:["View All Sessions",b.jsx("svg",{className:"ml-2 -mr-1 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:b.jsx("path",{fillRule:"evenodd",d:"M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H5a1 1 0 110-2h7.586l-2.293-2.293a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})]})})},Cv={en:{store:{title:"Svasam Store",description:"Discover our collection of spiritual and wellness products to support your journey",noItems:"No items available in the store at the moment. Please check back later.",viewDetails:"View Details",tryAgain:"Try Again",errorLoading:"Error Loading Store Items"},footer:{brand:"Svasam"},reviews:{title:"Community Reviews"},programs:{title:"Test Programs by Category"},about:{title:"About Svasam",ourStory:"Our Story",services:"Our Services",mindWellness:"Mind Wellness",bodyWellness:"Body Wellness",soulWellness:"Soul Wellness",storeResources:"Store & Resources",ourPhilosophy:"Our Philosophy",holisticApproach:"Holistic Approach",personalizedSolutions:"Personalized Solutions",ancientWisdom:"Ancient Wisdom",communitySupport:"Community Support",joinJourney:"Join Our Wellness Journey",contactUs:"Contact Us",scheduleSession:"Schedule a Session"},events:{bookNow:"Book Now"},terms:{title:"Terms and Conditions",welcome:"Welcome to Svasam Wellness",introText:"These Terms and Conditions outline the rules and regulations for the use of Svasam Wellness's Website and Services.",acceptanceOfTerms:"1. Acceptance of Terms",accessToWebsite:"Access to Website",changesToTerms:"Changes to Terms",userObligations:"2. User Obligations",accountSecurity:"Account Security",prohibitedActivities:"Prohibited Activities",services:"3. Services",wellnessServices:"Wellness Services",storeProducts:"Store Products",intellectualProperty:"4. Intellectual Property",contentOwnership:"Content Ownership",trademarks:"Trademarks",limitationOfLiability:"5. Limitation of Liability",disclaimerOfWarranties:"Disclaimer of Warranties",limitationOfDamages:"Limitation of Damages",contactUs:"Contact Us",supportHours:"Customer Support Hours: Mon-Sat, 10 AM - 7 PM",phone:"Phone: +91 1234567890",email:"Email: support@svasam.com",contactMessage:"For any questions regarding these Terms and Conditions, please contact us:"},cancellation:{title:"Cancellation and Refund Policy",welcome:"Welcome to Svasam Wellness",introText:"At Svasam Wellness, we understand that circumstances can change. This policy outlines our procedures for cancellations and refunds to ensure a fair and transparent experience for all our clients.",appointmentCancellations:"Appointment Cancellations",cancellationPolicy:"Cancellation Policy",emergencyCancellations:"Emergency Cancellations",refundPolicy:"Refund Policy",storeProducts:"Store Products",wellnessSessions:"Wellness Sessions",specialCases:"Special Cases",forceMajeure:"Force Majeure",disputes:"Disputes",contactUs:"Contact Us",contactMessage:"For any questions regarding our cancellation and refund policy, please contact our customer support team:",email:"Email: support@svasam.com",phone:"Phone: +91 1234567890",supportHours:"Customer Support Hours: Mon-Sat, 10 AM - 7 PM"},privacy:{title:"Privacy Policy",welcome:"Welcome to Svasam Wellness",infoCollect:"1. Information We Collect",personalInfo:"Personal Information",usageInfo:"Usage Information",howWeUse:"2. How We Use Your Information",primaryUses:"Primary Uses",marketing:"Marketing",dataProtection:"3. Data Protection",contactUs:"Contact Us"},contact:{title:"Contact Us",getInTouch:"Get in Touch",fullName:"Full Name",emailAddress:"Email Address",phoneNumber:"Phone Number",subject:"Subject",message:"Message",sendMessage:"Send Message",contactInfo:"Contact Information",faq:"Frequently Asked Questions",fullNamePlaceholder:"Enter your full name",emailPlaceholder:"Enter your email",phonePlaceholder:"Enter your phone number",messagePlaceholder:"How can we assist you?",generalInquiry:"General Inquiry",wellnessPrograms:"Wellness Programs",storeProducts:"Store & Products",scheduleAppointment:"Schedule Appointment",other:"Other",officeLocation:"Office Location",contactDetails:"Contact Details",businessHours:"Business Hours",faqQuestion1:"How do I schedule a wellness session?",faqQuestion2:"What payment methods do you accept?",faqQuestion3:"Can I cancel my appointment?"},blog:{title:"Our Blog",description:"Discover insightful articles on mind, body, and soul wellness from our experts.",stayUpdated:"Stay Updated",subscribeText:"Get our latest wellness articles straight to your inbox.",emailPlaceholder:"Your email address",subscribe:"Subscribe",email:"Email: support@svasam.com",phone:"Phone: +91 1234567890",supportHours:"Customer Support Hours: Mon-Sat, 10 AM - 7 PM"},shipping:{title:"Shipping and Delivery Policy",welcome:"Welcome to Svasam Wellness Store",shippingAreas:"Shipping Areas",domesticShipping:"Domestic Shipping",internationalShipping:"International Shipping",shippingTimes:"Shipping Times",contactUs:"Contact Us"},categories:{title:"Discover Your Path",description:"Explore our holistic wellness categories designed to guide you on your journey to inner peace and transformation",heading:"Wellness Categories",explore:"Explore",exploreAriaLabel:"Explore {{title}} programs",mind:{title:"Mind",description:"The seat of consciousness, thoughts, and emotions. In spirituality, the mind is seen as a powerful tool for transformation and enlightenment.",alt:"Illustration representing the mind and consciousness"},body:{title:"Body",description:"The physical vessel that houses our spirit. In spirituality, the body is considered sacred and a temple for our soul's journey.",alt:"Illustration representing physical health and the body",selfSessions:{title:"Self Sessions / Care (Body)",description:"Access self-guided audio and video sessions for physical self-care."}},soul:{title:"Soul",description:"The eternal essence of our being. In spirituality, the soul is our true self, the divine spark that connects us to the universe.",alt:"Illustration representing the soul and spiritual essence",selfSessions:{title:"Self Sessions (Soul)",description:"Access self-guided audio and video sessions for spiritual well-being."}}},common:{loading:"Loading...",error:"Error",sale:"SALE"}}},kv=(e,t={},s="en")=>{const n=e.split(".");let r=Cv[s];for(const i of n)r=r?.[i];return r?Object.keys(t).reduce((e,s)=>e.replace(new RegExp(`{{${s}}}`,"g"),t[s]),r):e};function Av(){return b.jsxs("footer",{className:"bg-pink-50 text-gray-700 mt-16",children:[b.jsxs("section",{className:"bg-pink-50 text-gray-700 px-6 py-10 md:px-24 md:py-20 flex flex-col md:flex-row gap-10 md:gap-20 justify-between",children:[b.jsxs("div",{children:[b.jsx(i,{className:"font-medium text-3xl tracking-tight",to:"/",children:kv("footer.brand")}),b.jsxs("p",{className:"mt-6 text-xs md:text-sm md:w-72",children:["Svasam Wellness Pvt. Ltd., Office 2,",b.jsx("br",{}),"22 Paradise Villa Compound,",b.jsx("br",{}),"Bhulabhai Desai Road, Mahalaxmi Mandir,",b.jsx("br",{}),"Cumbala Hill, Mumbai 400026"]})]}),b.jsxs("div",{className:"flex gap-12",children:[b.jsxs("div",{className:"flex flex-col w-36 lg:w-60",children:[b.jsx(i,{className:"text-xs md:text-sm mb-4 font-medium text-sm md:text-base",to:"/blog",children:"Blog"}),b.jsx(i,{className:"text-xs md:text-sm",to:"/all-articles",children:"All Articles"})]}),b.jsxs("div",{className:"flex flex-col",children:[b.jsx(i,{className:"text-xs md:text-sm mb-4 font-medium text-sm md:text-base",to:"/",children:"Company"}),b.jsx(i,{className:"text-xs md:text-sm mb-2",to:"/about",children:"About Us"}),b.jsx(i,{className:"text-xs md:text-sm mb-2",to:"/contact",children:"Contact Us"}),b.jsx(i,{className:"text-xs md:text-sm mb-2",to:"/refund-and-cancellation",children:"Cancellation and Refund Policy"}),b.jsx(i,{className:"text-xs md:text-sm mb-2",to:"/shipping-and-delivery",children:"Shipping and Delivery Policy"}),b.jsx(i,{className:"text-xs md:text-sm mb-2",to:"/terms-and-conditions",children:"Terms and Conditions"}),b.jsx(i,{className:"text-xs md:text-sm",to:"/privacy-policy",children:"Privacy Policy"})]})]})]}),b.jsx("section",{className:"py-4 md:py-8 px-6 md:px-24 flex bg-pink-50 text-gray-700",children:b.jsx("span",{className:"ml-auto text-right text-xs md:text-base",children:" 2025 Svasam Wellness. All rights reserved"})})]})}function Pv(e=null){const[t,s]=n.useState([]),[r,i]=n.useState(!0),[a,o]=n.useState(null),l=n.useCallback(async()=>{try{i(!0);const t={},n="string"==typeof e&&e===e?.toLowerCase(),r=e?n?e:e.toLowerCase():null,a=e?n?e.charAt(0).toUpperCase()+e.slice(1):e:null;let l='*[_type == "store"';r&&(l+=" && category == $catSlug",t.catSlug=r),l+='] {\n        _id,\n        title,\n        description,\n        "shortDescription": coalesce(shortDescription, description),\n        "slug": slug.current,\n        "imageUrl": coalesce(images[0].asset->url, images.asset->url[0]),\n        price,\n        "categories": [category],\n        "stock": select(inStock == true => 1, inStock == false => 0, 1),\n        "images": images[].asset->url\n      } | order(_createdAt desc)';let c='*[_type == "storeItem"';a&&(c+=" && $legacyCat in categories[]->title",t.legacyCat=a),c+='] {\n        _id,\n        title,\n        description,\n        shortDescription,\n        "slug": slug.current,\n        "imageUrl": coalesce(mainImage.asset->url, images[0].asset->url),\n        price,\n        compareAtPrice,\n        "categories": categories[]->title,\n        stock,\n        "images": images[].asset->url\n      } | order(_createdAt desc)';const[d,u]=await Promise.all([ix.fetch(l,t),ix.fetch(c,t)]);s([...d||[],...u||[]]),o(null)}catch(t){console.error("Error fetching store items:",t),o({message:t.message||"Unknown error",isNetworkError:"AbortError"===t.name||!navigator.onLine})}finally{i(!1)}},[e]);return n.useEffect(()=>{l()},[l]),{items:t,loading:r,error:a,refetch:l}}var Ov={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Rv=l.createContext&&l.createContext(Ov),Lv=["attr","size","title"];function Mv(e,t){if(null==e)return{};var s,n,r=function(e,t){if(null==e)return{};var s={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;s[n]=e[n]}return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function Dv(){return Dv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},Dv.apply(this,arguments)}function Uv(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}function Fv(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Uv(Object(s),!0).forEach(function(t){Vv(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Uv(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function Vv(e,t,s){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var n=s.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Bv(e){return e&&e.map((e,t)=>l.createElement(e.tag,Fv({key:t},e.attr),Bv(e.child)))}function zv(e){return t=>l.createElement(qv,Dv({attr:Fv({},e.attr)},t),Bv(e.child))}function qv(e){var t=t=>{var s,{attr:n,size:r,title:i}=e,a=Mv(e,Lv),o=r||t.size||"1em";return t.className&&(s=t.className),e.className&&(s=(s?s+" ":"")+e.className),l.createElement("svg",Dv({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,a,{className:s,style:Fv(Fv({color:e.color||t.color},t.style),e.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),i&&l.createElement("title",null,i),e.children)};return void 0!==Rv?l.createElement(Rv.Consumer,null,e=>t(e)):t(Ov)}function $v(e){return zv({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(e)}function Hv(e){return zv({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"},child:[]}]})(e)}const Wv=({question:e,children:t,isOpen:s,onClick:n})=>b.jsxs("div",{className:"mb-6 last:mb-0",children:[b.jsxs("button",{className:"w-full flex justify-between items-center py-3 px-0 text-left transition-colors group border-b border-gray-200 pb-3",onClick:n,"aria-expanded":s,children:[b.jsx("span",{className:"font-semibold text-gray-800 text-lg group-hover:text-main",children:e}),s?b.jsx(Hv,{className:"text-accent text-xl flex-shrink-0 ml-4"}):b.jsx($v,{className:"text-gray-500 text-xl group-hover:text-accent flex-shrink-0 ml-4"})]}),b.jsx("div",{className:"overflow-hidden transition-all duration-300 ease-in-out "+(s?"max-h-96 opacity-100 mt-3":"max-h-0 opacity-0"),"aria-hidden":!s,children:b.jsx("div",{className:"text-gray-700",children:t})})]});function Gv(){const[e,t]=n.useState(0);return b.jsx("section",{className:"py-16",children:b.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[b.jsxs("div",{className:"text-center mb-12",children:[b.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Frequently Asked Questions"}),b.jsx("p",{className:"text-lg text-gray-700 max-w-2xl mx-auto",children:"Find answers to common questions about our wellness programs and services"})]}),b.jsx("div",{className:"space-y-2",children:[{question:"What is Svasam?",answer:"Svasam is a holistic wellness platform offering Mind, Body, and Soul sessions for your well-being. We provide guided programs, self-sessions, and community support to help you achieve balance and harmony in all aspects of life."},{question:"How do I access the audio/video sessions?",answer:"You can access our audio/video sessions by navigating to the respective category (Mind, Body, or Soul) and selecting the session you're interested in. Simply click on the session to start your journey."},{question:"Is Svasam free to use?",answer:"Svasam offers both free and premium content. While many of our basic sessions are available at no cost, we also offer premium programs with additional features and personalized guidance. You can explore our pricing plans for more details."},{question:"Can I use Svasam on my mobile device?",answer:"Absolutely! Svasam is fully responsive and works seamlessly on both desktop and mobile devices. You can also install it as a Progressive Web App (PWA) for an app-like experience with offline access to your favorite sessions."},{question:"Are my personal details and activity private?",answer:"Your privacy is our top priority. All personal information and activity data are encrypted and stored securely. We never share your data with third parties without your explicit consent, in compliance with data protection regulations."},{question:"How do I track my progress?",answer:"Your personal dashboard tracks your session history, completed programs, and milestones. You can monitor your progress, set goals, and receive personalized recommendations based on your activity."},{question:"Can I download sessions for offline use?",answer:"Yes, premium members can download selected sessions for offline access. This feature allows you to continue your practice even without an internet connection, perfect for travel or areas with limited connectivity."},{question:"How can I contact Svasam support?",answer:"We're here to help! You can reach our support team by emailing support@svasam.com or by using the contact form on our website. Our team typically responds within 24-48 hours."}].map((s,n)=>b.jsx(Wv,{question:s.question,isOpen:e===n,onClick:()=>(s=>{t(e===s?null:s)})(n),children:b.jsx("p",{className:"leading-relaxed",children:s.answer})},n))}),b.jsxs("div",{className:"mt-12 text-center",children:[b.jsx("p",{className:"text-gray-700 mb-4",children:"Still have questions?"}),b.jsx("a",{href:"/contact",className:"inline-block px-6 py-3 bg-accent text-white rounded-lg font-medium hover:bg-purple-700 transition-colors",children:"Contact Us"})]})]})})}const Kv=[{id:1,name:"Priya Sharma",role:"Yoga Enthusiast",content:"The Mind programs have transformed my daily routine. The guided meditations help me stay focused and calm throughout the day.",image:"https://randomuser.me/api/portraits/women/32.jpg"},{id:2,name:"Rahul Verma",role:"Fitness Coach",content:"The Body programs are exceptional! The combination of yoga and nutrition guidance has significantly improved my clients' results.",image:"https://randomuser.me/api/portraits/men/45.jpg"},{id:3,name:"Ananya Patel",role:"Meditation Teacher",content:"The Soul programs have added depth to my spiritual practice. The sound therapy sessions are particularly transformative.",image:"https://randomuser.me/api/portraits/women/68.jpg"},{id:4,name:"Vikram Singh",role:"Corporate Professional",content:"The stress management techniques from the Mind category have been a game-changer for my work-life balance.",image:"https://randomuser.me/api/portraits/men/22.jpg"},{id:5,name:"Meera Kapoor",role:"Wellness Coach",content:"The holistic approach of combining mind, body, and soul has been revolutionary for my personal growth and my coaching practice.",image:"https://randomuser.me/api/portraits/women/44.jpg"}],Yv=()=>{const[e,t]=n.useState(0),s=n.useRef(null);return b.jsx("section",{className:"py-16 bg-transparent",children:b.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[b.jsxs("div",{className:"text-center mb-12",children:[b.jsx("h2",{className:"text-3xl font-extrabold text-main sm:text-4xl",children:"What Our Community Says"}),b.jsx("p",{className:"mt-3 max-w-2xl mx-auto text-lg text-gray-500 sm:mt-4",children:"Hear from people who have transformed their lives with our programs"})]}),b.jsxs("div",{className:"relative",children:[b.jsx(bv,{ref:s,modules:[Sv,jv,Tv],spaceBetween:30,slidesPerView:1,breakpoints:{640:{slidesPerView:1},768:{slidesPerView:2},1024:{slidesPerView:3}},autoplay:{delay:5e3,disableOnInteraction:!1},pagination:{clickable:!0,el:".testimonial-pagination",bulletClass:"w-2 h-2 bg-gray-300 rounded-full inline-block mx-1 cursor-pointer",bulletActiveClass:"bg-main w-6"},onSlideChange:e=>t(e.realIndex),className:"pb-12",children:Kv.map(e=>b.jsx(wv,{children:b.jsxs("div",{className:"bg-white/90 p-6 rounded-lg shadow-md h-full mx-2 backdrop-blur-sm",children:[b.jsxs("div",{className:"flex items-center mb-4",children:[b.jsx("img",{className:"h-14 w-14 rounded-full object-cover",src:e.image,alt:e.name}),b.jsxs("div",{className:"ml-4",children:[b.jsx("h3",{className:"text-lg font-medium text-gray-900",children:e.name}),b.jsx("p",{className:"text-sm text-gray-500",children:e.role})]})]}),b.jsxs("p",{className:"text-gray-600 italic",children:['"',e.content,'"']}),b.jsx("div",{className:"mt-4 flex",children:[1,2,3,4,5].map(e=>b.jsx("svg",{className:"h-5 w-5 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",children:b.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},e))})]})},e.id))}),b.jsx("div",{className:"flex justify-center mt-8",children:b.jsx("div",{className:"testimonial-pagination flex space-x-2",children:Kv.map((t,n)=>b.jsx("span",{className:"w-2 h-2 rounded-full transition-all duration-300 cursor-pointer "+(n===e?"bg-main w-6":"bg-gray-300"),onClick:()=>s.current?.swiper.slideTo(n)},n))})})]})]})})},Qv=({className:e})=>b.jsx("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),Xv=({className:e})=>b.jsx("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})}),Jv=({to:e,title:t,description:s,image:n,alt:r})=>b.jsx("article",{className:"flex flex-col items-center h-full",children:b.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 hover:shadow-2xl transition-all duration-300 w-full h-full flex flex-col",children:[b.jsx("img",{src:n,alt:r,className:"w-36 h-36 mb-6 mx-auto object-contain",loading:"lazy",width:144,height:144}),b.jsxs("div",{className:"flex-grow",children:[b.jsx("h2",{className:"text-3xl font-bold text-center text-main mb-4",children:t}),b.jsx("p",{className:"text-text text-base leading-relaxed text-center mb-6",children:s})]}),b.jsx("div",{className:"mt-auto",children:b.jsxs(i,{to:e,className:"flex items-center justify-center group w-full py-3 text-main hover:text-accent transition-colors text-base font-semibold","aria-label":kv("categories.exploreAriaLabel",{title:t}),children:[b.jsx("span",{className:"mr-2 font-medium",children:kv("categories.explore")}),b.jsx("svg",{className:"w-6 h-6 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]})})]})});function Zv(){const e=r(),{items:t}=Pv(null),{addToCart:s}=j(),a=n.useMemo(()=>[{slug:"bracelets",title:"Bracelets"},{slug:"rudraksha",title:"Rudraksha"},{slug:"murti",title:"Murti"},{slug:"anklet",title:"Anklet"},{slug:"frames",title:"Frames"},{slug:"karungali",title:"Karungali"},{slug:"zodiac",title:"Zodiac"},{slug:"pyrite",title:"Pyrite"},{slug:"gemstones",title:"Gemstones"},{slug:"pendant",title:"Pendant"}],[]),o=n.useCallback(e=>({bracelets:"/assets/Bracelet.jpg",rudraksha:"/assets/Rudraksha.jpg",murti:"/assets/Murti.jpg",anklet:"/assets/Anklet.jpg",frames:"/assets/Frames.jpg",karungali:"/assets/karungali.jpg",pyrite:"/assets/Pyrite.jpg",gemstones:"/assets/Gemstones.jpg",pendant:"/assets/Pendant.jpg",zodiac:"/assets/Zodiac.jpg"}[e]||`/assets/categories/${e}.png`),[]);n.useEffect(()=>{a.forEach(e=>{(new Image).src=o(e.slug)})},[a,o]);const l=n.useRef(null);n.useCallback(()=>{l.current&&l.current.scrollBy({left:-260,behavior:"smooth"})},[]),n.useCallback(()=>{l.current&&l.current.scrollBy({left:260,behavior:"smooth"})},[]);const c=n.useCallback(t=>{e(`/store/${"rudraksha"===t?"rudrakshas":t}`)},[e]),d=n.useRef(null),u=n.useCallback(()=>{d.current&&d.current.scrollBy({left:-640,behavior:"smooth"})},[]),h=n.useCallback(()=>{d.current&&d.current.scrollBy({left:640,behavior:"smooth"})},[]),p=n.useCallback(e=>{s({id:e._id||e.slug||e.title,title:e.title,price:e.price||0,quantity:1,image:e.imageUrl})},[s]),m=[{id:"mind",title:kv("categories.mind.title"),description:kv("categories.mind.description"),image:"/assets/Mind.png",alt:kv("categories.mind.alt")},{id:"body",title:kv("categories.body.title"),description:kv("categories.body.description"),image:"/assets/Body.png",alt:kv("categories.body.alt")},{id:"soul",title:kv("categories.soul.title"),description:kv("categories.soul.description"),image:"/assets/New soul.png",alt:kv("categories.soul.alt")}];return b.jsx("main",{className:"relative min-h-screen w-full bg-background/80",children:b.jsx("div",{className:"relative z-10",children:b.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[b.jsx("div",{className:"h-12 md:h-16 w-full bg-background","aria-hidden":"true"}),b.jsxs("header",{className:"relative mb-12 md:mb-16 rounded-xl overflow-hidden h-64 md:h-96",children:[b.jsxs("div",{className:"absolute inset-0",children:[b.jsx("img",{src:"/assets/Main page.png",alt:"Svasam banner",className:"w-full h-full object-cover",loading:"eager"}),b.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-main/90 to-accent/80"})]}),b.jsxs("div",{className:"relative z-10 h-full flex flex-col items-center justify-center px-4 sm:px-6 lg:px-8 text-center",children:[b.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-white mb-4",children:kv("categories.title")}),b.jsx("p",{className:"text-lg md:text-xl text-white/90 max-w-3xl",children:kv("categories.description")})]})]}),b.jsxs("section",{"aria-labelledby":"categories-heading",className:"py-6 sm:py-8 md:py-12",children:[b.jsx("h2",{id:"categories-heading",className:"text-2xl sm:text-3xl font-bold text-main mb-6 sm:mb-8 text-center",children:"Our Categories"}),b.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 md:gap-8",children:m.map(e=>b.jsx(Jv,{to:`/${e.id}`,title:e.title,description:e.description,image:e.image,alt:e.alt},e.id))})]}),b.jsx("div",{className:"py-8",children:b.jsx(Iv,{})}),b.jsxs("section",{className:"mb-12",children:[b.jsxs("div",{className:"mb-3 text-center",children:[b.jsx("h2",{className:"text-3xl md:text-4xl font-extrabold text-main",children:"Shop by Category"}),b.jsx(i,{to:"/store",className:"block mt-2 text-base text-accent hover:text-[#704091] font-semibold",children:"View all"})]}),b.jsxs("div",{className:"relative",children:[b.jsx("button",{type:"button","aria-label":"Scroll categories left",onClick:()=>scrollCategories("left"),className:"hidden sm:flex absolute left-0 top-1/2 -translate-y-1/2 z-10 h-8 w-8 sm:h-10 sm:w-10 items-center justify-center rounded-full bg-white/90 border border-accent/20 shadow hover:bg-white",children:b.jsx(Qv,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),b.jsx("div",{ref:l,className:"flex gap-5 overflow-x-auto no-scrollbar snap-x snap-mandatory px-10",role:"tablist","aria-label":"Store categories",children:a.map(e=>b.jsxs("button",{role:"tab",onClick:()=>c(e.slug),className:"flex-shrink-0 snap-start group w-20 sm:w-28 md:w-36 focus:outline-none",title:e.title,children:[b.jsx("div",{className:"rounded-xl border border-accent/20 bg-white shadow-sm overflow-hidden transition-all",children:b.jsxs("div",{className:"aspect-square w-full bg-gray-50 overflow-hidden",children:[b.jsx("img",{src:o(e.slug),alt:`${e.title} thumbnail`,className:"w-full h-full object-cover",loading:"lazy",onError:e=>{e.target.style.display="none",e.target.nextElementSibling.style.display="flex"}}),b.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-gray-400 text-sm",style:{display:"none"},children:"No Image"})]})}),b.jsx("div",{className:"mt-2 text-center text-sm font-semibold text-main",children:e.title})]},e.slug))}),b.jsx("button",{type:"button","aria-label":"Scroll categories right",onClick:()=>scrollCategories("right"),className:"hidden sm:flex absolute right-0 top-1/2 -translate-y-1/2 z-10 h-8 w-8 sm:h-10 sm:w-10 items-center justify-center rounded-full bg-white/90 border border-accent/20 shadow hover:bg-white",children:b.jsx(Xv,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]})]}),b.jsxs("section",{className:"mb-12",children:[b.jsx("div",{className:"mb-3 text-center",children:b.jsx("h2",{className:"text-3xl md:text-4xl font-extrabold text-main",children:"Featured Products"})}),b.jsxs("div",{className:"relative",children:[b.jsx("button",{type:"button","aria-label":"Scroll items left",onClick:u,className:"hidden md:flex absolute left-0 top-1/2 -translate-y-1/2 z-10 h-10 w-10 items-center justify-center rounded-full bg-white/90 border border-accent/20 shadow hover:bg-white",children:b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"h-5 w-5",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})})}),b.jsx("div",{ref:d,className:"overflow-x-auto no-scrollbar px-2",children:b.jsx("div",{className:"grid grid-rows-2 grid-flow-col gap-5 auto-cols-[minmax(220px,260px)]",children:(t||[]).slice(0,20).map(e=>b.jsxs("div",{className:"bg-white rounded-xl shadow-md hover:shadow-lg transition overflow-hidden flex flex-col",children:[b.jsx("div",{className:"relative aspect-[4/3] bg-gray-50",children:e.imageUrl?b.jsx("img",{src:e.imageUrl,alt:e.title,className:"absolute inset-0 w-full h-full object-cover",loading:"lazy"}):b.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-gray-400 text-sm",children:"No Image"})}),b.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[b.jsx("h3",{className:"text-lg font-semibold text-[#8e6192] line-clamp-2",title:e.title,children:e.title}),b.jsx("p",{className:"text-gray-600 text-sm mt-1 mb-3",children:(()=>{const t=(e.shortDescription||e.description||"").trim();return t.length>80?t.slice(0,80)+"":t})()}),b.jsxs("div",{className:"mt-auto flex items-center justify-between",children:[b.jsxs("span",{className:"text-main font-bold",children:["",e.price?.toLocaleString("en-IN")]}),b.jsx("button",{className:"px-3 py-1.5 bg-main text-white rounded-md text-xs font-semibold hover:brightness-105",onClick:()=>p(e),children:"Add to Cart"})]})]})]},e._id||e.title))})}),b.jsx("button",{type:"button","aria-label":"Scroll items right",onClick:h,className:"hidden md:flex absolute right-0 top-1/2 -translate-y-1/2 z-10 h-10 w-10 items-center justify-center rounded-full bg-white/90 border border-accent/20 shadow hover:bg-white",children:b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"h-5 w-5",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})})]})]}),b.jsx(Yv,{}),b.jsx(Gv,{})]})})})}function eb(){const e=r(),{programs:t,loading:s,error:n}=ox("mind");return s?b.jsx("div",{className:"min-h-screen w-full bg-background flex items-center justify-center",children:b.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-500"})}):n?b.jsx("div",{className:"min-h-screen w-full bg-background flex items-center justify-center",children:b.jsxs("div",{className:"text-red-500 text-center p-4 max-w-md",children:[b.jsx("h2",{className:"text-xl font-bold mb-2",children:"Error Loading Programs"}),b.jsx("p",{children:n.message}),b.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-main text-white rounded hover:brightness-105",children:"Try Again"})]})}):b.jsx("div",{className:"min-h-screen w-full bg-background",children:b.jsxs("div",{className:"max-w-6xl mx-auto py-16 px-4",children:[b.jsxs("div",{className:"text-center mb-12",children:[b.jsx("h1",{className:"text-4xl font-bold text-[#8e6192] mb-4",children:"Mind Wellness Programs"}),b.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Discover our transformative programs designed to enhance your mental well-being and unlock your full potential."})]}),t&&0!==t.length?b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:t.map(t=>b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 transition-all duration-300 hover:shadow-xl hover:-translate-y-1",children:[t.imageUrl&&b.jsx("img",{src:t.imageUrl,alt:t.title,className:"w-full h-48 object-cover rounded-t-lg mb-4",loading:"lazy"}),b.jsxs("div",{className:"p-4",children:[b.jsx("h2",{className:"text-xl font-bold text-[#8e6192] mb-3",children:t.title}),b.jsx("p",{className:"text-gray-600 mb-4 line-clamp-3",children:t.description}),b.jsxs("div",{className:"flex justify-between items-center mt-4",children:[t.price&&b.jsxs("span",{className:"text-lg font-semibold text-purple-700",children:["",t.price.toLocaleString()]}),b.jsx("button",{className:"px-4 py-2 bg-accent text-white rounded-lg font-semibold shadow hover:bg-[#704091] focus:outline-none focus:ring-2 focus:ring-accent focus:ring-offset-2 transition",onClick:()=>t.slug?e(`/programs/${t.slug.current||t.slug}`):"#",children:"Read More"})]})]})]},t._id||t.title))}):b.jsx("div",{className:"text-center py-12",children:b.jsx("p",{className:"text-gray-500",children:"No mind programs available at the moment. Please check back later."})})]})})}function tb(){const e=r(),{programs:t,loading:s,error:n}=ox("body");return s?b.jsx("div",{className:"min-h-screen w-full bg-background flex items-center justify-center",children:b.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-500"})}):n?b.jsx("div",{className:"min-h-screen w-full bg-background flex items-center justify-center",children:b.jsxs("div",{className:"text-red-500 text-center p-4 max-w-md",children:[b.jsx("h2",{className:"text-xl font-bold mb-2",children:"Error Loading Programs"}),b.jsx("p",{children:n.message}),b.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-main text-white rounded hover:brightness-105",children:"Try Again"})]})}):b.jsx("div",{className:"min-h-screen w-full bg-background",children:b.jsxs("div",{className:"max-w-6xl mx-auto py-16 px-4",children:[b.jsxs("div",{className:"text-center mb-12",children:[b.jsx("h1",{className:"text-4xl font-bold text-heading mb-4",children:"Body Wellness Programs"}),b.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Discover our curated programs designed to enhance your physical well-being and vitality."})]}),t&&0!==t.length?b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:t.map(t=>b.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden transition-all duration-300 hover:shadow-xl hover:-translate-y-1",children:[t.imageUrl&&b.jsx("img",{src:t.imageUrl,alt:t.title,className:"w-full h-48 object-cover",loading:"lazy"}),b.jsxs("div",{className:"p-6",children:[b.jsx("h2",{className:"text-xl font-bold text-[#8e6192] mb-3",children:t.title}),b.jsx("p",{className:"text-gray-600 mb-4 line-clamp-3",children:t.description}),b.jsxs("div",{className:"flex justify-between items-center mt-4",children:[t.price&&b.jsxs("span",{className:"text-lg font-semibold text-purple-700",children:["",t.price.toLocaleString()]}),t.duration&&b.jsx("span",{className:"text-sm text-gray-500",children:t.duration})]}),b.jsx("button",{className:"mt-4 w-full px-4 py-2 bg-main text-white rounded-lg font-semibold shadow hover:brightness-105 focus:outline-none focus:ring-2 focus:ring-main focus:ring-offset-2 transition",onClick:()=>t.slug&&e(`/programs/${t.slug}`),children:"Learn More"})]})]},t._id))}):b.jsx("div",{className:"text-center py-12",children:b.jsx("p",{className:"text-gray-500",children:"No body programs available at the moment. Please check back later."})})]})})}function sb(){const e=r(),{programs:t,loading:s,error:n}=ox("soul");return s?b.jsx("div",{className:"min-h-screen w-full bg-background flex items-center justify-center",children:b.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-500"})}):n?b.jsx("div",{className:"min-h-screen w-full bg-background flex items-center justify-center",children:b.jsxs("div",{className:"text-red-500 text-center p-4 max-w-md",children:[b.jsx("h2",{className:"text-xl font-bold mb-2",children:"Error Loading Programs"}),b.jsx("p",{className:"mb-4",children:n.message}),b.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-main text-white rounded-lg font-semibold hover:brightness-105 transition-colors",children:"Try Again"})]})}):b.jsx("div",{className:"min-h-screen w-full bg-background",children:b.jsxs("div",{className:"max-w-6xl mx-auto py-16 px-4",children:[b.jsxs("div",{className:"text-center mb-12",children:[b.jsx("h1",{className:"text-4xl font-bold text-[#8e6192] mb-4",children:"Soul Wellness Programs"}),b.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Discover our transformative programs designed to nurture your spiritual growth and inner peace."})]}),t&&0!==t.length?b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:t.map(t=>b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 transition-all duration-300 hover:shadow-xl hover:-translate-y-1",children:[t.imageUrl&&b.jsx("img",{src:t.imageUrl,alt:t.title,className:"w-full h-48 object-cover rounded-t-lg mb-4",loading:"lazy"}),b.jsxs("div",{className:"p-2",children:[b.jsx("h2",{className:"text-xl font-bold text-[#8e6192] mb-3",children:t.title}),b.jsx("p",{className:"text-gray-600 mb-4 line-clamp-3",children:t.description}),b.jsxs("div",{className:"flex justify-between items-center mt-4",children:[t.price&&b.jsxs("span",{className:"text-lg font-semibold text-purple-700",children:["",t.price.toLocaleString()]}),b.jsx("button",{className:"px-4 py-2 bg-main text-white rounded-lg font-semibold shadow hover:brightness-105 focus:outline-none focus:ring-2 focus:ring-main focus:ring-offset-2 transition",onClick:()=>t.slug?e(`/programs/${t.slug.current||t.slug}`):"#",children:"Read More"})]})]})]},t._id||t.title))}):b.jsx("div",{className:"text-center py-12",children:b.jsx("p",{className:"text-gray-500",children:"No soul programs available at the moment. Please check back later."})})]})})}function nb(){const e=r(),[t,s]=c(),{addToCart:i}=j(),a=n.useMemo(()=>[{slug:"all",title:"All"},{slug:"bracelets",title:"Bracelets"},{slug:"rudraksha",title:"Rudraksha"},{slug:"murti",title:"Murti"},{slug:"anklet",title:"Anklet"},{slug:"frames",title:"Frames"},{slug:"karungali",title:"Karungali"},{slug:"zodiac",title:"Zodiac"},{slug:"pyrite",title:"Pyrite"},{slug:"gemstones",title:"Gemstones"},{slug:"pendant",title:"Pendant"}],[]),o=n.useCallback(e=>({bracelets:"/assets/Bracelet.jpg",rudraksha:"/assets/Rudraksha.jpg",murti:"/assets/Murti.jpg",anklet:"/assets/Anklet.jpg",frames:"/assets/Frames.jpg",karungali:"/assets/karungali.jpg",pyrite:"/assets/Pyrite.jpg",gemstones:"/assets/Gemstones.jpg",pendant:"/assets/Pendant.jpg",zodiac:"/assets/Zodiac.jpg"}[e]||`/assets/categories/${e}.png`),[]);n.useEffect(()=>{a.forEach(e=>{(new Image).src=o(e.slug)})},[a,o]);const l=n.useRef(null),d=n.useCallback(()=>{l.current&&l.current.scrollBy({left:-260,behavior:"smooth"})},[]),u=n.useCallback(()=>{l.current&&l.current.scrollBy({left:260,behavior:"smooth"})},[]),h=t.get("category")||"all",p=n.useMemo(()=>{if("all"===h)return null;const e=a.find(e=>e.slug===h);return e?e.title:null},[h,a]),{items:m,loading:f,error:g}=Pv(p),y=t.get("q")||"",[x,v]=n.useState(y);n.useEffect(()=>{const e=setTimeout(()=>{const e=new URLSearchParams(t);x?e.set("q",x):e.delete("q"),s(e,{replace:!0})},300);return()=>clearTimeout(e)},[x]),n.useEffect(()=>{document.title=p?`${p} | Svasam Store`:"Svasam Store"},[p]);const w=n.useMemo(()=>{if(!m)return[];const e=(t.get("q")||"").trim().toLowerCase();return e?m.filter(t=>[t.title,t.shortDescription,t.description].filter(Boolean).join(" ").toLowerCase().includes(e)):m},[m,t]),N=n.useCallback(t=>{if("all"===t)return void e("/store");e(`/store/${"rudraksha"===t?"rudrakshas":t}`)},[e]),S=n.useCallback(()=>{window.location.reload()},[]),E=n.useCallback(e=>{i({id:e._id||e.slug||e.title,title:e.title,price:e.price||0,quantity:1,image:e.imageUrl})},[i]);return f?b.jsx("div",{className:"min-h-screen w-full bg-background flex items-center justify-center",children:b.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-500","aria-label":kv("common.loading")})}):g?b.jsx("div",{className:"min-h-screen w-full bg-background flex items-center justify-center",children:b.jsxs("div",{className:"text-red-500 text-center p-4 max-w-md",children:[b.jsx("h2",{className:"text-xl font-bold mb-2",children:"Error Loading Store Items"}),b.jsx("p",{className:"mb-4",children:g.message}),b.jsx("button",{onClick:S,className:"px-4 py-2 bg-accent text-white rounded-lg font-semibold hover:bg-[#704091] transition-colors",children:"Try Again"})]})}):b.jsx("div",{className:"min-h-screen w-full bg-background",children:b.jsxs("div",{className:"max-w-7xl mx-auto py-16 px-4 sm:px-6 lg:px-8",children:[b.jsxs("div",{className:"text-center mb-12",children:[b.jsx("h1",{className:"text-4xl font-bold text-[#8e6192] mb-4",children:"Svasam Store"}),b.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Discover our collection of spiritual and wellness products to support your journey"})]}),b.jsx("div",{className:"mb-4",children:b.jsxs("div",{className:"max-w-sm ml-auto",children:[b.jsx("label",{htmlFor:"store-search",className:"sr-only",children:"Search products"}),b.jsxs("div",{className:"relative",children:[b.jsx("input",{id:"store-search",type:"text",value:x,onChange:e=>v(e.target.value),placeholder:"Search products...",className:"w-full rounded-lg border border-accent/30 bg-white px-3 py-2 pr-9 shadow-sm focus:outline-none focus:ring-2 focus:ring-accent/30 focus:border-accent text-xs"}),b.jsxs("svg",{className:"absolute right-2.5 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[b.jsx("circle",{cx:"11",cy:"11",r:"8"}),b.jsx("path",{d:"M21 21l-4.35-4.35",strokeLinecap:"round",strokeLinejoin:"round"})]})]})]})}),b.jsx("div",{className:"mb-10 sticky top-16 z-40 bg-background/90 backdrop-blur supports-[backdrop-filter]:bg-background/60 border-b border-accent/10 -mx-4 px-4 py-2",children:b.jsxs("div",{className:"relative",children:[b.jsx("button",{type:"button","aria-label":"Scroll categories left",onClick:d,className:"hidden md:flex absolute left-0 top-1/2 -translate-y-1/2 z-10 h-8 w-8 items-center justify-center rounded-full bg-white/90 border border-accent/20 shadow hover:bg-white",children:b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"h-4 w-4",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})})}),b.jsx("div",{ref:l,className:"flex gap-4 overflow-x-auto no-scrollbar snap-x snap-mandatory px-8",role:"tablist","aria-label":"Product categories",children:a.map(e=>{const t=e.slug===h,s="all"===e.slug;return b.jsxs("button",{role:"tab","aria-selected":t,onClick:()=>N(e.slug),className:"flex-shrink-0 snap-start group w-24 sm:w-28 focus:outline-none",title:e.title,children:[b.jsx("div",{className:`rounded-xl border ${t?"border-accent ring-2 ring-accent/30":"border-accent/20"} bg-white shadow-sm overflow-hidden transition-all`,children:b.jsx("div",{className:"aspect-square w-full bg-gray-50 overflow-hidden",children:s?b.jsx("div",{className:"w-full h-full flex items-center justify-center text-2xl text-main",children:""}):b.jsx("img",{src:o(e.slug),alt:`${e.title} thumbnail`,className:"w-full h-full object-cover",loading:"lazy",onError:t=>{const s=`<svg xmlns='http://www.w3.org/2000/svg' width='128' height='128'><rect width='100%' height='100%' fill='%23f5f5f5'/><text x='50%' y='52%' dominant-baseline='middle' text-anchor='middle' font-family='sans-serif' font-size='14' fill='%23999'>${e.title}</text></svg>`;t.currentTarget.src=`data:image/svg+xml;utf8,${encodeURIComponent(s)}`}})})}),b.jsx("div",{className:"mt-2 text-center text-xs font-semibold "+(t?"text-accent":"text-main"),children:e.title})]},e.slug)})}),b.jsx("button",{type:"button","aria-label":"Scroll categories right",onClick:u,className:"hidden md:flex absolute right-0 top-1/2 -translate-y-1/2 z-10 h-8 w-8 items-center justify-center rounded-full bg-white/90 border border-accent/20 shadow hover:bg-white",children:b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"h-4 w-4",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})})]})}),w&&0!==w.length?b.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6 lg:gap-8",children:w.map(e=>b.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden flex flex-col h-full transition-all duration-300 hover:shadow-xl hover:-translate-y-1",children:[b.jsxs("div",{className:"relative pt-[100%] bg-gray-50",children:[e.imageUrl?b.jsx("img",{src:e.imageUrl,alt:e.title,className:"absolute inset-0 w-full h-full object-cover",loading:"lazy"}):b.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-gray-400",children:b.jsx("span",{className:"text-sm",children:"No Image"})}),e.compareAtPrice>e.price&&b.jsx("span",{className:"absolute top-3 right-3 bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:"SALE"})]}),b.jsxs("div",{className:"p-6 flex flex-col flex-grow",children:[b.jsx("h2",{className:"text-xl font-bold text-[#8e6192] mb-2 line-clamp-2",title:e.title,children:e.title}),b.jsx("p",{className:"text-gray-600 text-sm mb-4 flex-grow",children:(()=>{const t=(e.shortDescription||e.description||"").trim();return t.length>100?t.slice(0,100)+"":t})()}),b.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[b.jsxs("div",{children:[b.jsxs("span",{className:"text-lg font-bold text-main",children:["",e.price?.toLocaleString("en-IN")]}),e.compareAtPrice>e.price&&b.jsxs("span",{className:"ml-2 text-sm text-gray-400 line-through",children:["",e.compareAtPrice?.toLocaleString("en-IN")]})]}),b.jsx("button",{className:"px-4 py-2 bg-main text-white rounded-lg font-semibold text-sm shadow hover:brightness-105 focus:outline-none focus:ring-2 focus:ring-main focus:ring-offset-2 transition",onClick:()=>E(e),children:"Add to Cart"})]})]})]},e._id||e.title))}):b.jsxs("div",{className:"text-center py-12",children:[b.jsxs("p",{className:"text-gray-500 mb-4",children:["No items ",x?`matching ${x}`:"available"," ",p?`in ${p}`:"in the store","."]}),b.jsx("button",{onClick:()=>e("/store"),className:"px-4 py-2 bg-accent text-white rounded-lg font-semibold hover:bg-[#704091] transition",children:"View All Products"})]})]})})}function rb(){const[e,t]=n.useState({email:"",password:""}),[s,a]=n.useState({}),[o,l]=n.useState(!1),c=r(),d=async e=>{l(!0),a({});try{const t="google"===e?await Ym():await Qm();t.success?c("/"):a({submit:`Social login failed: ${t.error||"Please try again."}`})}catch(t){a({submit:"Social login failed. Please try again."})}finally{l(!1)}},u=e=>{const{name:n,value:r}=e.target;t(e=>({...e,[n]:r})),s[n]&&a(e=>({...e,[n]:null}))};return b.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[b.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[b.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-main",children:"Sign in to your account"}),b.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Or"," ",b.jsx(i,{to:"/signup",className:"font-medium text-accent hover:text-main",children:"create a new account"})]})]}),b.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:b.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[b.jsxs("form",{className:"space-y-6",onSubmit:async t=>{if(t.preventDefault(),(()=>{const t={};return e.email?/\S+@\S+\.\S+/.test(e.email)||(t.email="Email is invalid"):t.email="Email is required",e.password||(t.password="Password is required"),a(t),0===Object.keys(t).length})()){l(!0),a({});try{const{email:t,password:s}=e,n=await(async(e,t)=>{try{return{success:!0,user:(await Cn(zm,e,t)).user}}catch(s){return{success:!1,error:s.message}}})(t,s);if(n.success)c("/");else{let e="Login failed. Please check your email and password.";n.error.includes("auth/user-not-found")?e="No account found with this email.":n.error.includes("auth/wrong-password")?e="Incorrect password. Please try again.":n.error.includes("auth/too-many-requests")?e="Too many failed attempts. Please try again later.":n.error.includes("auth/user-disabled")&&(e="This account has been disabled. Please contact support."),a({submit:e})}}catch(s){console.error("Login failed:",s),a({submit:"An unexpected error occurred. Please try again."})}finally{l(!1)}}},children:[s.submit&&b.jsx("div",{className:"mb-4 p-3 bg-red-50 text-red-700 rounded-lg text-sm",children:s.submit}),b.jsxs("div",{children:[b.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:["Email address ",b.jsx("span",{className:"text-red-500",children:"*"})]}),b.jsxs("div",{className:"mt-1",children:[b.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:e.email,onChange:u,className:`appearance-none block w-full px-3 py-2 border ${s.email?"border-red-500":"border-gray-300"} rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-main focus:border-main sm:text-sm`}),s.email&&b.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.email})]})]}),b.jsxs("div",{children:[b.jsxs("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:["Password ",b.jsx("span",{className:"text-red-500",children:"*"})]}),b.jsxs("div",{className:"mt-1",children:[b.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:e.password,onChange:u,className:`appearance-none block w-full px-3 py-2 border ${s.password?"border-red-500":"border-gray-300"} rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-main focus:border-main sm:text-sm`}),s.password&&b.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.password})]})]}),b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("div",{className:"flex items-center",children:[b.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-main focus:ring-main border-gray-300 rounded"}),b.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900",children:"Remember me"})]}),b.jsxs("div",{className:"flex justify-between text-sm",children:[b.jsx(i,{to:"/signup",className:"font-medium text-main hover:text-main-dark",children:"Don't have an account? Sign up"}),b.jsx(i,{to:"/reset-password",className:"font-medium text-gray-600 hover:text-gray-500",children:"Forgot password?"})]})]}),b.jsx("div",{children:b.jsx("button",{type:"submit",disabled:o,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-main hover:bg-accent focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-main",children:o?"Signing in...":"Sign in"})})]}),b.jsxs("div",{className:"mt-6",children:[b.jsxs("div",{className:"relative",children:[b.jsx("div",{className:"absolute inset-0 flex items-center",children:b.jsx("div",{className:"w-full border-t border-gray-300"})}),b.jsx("div",{className:"relative flex justify-center text-sm",children:b.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),b.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-3",children:[b.jsx("div",{children:b.jsxs("button",{type:"button",onClick:()=>d("google"),disabled:o,className:"w-full inline-flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:[b.jsx("span",{className:"sr-only",children:"Sign in with Google"}),b.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:b.jsx("path",{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"})})]})}),b.jsx("div",{children:b.jsxs("button",{type:"button",onClick:()=>d("facebook"),disabled:o,className:"w-full inline-flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:[b.jsx("span",{className:"sr-only",children:"Sign in with Facebook"}),b.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20","aria-hidden":"true",children:b.jsx("path",{fillRule:"evenodd",d:"M20 10c0-5.523-4.477-10-10-10S0 4.477 0 10c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V10h2.54V7.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V10h2.773l-.443 2.89h-2.33v6.988C16.343 19.128 20 14.991 20 10z",clipRule:"evenodd"})})]})})]})]})]})})]})}const ib=({label:e,type:t="text",name:s,placeholder:n,required:r=!0,value:i,onChange:a,error:o,...l})=>b.jsxs("div",{className:"mb-4",children:[b.jsxs("label",{htmlFor:s,className:"block text-sm font-medium text-gray-700 mb-1",children:[e," ",r&&b.jsx("span",{className:"text-red-500",children:"*"})]}),b.jsx("input",{type:t,id:s,name:s,value:i,onChange:a,placeholder:n,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-main focus:border-transparent "+(o?"border-red-500":"border-gray-300"),...l}),o&&b.jsx("p",{className:"mt-1 text-sm text-red-600",children:o})]});function ab(){const e=r(),[t,s]=n.useState({name:"",email:"",mobile:"",password:"",confirmPassword:""}),[a,o]=n.useState({}),[l,c]=n.useState(!1),[d,u]=n.useState(!1),h=async t=>{c(!0),o({});try{const s="google"===t?await Ym():await Qm();s.success?e("/"):o({form:`Social sign-in failed: ${s.error||"Please try again."}`})}catch(s){o({form:"Social sign-in failed. Please try again."})}finally{c(!1)}},p=e=>{const{name:n,value:r}=e.target;s({...t,[n]:r}),a[n]&&o({...a,[n]:null})};return d?b.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:b.jsxs("div",{className:"max-w-md mx-auto bg-white p-8 rounded-xl shadow-md text-center",children:[b.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 mb-4",children:b.jsx("svg",{className:"h-8 w-8 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),b.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Account Created Successfully!"}),b.jsx("p",{className:"text-gray-600 mb-6",children:"Your account has been created successfully."}),b.jsx("p",{className:"text-gray-500 text-sm",children:"Redirecting you to the home page..."})]})}):b.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:b.jsxs("div",{className:"max-w-md mx-auto bg-white p-8 rounded-xl shadow-md",children:[b.jsxs("div",{className:"text-center mb-8",children:[b.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Create an account"}),b.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Already have an account?"," ",b.jsx(i,{to:"/login",className:"font-medium text-main hover:text-main-dark",children:"Sign in"})]})]}),a.form&&b.jsx("div",{className:"mb-4 p-3 bg-red-50 text-red-700 rounded-lg text-sm",children:a.form}),b.jsxs("form",{onSubmit:async s=>{if(s.preventDefault(),(()=>{const e={};return t.name.trim()||(e.name="Name is required"),t.email?/\S+@\S+\.\S+/.test(t.email)||(e.email="Email is invalid"):e.email="Email is required",t.mobile?/^[0-9]{10}$/.test(t.mobile)||(e.mobile="Please enter a valid 10-digit mobile number"):e.mobile="Mobile number is required",t.password?t.password.length<6&&(e.password="Password must be at least 6 characters"):e.password="Password is required",t.password!==t.confirmPassword&&(e.confirmPassword="Passwords do not match"),o(e),0===Object.keys(e).length})()){c(!0);try{const{name:s,email:n,password:r,mobile:i}=t;console.log("Attempting to sign up with:",{name:s,email:n,mobile:i||"not provided"});const l=await $m(s,n,r,i);if(console.log("Signup result:",l),l.success)u(!0),setTimeout(()=>{e("/login")},2e3);else{let e="Signup failed. Please try again.";l.error.includes("auth/email-already-in-use")?e="An account with this email already exists.":l.error.includes("auth/weak-password")?e="Password should be at least 6 characters.":l.error.includes("auth/invalid-email")&&(e="Please enter a valid email address."),o({...a,form:e})}}catch(n){console.error("Signup failed:",n),o({submit:"Signup failed. Please try again."})}finally{c(!1)}}},className:"space-y-4",children:[b.jsx(ib,{label:"Full Name",name:"name",value:t.name,onChange:p,placeholder:"John Doe",error:a.name}),b.jsx(ib,{label:"Email address",name:"email",type:"email",value:t.email,onChange:p,placeholder:"you@example.com",error:a.email}),b.jsxs("div",{className:"mb-4",children:[b.jsxs("label",{htmlFor:"mobile",className:"block text-sm font-medium text-gray-700 mb-1",children:["Mobile Number ",b.jsx("span",{className:"text-red-500",children:"*"})]}),b.jsxs("div",{className:"flex",children:[b.jsx("span",{className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm",children:"+91"}),b.jsx("input",{type:"tel",id:"mobile",name:"mobile",value:t.mobile,onChange:p,placeholder:"9876543210",maxLength:"10",className:"flex-1 min-w-0 block w-full px-4 py-2 rounded-r-lg border border-l-0 focus:ring-2 focus:ring-main focus:border-transparent "+(a.mobile?"border-red-500":"border-gray-300")})]}),a.mobile&&b.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.mobile})]}),b.jsx(ib,{label:"Password",name:"password",type:"password",value:t.password,onChange:p,placeholder:"",error:a.password}),b.jsx(ib,{label:"Confirm Password",name:"confirmPassword",type:"password",value:t.confirmPassword,onChange:p,placeholder:"",error:a.confirmPassword}),b.jsx("div",{children:b.jsx("button",{type:"submit",disabled:l,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-main hover:bg-accent focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-main disabled:opacity-50",children:l?"Creating Account...":"Create Account"})})]}),b.jsxs("div",{className:"mt-6",children:[b.jsxs("div",{className:"relative",children:[b.jsx("div",{className:"absolute inset-0 flex items-center",children:b.jsx("div",{className:"w-full border-t border-gray-300"})}),b.jsx("div",{className:"relative flex justify-center text-sm",children:b.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),b.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-3",children:[b.jsx("div",{children:b.jsxs("button",{type:"button",onClick:()=>h("google"),disabled:l,className:"w-full inline-flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:[b.jsx("span",{className:"sr-only",children:"Sign in with Google"}),b.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:b.jsx("path",{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"})})]})}),b.jsx("div",{children:b.jsxs("button",{type:"button",onClick:()=>h("facebook"),disabled:l,className:"w-full inline-flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:[b.jsx("span",{className:"sr-only",children:"Sign in with Facebook"}),b.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20","aria-hidden":"true",children:b.jsx("path",{fillRule:"evenodd",d:"M20 10c0-5.523-4.477-10-10-10S0 4.477 0 10c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V10h2.54V7.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V10h2.773l-.443 2.89h-2.33v6.988C16.343 19.128 20 14.991 20 10z",clipRule:"evenodd"})})]})})]})]})]})})}const ob=()=>{const[e,t]=n.useState(""),[s,a]=n.useState(""),[o,l]=n.useState(""),[c,d]=n.useState(!1);r();return b.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[b.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[b.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-main",children:"Reset Your Password"}),b.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Enter your email address and we'll send you a link to reset your password."})]}),b.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:b.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[s&&b.jsx("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 text-green-700 rounded-md",children:s}),o&&b.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 text-red-700 rounded-md",children:o}),b.jsxs("form",{className:"space-y-6",onSubmit:async t=>{if(t.preventDefault(),e)if(/\S+@\S+\.\S+/.test(e)){d(!0),l(""),a("");try{const t=await Wm(e);t.success?a("Password reset email sent! Please check your inbox."):l(t.error||"Failed to send password reset email. Please try again.")}catch(s){console.error("Password reset error:",s),l("An error occurred. Please try again later.")}finally{d(!1)}}else l("Please enter a valid email address");else l("Please enter your email address")},children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),b.jsx("div",{className:"mt-1",children:b.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:e,onChange:e=>t(e.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-main focus:border-main sm:text-sm",placeholder:"you@example.com"})})]}),b.jsx("div",{children:b.jsx("button",{type:"submit",disabled:c,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-main hover:bg-main-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-main disabled:opacity-50",children:c?"Sending...":"Send Reset Link"})})]}),b.jsxs("div",{className:"mt-6",children:[b.jsxs("div",{className:"relative",children:[b.jsx("div",{className:"absolute inset-0 flex items-center",children:b.jsx("div",{className:"w-full border-t border-gray-300"})}),b.jsx("div",{className:"relative flex justify-center text-sm",children:b.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Remember your password?"})})]}),b.jsx("div",{className:"mt-6 text-center",children:b.jsx(i,{to:"/login",className:"font-medium text-main hover:text-main-dark",children:"Back to Sign in"})})]})]})})]})};function lb(){return b.jsx("div",{className:"min-h-screen w-full bg-background",children:b.jsxs("div",{className:"max-w-4xl mx-auto py-16 px-4",children:[b.jsx("h1",{className:"text-4xl font-bold text-indigo-800 text-center mb-12",children:kv("about.title")}),b.jsxs("div",{className:"space-y-8",children:[b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[b.jsx("h2",{className:"text-2xl font-bold text-indigo-800 mb-4",children:kv("about.ourStory")}),b.jsxs("div",{className:"space-y-6",children:[b.jsx("p",{className:"text-gray-700 text-lg",children:"Founded in 2025, Svasam Wellness was born from a deep understanding of the interconnectedness between mind, body, and soul. Our journey began with a simple vision: to create a holistic wellness platform that empowers individuals to achieve true balance and inner peace."}),b.jsx("p",{className:"text-gray-700 text-lg",children:"We believe that true wellness is more than just physical health - it's about nurturing all aspects of your being. Our comprehensive approach combines ancient wisdom with modern science to provide personalized wellness solutions that transform lives."})]})]}),b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[b.jsx("h2",{className:"text-2xl font-bold text-indigo-800 mb-4",children:kv("about.services")}),b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-indigo-700 mb-2",children:kv("about.mindWellness")}),b.jsxs("ul",{className:"list-disc ml-6 text-gray-600 space-y-2",children:[b.jsx("li",{children:"Manifestation and Abundance Programs"}),b.jsx("li",{children:"Stress Reduction Techniques"}),b.jsx("li",{children:"Super Brain Training"}),b.jsx("li",{children:"Personal Growth Workshops"})]})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-green-700 mb-2",children:kv("about.bodyWellness")}),b.jsxs("ul",{className:"list-disc ml-6 text-gray-600 space-y-2",children:[b.jsx("li",{children:"Yoga and Meditation Classes"}),b.jsx("li",{children:"Nutrition and Diet Planning"}),b.jsx("li",{children:"Naturopathy Treatments"}),b.jsx("li",{children:"Physical Well-being Programs"})]})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-purple-700 mb-2",children:kv("about.soulWellness")}),b.jsxs("ul",{className:"list-disc ml-6 text-gray-600 space-y-2",children:[b.jsx("li",{children:"Trauma Healing Sessions"}),b.jsx("li",{children:"Sound Therapy Workshops"}),b.jsx("li",{children:"Breathwork Practices"}),b.jsx("li",{children:"Spiritual Guidance Programs"})]})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-yellow-700 mb-2",children:kv("about.storeResources")}),b.jsxs("ul",{className:"list-disc ml-6 text-gray-600 space-y-2",children:[b.jsx("li",{children:"Energy Stones and Rudrakshas"}),b.jsx("li",{children:"Wellness Products"}),b.jsx("li",{children:"Educational Resources"}),b.jsx("li",{children:"Wellness Accessories"})]})]})]})]}),b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[b.jsx("h2",{className:"text-2xl font-bold text-indigo-800 mb-4",children:kv("about.ourPhilosophy")}),b.jsx("p",{className:"text-gray-700 text-lg mb-6",children:"At Svasam, we believe in the power of holistic healing. Our philosophy is rooted in the understanding that true wellness comes from nurturing all aspects of your being - mind, body, and soul. We combine ancient wisdom with modern science to create personalized wellness solutions that transform lives."}),b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-indigo-700 mb-2",children:kv("about.holisticApproach")}),b.jsx("p",{className:"text-gray-600",children:"We believe in treating the whole person, not just symptoms. Our programs are designed to create lasting change by addressing all aspects of your well-being."})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-green-700 mb-2",children:kv("about.personalizedSolutions")}),b.jsx("p",{className:"text-gray-600",children:"Each person's journey is unique. That's why we offer customized wellness plans tailored to your specific needs and goals."})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-purple-700 mb-2",children:kv("about.ancientWisdom")}),b.jsx("p",{className:"text-gray-600",children:"We draw from time-tested traditions and practices while incorporating modern scientific understanding to create powerful wellness solutions."})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-yellow-700 mb-2",children:kv("about.communitySupport")}),b.jsx("p",{className:"text-gray-600",children:"We believe in the power of community. Our platform connects you with like-minded individuals on their own wellness journeys, creating a supportive network for growth."})]})]})]}),b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[b.jsx("h2",{className:"text-2xl font-bold text-indigo-800 mb-6",children:kv("about.joinJourney")}),b.jsxs("div",{className:"space-y-4",children:[b.jsx("p",{className:"text-gray-600",children:"Ready to transform your life? Join our community of wellness seekers and begin your journey to holistic health and happiness."}),b.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[b.jsx("button",{className:"flex-1 bg-main text-white rounded-lg py-3 px-6 hover:brightness-105 transition",children:kv("about.contactUs")}),b.jsx("button",{className:"flex-1 bg-main text-white rounded-lg py-3 px-6 hover:brightness-105 transition",children:kv("about.scheduleSession")})]})]})]})]})]})})}function cb(){return b.jsx("div",{className:"min-h-screen w-full bg-background",children:b.jsxs("div",{className:"max-w-4xl mx-auto py-12 sm:py-16 px-4 md:px-6 lg:px-8",children:[b.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-indigo-800 text-center mb-8 sm:mb-12",children:kv("contact.title")}),b.jsxs("div",{className:"space-y-8",children:[b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 sm:p-8 md:p-10",children:[b.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-indigo-800 mb-6 sm:mb-8",children:kv("contact.getInTouch")}),b.jsxs("form",{className:"space-y-6",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:kv("contact.fullName")}),b.jsx("input",{type:"text",id:"name",className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:kv("contact.fullNamePlaceholder")})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:kv("contact.emailAddress")}),b.jsx("input",{type:"email",id:"email",className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:kv("contact.emailPlaceholder")})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:kv("contact.phoneNumber")}),b.jsx("input",{type:"tel",id:"phone",className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:kv("contact.phonePlaceholder")})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"subject",className:"block text-sm font-medium text-gray-700 mb-2",children:kv("contact.subject")}),b.jsxs("select",{id:"subject",className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[b.jsx("option",{value:"general",children:kv("contact.generalInquiry")}),b.jsx("option",{value:"wellness",children:kv("contact.wellnessPrograms")}),b.jsx("option",{value:"store",children:kv("contact.storeProducts")}),b.jsx("option",{value:"appointment",children:kv("contact.scheduleAppointment")}),b.jsx("option",{value:"other",children:kv("contact.other")})]})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700 mb-2",children:kv("contact.message")}),b.jsx("textarea",{id:"message",rows:"4",className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:kv("contact.messagePlaceholder")})]}),b.jsxs("button",{type:"submit",className:"w-full bg-main text-white py-3 px-6 rounded-lg hover:brightness-105 transition flex items-center justify-center",children:[b.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),kv("contact.sendMessage")]})]})]}),b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 sm:p-8 md:p-10",children:[b.jsx("h2",{className:"text-2xl font-bold text-indigo-800 mb-8",children:kv("contact.contactInfo")}),b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-indigo-700 mb-4",children:kv("contact.officeLocation")}),b.jsxs("div",{className:"space-y-2",children:[b.jsx("p",{className:"text-gray-600",children:"Svasam Wellness Pvt. Ltd."}),b.jsx("p",{className:"text-gray-600",children:"Office 2, 22 Paradise Villa Compound"}),b.jsx("p",{className:"text-gray-600",children:"Bhulabhai Desai Road, Mahalaxmi Mandir"}),b.jsx("p",{className:"text-gray-600",children:"Cumbala Hill, Mumbai 400026"})]})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-indigo-700 mb-4",children:kv("contact.contactDetails")}),b.jsxs("div",{className:"space-y-2",children:[b.jsx("p",{className:"text-gray-600",children:"Email: support@svasam.com"}),b.jsx("p",{className:"text-gray-600",children:"Phone: +91 1234567890"}),b.jsx("p",{className:"text-gray-600",children:"Customer Support: Mon-Sat, 10 AM - 7 PM"})]})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-indigo-700 mb-4",children:kv("contact.businessHours")}),b.jsxs("div",{className:"space-y-2",children:[b.jsx("p",{className:"text-gray-600",children:"Monday - Friday: 10:00 AM - 7:00 PM"}),b.jsx("p",{className:"text-gray-600",children:"Saturday: 10:00 AM - 6:00 PM"}),b.jsx("p",{className:"text-gray-600",children:"Sunday: Closed"})]})]})]})]}),b.jsxs("section",{className:"my-16 max-w-4xl mx-auto",children:[b.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-indigo-800 text-center mb-8 sm:mb-12",children:kv("contact.title")}),b.jsxs("div",{className:"space-y-4",children:[b.jsxs("details",{className:"bg-white rounded-xl shadow p-4",children:[b.jsx("summary",{className:"font-semibold text-indigo-700 cursor-pointer",children:kv("contact.faqQuestion1")}),b.jsx("p",{className:"mt-2 text-gray-700",children:"You can schedule a session by contacting our customer support team or using our online booking system. Simply provide your preferred date and time, and we'll help you find the right wellness practitioner for your needs."})]}),b.jsxs("details",{className:"bg-white rounded-xl shadow p-4",children:[b.jsx("summary",{className:"font-semibold text-indigo-700 cursor-pointer",children:kv("contact.faqQuestion2")}),b.jsx("p",{className:"mt-2 text-gray-700",children:"We accept various payment methods including credit/debit cards, UPI, net banking, and cash on delivery for our wellness programs and store products."})]}),b.jsxs("details",{className:"bg-white rounded-xl shadow p-4",children:[b.jsx("summary",{className:"font-semibold text-indigo-700 cursor-pointer",children:kv("contact.faqQuestion3")}),b.jsx("p",{className:"mt-2 text-gray-700",children:"Yes, you can cancel your appointment up to 24 hours before the scheduled time. Please contact our customer support team for assistance."})]})]})]})]})]})})}function db(){return b.jsx("div",{className:"min-h-screen w-full bg-background",children:b.jsxs("div",{className:"max-w-4xl mx-auto py-16 px-4",children:[b.jsx("h1",{className:"text-4xl font-bold text-indigo-800 text-center mb-12",children:kv("cancellation.title")}),b.jsxs("div",{className:"space-y-8",children:[b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[b.jsx("h2",{className:"text-2xl font-bold text-indigo-800 mb-4",children:kv("cancellation.welcome")}),b.jsx("p",{className:"text-gray-700 text-lg",children:kv("cancellation.introText")})]}),b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[b.jsx("h2",{className:"text-2xl font-bold text-indigo-800 mb-6",children:kv("cancellation.appointmentCancellations")}),b.jsxs("div",{className:"space-y-6",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-indigo-700 mb-4",children:kv("cancellation.cancellationPolicy")}),b.jsxs("ul",{className:"list-disc ml-6 text-gray-600 space-y-2",children:[b.jsx("li",{children:"You can cancel your appointment up to 24 hours before the scheduled time."}),b.jsx("li",{children:"Cancellations made within 24 hours of the appointment will be charged the full session fee."}),b.jsx("li",{children:"No-shows without prior notice will be charged the full session fee."}),b.jsx("li",{children:"Rescheduling is subject to availability and must be done at least 24 hours in advance."})]})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-indigo-700 mb-4",children:kv("cancellation.emergencyCancellations")}),b.jsxs("ul",{className:"list-disc ml-6 text-gray-600 space-y-2",children:[b.jsx("li",{children:"In case of genuine emergencies, please inform us as soon as possible."}),b.jsx("li",{children:"We may provide flexibility in such cases at our discretion."}),b.jsx("li",{children:"Medical emergencies require proof of documentation."})]})]})]})]}),b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[b.jsx("h2",{className:"text-2xl font-bold text-indigo-800 mb-6",children:kv("cancellation.refundPolicy")}),b.jsxs("div",{className:"space-y-6",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-indigo-700 mb-4",children:kv("cancellation.storeProducts")}),b.jsxs("ul",{className:"list-disc ml-6 text-gray-600 space-y-2",children:[b.jsx("li",{children:"We offer a 7-day return policy for store products."}),b.jsx("li",{children:"Products must be unused and in their original packaging."}),b.jsx("li",{children:"Shipping charges are non-refundable."}),b.jsx("li",{children:"Refunds will be processed within 5-7 business days."})]})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-indigo-700 mb-4",children:kv("cancellation.wellnessSessions")}),b.jsxs("ul",{className:"list-disc ml-6 text-gray-600 space-y-2",children:[b.jsx("li",{children:"No refunds for completed sessions."}),b.jsx("li",{children:"Package sessions are non-refundable but may be transferred to another person."}),b.jsx("li",{children:"Refunds may be considered on a case-by-case basis for medical reasons."})]})]})]})]}),b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[b.jsx("h2",{className:"text-2xl font-bold text-indigo-800 mb-6",children:kv("cancellation.specialCases")}),b.jsxs("div",{className:"space-y-6",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-indigo-700 mb-4",children:kv("cancellation.forceMajeure")}),b.jsxs("ul",{className:"list-disc ml-6 text-gray-600 space-y-2",children:[b.jsx("li",{children:"Our policies may be waived in cases of force majeure (natural disasters, pandemics, etc.)."}),b.jsx("li",{children:"Refunds will be considered on a case-by-case basis."})]})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-indigo-700 mb-4",children:kv("cancellation.disputes")}),b.jsxs("ul",{className:"list-disc ml-6 text-gray-600 space-y-2",children:[b.jsx("li",{children:"Any disputes will be resolved in accordance with Indian law."}),b.jsx("li",{children:"We strive to resolve all issues amicably through direct communication."})]})]})]})]}),b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[b.jsx("h2",{className:"text-2xl font-bold text-indigo-800 mb-6",children:kv("cancellation.contactUs")}),b.jsx("p",{className:"text-gray-700 mb-4",children:kv("cancellation.contactMessage")}),b.jsxs("div",{className:"space-y-2",children:[b.jsx("p",{className:"text-gray-600",children:kv("cancellation.email")}),b.jsx("p",{className:"text-gray-600",children:kv("cancellation.phone")}),b.jsx("p",{className:"text-gray-600",children:kv("cancellation.supportHours")})]})]})]})]})})}function ub(){return b.jsx("div",{className:"min-h-screen w-full bg-background",children:b.jsxs("div",{className:"max-w-4xl mx-auto py-16 px-4",children:[b.jsx("h1",{className:"text-4xl font-bold text-indigo-800 text-center mb-12",children:kv("shipping.title")}),b.jsxs("div",{className:"space-y-8",children:[b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[b.jsx("h2",{className:"text-2xl font-bold text-indigo-800 mb-4",children:kv("shipping.welcome")}),b.jsx("p",{className:"text-gray-700 text-lg",children:"This policy outlines our shipping and delivery procedures for all products purchased from our store. We strive to provide efficient and reliable delivery services to ensure you receive your wellness products in perfect condition."})]}),b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[b.jsx("h2",{className:"text-2xl font-bold text-indigo-800 mb-6",children:kv("shipping.shippingAreas")}),b.jsxs("div",{className:"space-y-6",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-indigo-700 mb-4",children:kv("shipping.domesticShipping")}),b.jsxs("ul",{className:"list-disc ml-6 text-gray-600 space-y-2",children:[b.jsx("li",{children:"We ship to all major cities and towns across India."}),b.jsx("li",{children:"Shipping charges vary based on location and product weight."}),b.jsx("li",{children:"Free shipping on orders above 1999."})]})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-indigo-700 mb-4",children:kv("shipping.internationalShipping")}),b.jsxs("ul",{className:"list-disc ml-6 text-gray-600 space-y-2",children:[b.jsx("li",{children:"Currently available for select countries."}),b.jsx("li",{children:"Additional customs and import duties may apply."}),b.jsx("li",{children:"Shipping charges calculated at checkout."})]})]})]})]}),b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[b.jsx("h2",{className:"text-2xl font-bold text-indigo-800 mb-6",children:kv("shipping.shippingTimes")}),b.jsxs("div",{className:"space-y-6",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-indigo-700 mb-4",children:"Processing Time"}),b.jsxs("ul",{className:"list-disc ml-6 text-gray-600 space-y-2",children:[b.jsx("li",{children:"Orders are processed within 2-3 business days."}),b.jsx("li",{children:"Custom orders may take longer (5-7 business days)."}),b.jsx("li",{children:"Processing time may vary during peak seasons."})]})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-indigo-700 mb-4",children:"Delivery Time"}),b.jsxs("ul",{className:"list-disc ml-6 text-gray-600 space-y-2",children:[b.jsx("li",{children:"Standard Delivery: 5-7 business days"}),b.jsx("li",{children:"Express Delivery: 2-3 business days (additional charges apply)"}),b.jsx("li",{children:"Delivery times may vary based on location."})]})]})]})]}),b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[b.jsx("h2",{className:"text-2xl font-bold text-indigo-800 mb-6",children:"Shipping Methods"}),b.jsxs("div",{className:"space-y-6",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-indigo-700 mb-4",children:"Standard Shipping"}),b.jsxs("ul",{className:"list-disc ml-6 text-gray-600 space-y-2",children:[b.jsx("li",{children:"Regular courier service"}),b.jsx("li",{children:"Delivery confirmation via email"}),b.jsx("li",{children:"Tracking number provided"})]})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-indigo-700 mb-4",children:"Express Shipping"}),b.jsxs("ul",{className:"list-disc ml-6 text-gray-600 space-y-2",children:[b.jsx("li",{children:"Priority courier service"}),b.jsx("li",{children:"Real-time tracking available"}),b.jsx("li",{children:"Additional charges apply"})]})]})]})]}),b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[b.jsx("h2",{className:"text-2xl font-bold text-indigo-800 mb-6",children:"Delivery Information"}),b.jsxs("div",{className:"space-y-6",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-indigo-700 mb-4",children:"Delivery Address"}),b.jsxs("ul",{className:"list-disc ml-6 text-gray-600 space-y-2",children:[b.jsx("li",{children:"Please provide accurate delivery address."}),b.jsx("li",{children:"Delivery to ground floor only for heavy items."}),b.jsx("li",{children:"Additional charges for delivery above ground floor."})]})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-indigo-700 mb-4",children:"Delivery Time Slot"}),b.jsxs("ul",{className:"list-disc ml-6 text-gray-600 space-y-2",children:[b.jsx("li",{children:"Standard delivery time: 10 AM - 6 PM"}),b.jsx("li",{children:"Evening delivery available (additional charges apply)"}),b.jsx("li",{children:"Please be available during the delivery time slot."})]})]})]})]}),b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[b.jsx("h2",{className:"text-2xl font-bold text-indigo-800 mb-6",children:"Special Cases"}),b.jsxs("div",{className:"space-y-6",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-indigo-700 mb-4",children:"Remote Areas"}),b.jsxs("ul",{className:"list-disc ml-6 text-gray-600 space-y-2",children:[b.jsx("li",{children:"Additional shipping charges may apply."}),b.jsx("li",{children:"Longer delivery times possible."}),b.jsx("li",{children:"Contact us for remote area shipping."})]})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-indigo-700 mb-4",children:"Holiday Periods"}),b.jsxs("ul",{className:"list-disc ml-6 text-gray-600 space-y-2",children:[b.jsx("li",{children:"Shipping may be delayed during holidays."}),b.jsx("li",{children:"Special holiday shipping rates may apply."}),b.jsx("li",{children:"Orders placed during holidays processed after holidays."})]})]})]})]}),b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[b.jsx("h2",{className:"text-2xl font-bold text-indigo-800 mb-6",children:kv("shipping.contactUs")}),b.jsx("p",{className:"text-gray-700 mb-4",children:"For any questions regarding shipping and delivery, please contact our customer support team:"}),b.jsxs("div",{className:"space-y-2",children:[b.jsx("p",{className:"text-gray-600",children:"Email: support@svasam.com"}),b.jsx("p",{className:"text-gray-600",children:"Phone: +91 1234567890"}),b.jsx("p",{className:"text-gray-600",children:"Customer Support Hours: Mon-Sat, 10 AM - 7 PM"})]})]})]})]})})}function hb(){return b.jsx("div",{className:"min-h-screen w-full bg-background",children:b.jsxs("div",{className:"max-w-4xl mx-auto py-16 px-4",children:[b.jsx("h1",{className:"text-4xl font-bold text-indigo-800 text-center mb-12",children:kv("terms.title")}),b.jsxs("div",{className:"space-y-8",children:[b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[b.jsx("h2",{className:"text-2xl font-bold text-indigo-800 mb-4",children:kv("terms.welcome")}),b.jsx("p",{className:"text-gray-700 text-lg",children:kv("terms.introText")})]}),b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[b.jsx("h2",{className:"text-2xl font-bold text-indigo-800 mb-6",children:kv("terms.acceptanceOfTerms")}),b.jsxs("div",{className:"space-y-6",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-indigo-700 mb-4",children:kv("terms.accessToWebsite")}),b.jsxs("ul",{className:"list-disc ml-6 text-gray-600 space-y-2",children:[b.jsx("li",{children:"By accessing this website, you agree to be bound by these Terms and Conditions."}),b.jsx("li",{children:"Our services are only available to individuals who can form legally binding contracts."}),b.jsx("li",{children:"Access to certain areas of the website may be restricted."})]})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-indigo-700 mb-4",children:kv("terms.changesToTerms")}),b.jsxs("ul",{className:"list-disc ml-6 text-gray-600 space-y-2",children:[b.jsx("li",{children:"We reserve the right to modify these Terms and Conditions at any time."}),b.jsx("li",{children:"Continued use of the website after changes constitutes acceptance of the new terms."})]})]})]})]}),b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[b.jsx("h2",{className:"text-2xl font-bold text-indigo-800 mb-6",children:kv("terms.userObligations")}),b.jsxs("div",{className:"space-y-6",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-indigo-700 mb-4",children:kv("terms.accountSecurity")}),b.jsxs("ul",{className:"list-disc ml-6 text-gray-600 space-y-2",children:[b.jsx("li",{children:"Keep your account credentials secure."}),b.jsx("li",{children:"Notify us immediately of any unauthorized access."}),b.jsx("li",{children:"Be responsible for all activities under your account."})]})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-indigo-700 mb-4",children:kv("terms.prohibitedActivities")}),b.jsxs("ul",{className:"list-disc ml-6 text-gray-600 space-y-2",children:[b.jsx("li",{children:"Do not use our services for illegal purposes."}),b.jsx("li",{children:"Do not interfere with our website's operations."}),b.jsx("li",{children:"Do not violate intellectual property rights."})]})]})]})]}),b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[b.jsx("h2",{className:"text-2xl font-bold text-indigo-800 mb-6",children:kv("terms.services")}),b.jsxs("div",{className:"space-y-6",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-indigo-700 mb-4",children:kv("terms.wellnessServices")}),b.jsxs("ul",{className:"list-disc ml-6 text-gray-600 space-y-2",children:[b.jsx("li",{children:"Services are subject to availability."}),b.jsx("li",{children:"Prices are subject to change without notice."}),b.jsx("li",{children:"Services may be modified or discontinued at any time."})]})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-indigo-700 mb-4",children:kv("terms.storeProducts")}),b.jsxs("ul",{className:"list-disc ml-6 text-gray-600 space-y-2",children:[b.jsx("li",{children:"Product descriptions are for informational purposes only."}),b.jsx("li",{children:"Stock availability is not guaranteed."}),b.jsx("li",{children:"Prices are subject to change without notice."})]})]})]})]}),b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[b.jsx("h2",{className:"text-2xl font-bold text-indigo-800 mb-6",children:kv("terms.intellectualProperty")}),b.jsxs("div",{className:"space-y-6",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-indigo-700 mb-4",children:kv("terms.contentOwnership")}),b.jsxs("ul",{className:"list-disc ml-6 text-gray-600 space-y-2",children:[b.jsx("li",{children:"All content on the website is owned by Svasam Wellness."}),b.jsx("li",{children:"You may not reproduce or distribute our content without permission."}),b.jsx("li",{children:"User-generated content remains the property of the user."})]})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-indigo-700 mb-4",children:kv("terms.trademarks")}),b.jsxs("ul",{className:"list-disc ml-6 text-gray-600 space-y-2",children:[b.jsx("li",{children:"Svasam Wellness and related logos are trademarks."}),b.jsx("li",{children:"You may not use our trademarks without permission."})]})]})]})]}),b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[b.jsx("h2",{className:"text-2xl font-bold text-indigo-800 mb-6",children:kv("terms.limitationOfLiability")}),b.jsxs("div",{className:"space-y-6",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-indigo-700 mb-4",children:kv("terms.disclaimerOfWarranties")}),b.jsxs("ul",{className:"list-disc ml-6 text-gray-600 space-y-2",children:[b.jsx("li",{children:'Services are provided "as is" and "as available".'}),b.jsx("li",{children:"No warranties are made regarding service availability."}),b.jsx("li",{children:"Results from wellness services are not guaranteed."})]})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-indigo-700 mb-4",children:kv("terms.limitationOfDamages")}),b.jsxs("ul",{className:"list-disc ml-6 text-gray-600 space-y-2",children:[b.jsx("li",{children:"We are not liable for any indirect or consequential damages."}),b.jsx("li",{children:"Our liability is limited to the amount paid for services."})]})]})]})]}),b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[b.jsx("h2",{className:"text-2xl font-bold text-indigo-800 mb-6",children:kv("terms.contactUs")}),b.jsx("p",{className:"text-gray-700 mb-4",children:kv("terms.contactMessage")}),b.jsxs("div",{className:"space-y-2",children:[b.jsx("p",{className:"text-gray-600",children:kv("terms.email")}),b.jsx("p",{className:"text-gray-600",children:kv("terms.phone")}),b.jsx("p",{className:"text-gray-600",children:kv("terms.supportHours")})]})]})]})]})})}function pb(){return b.jsx("div",{className:"min-h-screen w-full bg-background",children:b.jsxs("div",{className:"max-w-4xl mx-auto py-16 px-4",children:[b.jsx("h1",{className:"text-4xl font-bold text-indigo-800 text-center mb-12",children:kv("privacy.title")}),b.jsxs("div",{className:"space-y-8",children:[b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[b.jsx("h2",{className:"text-2xl font-bold text-indigo-800 mb-4",children:kv("privacy.welcome")}),b.jsx("p",{className:"text-gray-700 text-lg",children:"At Svasam Wellness, we are committed to protecting your privacy and ensuring the security of your personal information."})]}),b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[b.jsx("h2",{className:"text-2xl font-bold text-indigo-800 mb-6",children:kv("privacy.infoCollect")}),b.jsxs("div",{className:"space-y-6",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-indigo-700 mb-4",children:kv("privacy.personalInfo")}),b.jsxs("ul",{className:"list-disc ml-6 text-gray-600 space-y-2",children:[b.jsx("li",{children:"Name and contact information"}),b.jsx("li",{children:"Email address"}),b.jsx("li",{children:"Phone number"}),b.jsx("li",{children:"Payment information (when making purchases)"})]})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-indigo-700 mb-4",children:kv("privacy.usageInfo")}),b.jsxs("ul",{className:"list-disc ml-6 text-gray-600 space-y-2",children:[b.jsx("li",{children:"Website usage data"}),b.jsx("li",{children:"Device information"}),b.jsx("li",{children:"Location data (when applicable)"}),b.jsx("li",{children:"Service usage patterns"})]})]})]})]}),b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[b.jsx("h2",{className:"text-2xl font-bold text-indigo-800 mb-6",children:kv("privacy.howWeUse")}),b.jsxs("div",{className:"space-y-6",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-indigo-700 mb-4",children:kv("privacy.primaryUses")}),b.jsxs("ul",{className:"list-disc ml-6 text-gray-600 space-y-2",children:[b.jsx("li",{children:"To provide and improve our services"}),b.jsx("li",{children:"To process orders and payments"}),b.jsx("li",{children:"To communicate with you about our services"}),b.jsx("li",{children:"To personalize your experience"})]})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-indigo-700 mb-4",children:kv("privacy.marketing")}),b.jsxs("ul",{className:"list-disc ml-6 text-gray-600 space-y-2",children:[b.jsx("li",{children:"We may send promotional emails with your consent"}),b.jsx("li",{children:"You can opt-out of marketing communications"}),b.jsx("li",{children:"We do not share your information with third-party marketers"})]})]})]})]}),b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[b.jsx("h2",{className:"text-2xl font-bold text-indigo-800 mb-6",children:kv("privacy.dataProtection")}),b.jsxs("div",{className:"space-y-6",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-indigo-700 mb-4",children:"Security Measures"}),b.jsxs("ul",{className:"list-disc ml-6 text-gray-600 space-y-2",children:[b.jsx("li",{children:"We use encryption to protect your data"}),b.jsx("li",{children:"We implement security measures to prevent unauthorized access"}),b.jsx("li",{children:"We regularly update our security practices"})]})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-indigo-700 mb-4",children:"Data Retention"}),b.jsxs("ul",{className:"list-disc ml-6 text-gray-600 space-y-2",children:[b.jsx("li",{children:"We retain your information only as long as necessary"}),b.jsx("li",{children:"Information is deleted when no longer needed"}),b.jsx("li",{children:"We comply with legal requirements for data retention"})]})]})]})]}),b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[b.jsx("h2",{className:"text-2xl font-bold text-indigo-800 mb-6",children:"4. Your Rights"}),b.jsxs("div",{className:"space-y-6",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-indigo-700 mb-4",children:"Access to Information"}),b.jsxs("ul",{className:"list-disc ml-6 text-gray-600 space-y-2",children:[b.jsx("li",{children:"You can request access to your personal information"}),b.jsx("li",{children:"You can request corrections to your information"}),b.jsx("li",{children:"You can request deletion of your information"})]})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-indigo-700 mb-4",children:"Opt-Out Rights"}),b.jsxs("ul",{className:"list-disc ml-6 text-gray-600 space-y-2",children:[b.jsx("li",{children:"You can opt-out of marketing communications"}),b.jsx("li",{children:"You can withdraw consent for data processing"}),b.jsx("li",{children:"You can object to certain data processing activities"})]})]})]})]}),b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[b.jsx("h2",{className:"text-2xl font-bold text-indigo-800 mb-6",children:"5. Third Parties"}),b.jsxs("div",{className:"space-y-6",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-indigo-700 mb-4",children:"Service Providers"}),b.jsxs("ul",{className:"list-disc ml-6 text-gray-600 space-y-2",children:[b.jsx("li",{children:"We work with trusted third-party service providers"}),b.jsx("li",{children:"Service providers are contractually bound to protect your data"}),b.jsx("li",{children:"We do not share your information with unrelated third parties"})]})]}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-semibold text-indigo-700 mb-4",children:"External Links"}),b.jsxs("ul",{className:"list-disc ml-6 text-gray-600 space-y-2",children:[b.jsx("li",{children:"Our website may contain links to external sites"}),b.jsx("li",{children:"We are not responsible for external sites' privacy practices"}),b.jsx("li",{children:"Please review external sites' privacy policies"})]})]})]})]}),b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[b.jsx("h2",{className:"text-2xl font-bold text-indigo-800 mb-6",children:kv("privacy.contactUs")}),b.jsx("p",{className:"text-gray-700 mb-4",children:"For any questions regarding this Privacy Policy or your data, please contact us:"}),b.jsxs("div",{className:"space-y-2",children:[b.jsx("p",{className:"text-gray-600",children:"Email: support@svasam.com"}),b.jsx("p",{className:"text-gray-600",children:"Phone: +91 1234567890"}),b.jsx("p",{className:"text-gray-600",children:"Customer Support Hours: Mon-Sat, 10 AM - 7 PM"})]})]})]})]})})}const mb={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_SANITY_API_VERSION:"2023-07-21",VITE_SANITY_DATASET:"production1",VITE_SANITY_PROJECT_ID:"n5smwbzi",VITE_SANITY_USE_CDN:"true",VITE_USER_NODE_ENV:"production"};function fb(e){const t=mb[e];if(!t)throw new Error(` Missing required environment variable: ${e}`);return t.trim()}const gb=fb("VITE_SANITY_PROJECT_ID"),yb=fb("VITE_SANITY_DATASET"),xb=gb.replace(/\.api\.sanity\.io.*$/,"").trim();xb!==gb&&console.warn(" Fixed malformed VITE_SANITY_PROJECT_ID:",gb,"",xb);const vb={projectId:xb,dataset:yb,apiVersion:"2023-07-21",useCdn:!0,token:void 0,withCredentials:!1,ignoreBrowserTokenWarning:!0},bb=m({...vb,fetch:async(e,t={})=>{const s=await fetch(e,{...t,headers:{"Content-Type":"application/json",Accept:"application/json",...vb.token,...t.headers||{}}});if(!s.ok){const e=await s.text();throw new Error(` Sanity API Error: ${s.status} ${e}`)}return s},requestTagPrefix:"sanity-js"});function wb(){const{sessions:e,loading:t,error:s}=function(){const[e,t]=n.useState([]),[s,r]=n.useState(!0),[i,a]=n.useState(null);return n.useEffect(()=>{let e=!1;return async function(){r(!0),a(null);try{const s='*[_type == "session"] | order(_createdAt desc) {\n          _id,\n          title,\n          description,\n          mediaType,\n          // dereference file asset url\n          "fileUrl": file.asset->url\n        }',n=await bb.fetch(s);e||t(Array.isArray(n)?n:[])}catch(s){e||a(s)}finally{e||r(!1)}}(),()=>{e=!0}},[]),{sessions:e,loading:s,error:i}}();return t?b.jsxs("div",{className:"min-h-screen w-full bg-background flex items-center justify-center",children:[b.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-main"}),b.jsx("span",{className:"ml-4 text-gray-700",children:"Loading sessions..."})]}):s?b.jsx("div",{className:"min-h-screen w-full bg-background flex items-center justify-center",children:b.jsxs("div",{className:"text-red-500 text-center p-6 max-w-md bg-white rounded-lg shadow-lg",children:[b.jsx("h2",{className:"text-xl font-bold mb-2",children:"Error Loading Sessions"}),b.jsx("p",{className:"mb-4",children:"We couldn't load the sessions. Please try again later."}),b.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-main text-white rounded-md hover:bg-accent transition-colors",children:"Retry"})]})}):b.jsx("div",{className:"min-h-screen w-full bg-background",children:b.jsxs("div",{className:"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8",children:[b.jsxs("div",{className:"text-center mb-12",children:[b.jsx("h1",{className:"text-4xl font-bold text-main mb-4",children:"Sessions"}),b.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Listen or watch guided content designed to nurture your mind, body, and soul."})]}),b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-16",children:e.map(e=>b.jsx("div",{className:"group block h-full",children:b.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden h-full flex flex-col hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1",children:[b.jsx("div",{className:"relative bg-gray-100",children:"audio"===e.mediaType&&e.fileUrl?b.jsx("div",{className:"p-4",children:b.jsx("audio",{controls:!0,className:"w-full",src:e.fileUrl,preload:"none"})}):"video"===e.mediaType&&e.fileUrl?b.jsx("div",{className:"aspect-video bg-black",children:b.jsx("video",{controls:!0,className:"w-full h-full",src:e.fileUrl,preload:"none"})}):b.jsx("div",{className:"w-full h-48 bg-gradient-to-r from-purple-50 to-blue-50 flex items-center justify-center",children:b.jsx("span",{className:"text-gray-400",children:"No media available"})})}),b.jsxs("div",{className:"p-6 flex-1 flex flex-col",children:[b.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3 group-hover:text-main transition-colors",children:e.title||"Untitled session"}),b.jsx("p",{className:"text-gray-600 mb-4 flex-grow line-clamp-3",children:e.description||"No description"}),b.jsx("div",{className:"mt-auto pt-4 border-t border-gray-100",children:b.jsxs("div",{className:"flex justify-between items-center",children:[b.jsx("span",{className:"text-sm font-medium text-main capitalize",children:e.mediaType||"unknown"}),e.fileUrl?b.jsxs("a",{href:e.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-sm text-gray-500 hover:text-main",children:["Open file",b.jsx("svg",{className:"ml-1 w-4 h-4 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})]}):b.jsx("span",{className:"text-sm text-gray-400",children:"No file"})]})})]})]})},e._id))}),b.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 mb-12",children:[b.jsx("h2",{className:"text-2xl font-bold text-main mb-8 text-center",children:"Explore by Category"}),b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:["Mind","Body","Soul"].map(e=>b.jsx(i,{to:`/${e.toLowerCase()}`,className:"group block",children:b.jsxs("div",{className:"bg-gray-50 hover:bg-gray-100 rounded-xl p-6 transition-colors h-full",children:[b.jsxs("h3",{className:"text-xl font-bold text-main mb-3",children:[e," Programs"]}),b.jsxs("p",{className:"text-gray-600 mb-4",children:["Discover our curated selection of ",e.toLowerCase()," programs designed to help you thrive."]}),b.jsxs("span",{className:"inline-flex items-center text-main font-medium group-hover:underline",children:["Explore ",e,b.jsx("svg",{className:"ml-1 w-4 h-4 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})]})]})},e))})]}),b.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-2xl p-8 mb-12",children:[b.jsx("h2",{className:"text-2xl font-bold text-main mb-8 text-center",children:"Why Choose Our Programs"}),b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[{title:"Expert Guidance",description:"Learn from certified practitioners with years of experience in their fields."},{title:"Flexible Learning",description:"Access programs at your own pace, anytime and anywhere."},{title:"Holistic Approach",description:"Programs designed to address mind, body, and soul for complete wellbeing."},{title:"Proven Results",description:"Join thousands who have transformed their lives through our programs."}].map((e,t)=>b.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm hover:shadow-md transition-shadow",children:[b.jsx("div",{className:"w-12 h-12 bg-main/10 rounded-full flex items-center justify-center mb-4",children:b.jsx("span",{className:"text-main text-xl font-bold",children:t+1})}),b.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e.title}),b.jsx("p",{className:"text-gray-600",children:e.description})]},t))})]})]})})}function Nb(){const e='*[_type == "blogPost"] {\n    _id,\n    title,\n    slug,\n    excerpt,\n    publishedAt,\n    "authorName": author->name,\n    "authorImage": author->image.asset->url\n  } | order(publishedAt desc)',{data:t,loading:s,error:r}=function(e,t={}){const[s,r]=n.useState(null),[i,a]=n.useState(!0),[o,l]=n.useState(null),c=n.useCallback(async()=>{try{a(!0),console.log("Executing Sanity query:",e),console.log("With parameters:",t);const s=new AbortController,n=setTimeout(()=>s.abort(),1e4),i=await ix.fetch(e,t,{signal:s.signal});if(clearTimeout(n),!i)throw new Error("No data returned from Sanity");console.log("Sanity API response:",i),r(i),l(null)}catch(s){console.error("Error fetching data from Sanity:",{name:s.name,message:s.message,stack:s.stack,query:e,params:t,config:{projectId:ix.config().projectId,dataset:ix.config().dataset,apiVersion:ix.config().apiVersion,useCdn:ix.config().useCdn,withCredentials:ix.config().withCredentials}}),l({message:s.message||"Failed to fetch data from Sanity",details:{name:s.name,query:e,params:t,isNetworkError:"AbortError"===s.name||!navigator.onLine}})}finally{a(!1)}},[e,JSON.stringify(t)]);return n.useEffect(()=>{c()},[c]),{data:s,loading:i,error:o,refetch:c}}(e);return s?b.jsx("div",{className:"flex justify-center items-center min-h-[200px]",children:b.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):r?(console.error("Sanity API Error Details:",{message:r.message,status:r.statusCode,response:r.responseBody,query:e}),b.jsxs("div",{className:"text-red-500 p-4 bg-red-50 rounded-lg",children:[b.jsx("p",{className:"font-bold",children:"Error loading blog posts"}),b.jsxs("p",{className:"text-sm mt-1",children:["Status: ",r.statusCode||"Unknown"]}),b.jsxs("p",{className:"text-sm",children:["Message: ",r.message||"An unknown error occurred"]}),!1]})):t&&0!==t.length?b.jsx("div",{className:"grid gap-8 md:grid-cols-2 lg:grid-cols-3",children:t.map(e=>b.jsxs("article",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300",children:[e.mainImage&&b.jsx("img",{src:e.mainImage.asset?.url,alt:e.title,className:"w-full h-48 object-cover"}),b.jsxs("div",{className:"p-6",children:[b.jsx("h2",{className:"text-xl font-bold mb-2 text-gray-900",children:e.title}),e.excerpt&&b.jsx("p",{className:"text-gray-600 mb-4",children:e.excerpt}),b.jsxs("div",{className:"flex items-center mt-4",children:[e.authorImage&&b.jsx("img",{src:e.authorImage,alt:e.authorName,className:"w-10 h-10 rounded-full mr-3 object-cover"}),b.jsxs("div",{children:[b.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.authorName}),b.jsx("p",{className:"text-sm text-gray-500",children:new Date(e.publishedAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]})]})]},e._id))}):b.jsx("div",{className:"text-gray-500",children:"No blog posts found."})}function Sb(){return b.jsx("div",{className:"min-h-screen bg-background pt-24 pb-16 px-4 sm:px-6 lg:px-8",children:b.jsxs("div",{className:"max-w-7xl mx-auto",children:[b.jsxs("div",{className:"text-center mb-12",children:[b.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:kv("blog.title")}),b.jsx("p",{className:"text-base sm:text-lg lg:text-xl text-gray-600 max-w-3xl mx-auto",children:kv("blog.description")})]}),b.jsx(Nb,{}),b.jsxs("div",{className:"mt-16 text-center",children:[b.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:kv("blog.stayUpdated")}),b.jsx("p",{className:"text-gray-700 mb-6",children:kv("blog.subscribeText")}),b.jsxs("form",{className:"flex flex-col sm:flex-row gap-2 max-w-md mx-auto",children:[b.jsx("input",{type:"email",placeholder:kv("blog.emailPlaceholder"),className:"flex-1 px-3 py-2 sm:px-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm sm:text-base",required:!0}),b.jsx("button",{type:"submit",className:"bg-main text-white px-4 py-2 sm:px-6 rounded-lg hover:brightness-105 transition-colors text-sm sm:text-base",children:kv("blog.subscribe")})]}),b.jsxs("div",{className:"mt-8 text-gray-600",children:[b.jsx("p",{children:kv("blog.email")}),b.jsx("p",{children:kv("blog.phone")}),b.jsx("p",{children:kv("blog.supportHours")})]})]})]})})}function Eb(){return b.jsx("div",{className:"min-h-screen w-full bg-background",children:b.jsxs("div",{className:"max-w-4xl mx-auto py-16 px-4",children:[b.jsx("h1",{className:"text-4xl font-bold text-indigo-800 text-center mb-12",children:"All Articles"}),b.jsxs("div",{className:"space-y-8",children:[b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[b.jsx("h2",{className:"text-2xl font-bold text-indigo-800 mb-4",children:"Explore Our Articles"}),b.jsx("p",{className:"text-gray-700 text-lg",children:"Discover our collection of wellness articles across Mind, Body, and Soul categories."})]}),b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[{id:1,title:"The Power of Positive Thinking",category:"Mind",date:"July 1, 2025",author:"Dr. Anjali Sharma",image:"/blog-1.jpg",excerpt:"Discover how positive thinking can transform your life and improve your overall well-being.",tags:["Mindfulness","Wellness","Self-Improvement"]},{id:2,title:"Yoga for Better Sleep",category:"Body",date:"June 25, 2025",author:"Yogi Raj",image:"/blog-2.jpg",excerpt:"Learn yoga poses and techniques to help you get a better night's sleep.",tags:["Yoga","Sleep","Wellness"]},{id:3,title:"Understanding Chakras",category:"Soul",date:"June 20, 2025",author:"Priya Patel",image:"/blog-3.jpg",excerpt:"A comprehensive guide to the seven major chakras and their significance.",tags:["Soul","Energy","Healing"]},{id:4,title:"Stress Management Techniques",category:"Mind",date:"June 15, 2025",author:"Dr. Anjali Sharma",image:"/blog-4.jpg",excerpt:"Effective strategies to manage and reduce stress in your daily life.",tags:["Mindfulness","Stress","Wellness"]},{id:5,title:"Nutrition for Wellness",category:"Body",date:"June 10, 2025",author:"Neha Verma",image:"/blog-5.jpg",excerpt:"How proper nutrition can support your wellness journey.",tags:["Nutrition","Wellness","Health"]}].map(e=>b.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300",children:[b.jsx("div",{className:"relative h-48 bg-gray-100",children:b.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-100 via-pink-100 to-blue-100"})}),b.jsxs("div",{className:"p-6",children:[b.jsx("span",{className:"inline-block px-3 py-1 rounded-full bg-indigo-100 text-indigo-700 text-sm font-medium mb-2",children:e.category}),b.jsx("h3",{className:"text-xl font-bold text-indigo-800 mb-2",children:e.title}),b.jsx("p",{className:"text-gray-600 mb-4",children:e.excerpt}),b.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500",children:[b.jsx("span",{children:e.date}),b.jsx("span",{children:e.author})]}),b.jsx("div",{className:"mt-4 flex gap-2",children:e.tags.map(e=>b.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-indigo-100 text-indigo-700",children:e},e))}),b.jsx(i,{to:`/blog/${e.id}`,className:"mt-4 w-full bg-gradient-to-r from-purple-100 via-purple-200 to-blue-100 text-indigo-700 font-semibold py-2 px-4 rounded-full shadow hover:shadow-lg transition-all duration-200",children:"Read More"})]})]},e.id))}),b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[b.jsx("h2",{className:"text-2xl font-bold text-indigo-800 mb-6",children:"Filter by Category"}),b.jsxs("div",{className:"flex gap-4 flex-wrap",children:[b.jsx("button",{className:"px-4 py-2 rounded-full bg-purple-100 text-purple-700 font-medium hover:bg-purple-200 transition",children:"All"}),b.jsx("button",{className:"px-4 py-2 rounded-full bg-green-100 text-green-700 font-medium hover:bg-green-200 transition",children:"Mind"}),b.jsx("button",{className:"px-4 py-2 rounded-full bg-purple-200 text-purple-800 font-medium hover:bg-purple-300 transition",children:"Body"}),b.jsx("button",{className:"px-4 py-2 rounded-full bg-indigo-100 text-indigo-700 font-medium hover:bg-indigo-200 transition",children:"Soul"}),b.jsx("button",{className:"px-4 py-2 rounded-full bg-blue-100 text-blue-700 font-medium hover:bg-blue-200 transition",children:"Wellness"}),b.jsx("button",{className:"px-4 py-2 rounded-full bg-yellow-100 text-yellow-700 font-medium hover:bg-yellow-200 transition",children:"Yoga"})]})]}),b.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[b.jsx("h2",{className:"text-2xl font-bold text-indigo-800 mb-6",children:"Subscribe to Our Newsletter"}),b.jsx("div",{className:"bg-gradient-to-r from-purple-100 via-pink-100 to-blue-100 p-6 rounded-xl",children:b.jsxs("div",{className:"bg-white/10 p-4 rounded-lg",children:[b.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Stay Updated"}),b.jsx("p",{className:"text-gray-700 mb-6",children:"Get our latest wellness articles straight to your inbox."}),b.jsxs("form",{className:"flex gap-2",children:[b.jsx("input",{type:"email",placeholder:"Enter your email",className:"flex-1 px-4 py-2 rounded-lg bg-white text-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500"}),b.jsx("button",{className:"px-6 py-2 rounded-lg bg-main text-white font-semibold hover:brightness-105 transition",children:"Subscribe"})]})]})})]})]})]})})}function jb({title:e,titleId:t,...s},r){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?n.createElement("title",{id:t},e):null,n.createElement("path",{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const Tb=n.forwardRef(jb);function _b(e){return"span"===e._type&&"text"in e&&"string"==typeof e.text&&(typeof e.marks>"u"||Array.isArray(e.marks)&&e.marks.every(e=>"string"==typeof e))}function Ib(e){return"string"==typeof e._type&&"@"!==e._type[0]&&(!("markDefs"in e)||!e.markDefs||Array.isArray(e.markDefs)&&e.markDefs.every(e=>"string"==typeof e._key))&&"children"in e&&Array.isArray(e.children)&&e.children.every(e=>"object"==typeof e&&"_type"in e)}function Cb(e){return Ib(e)&&"listItem"in e&&"string"==typeof e.listItem&&(typeof e.level>"u"||"number"==typeof e.level)}function kb(e){return"@list"===e._type}function Ab(e){return"@span"===e._type}function Pb(e){return"@text"===e._type}const Ob=["strong","em","code","underline","strike-through"];function Rb(e,t,s){if(!_b(e)||!e.marks)return[];if(!e.marks.length)return[];const n=e.marks.slice(),r={};return n.forEach(e=>{r[e]=1;for(let n=t+1;n<s.length;n++){const t=s[n];if(!(t&&_b(t)&&Array.isArray(t.marks)&&-1!==t.marks.indexOf(e)))break;r[e]++}}),n.sort((e,t)=>function(e,t,s){const n=e[t],r=e[s];if(n!==r)return r-n;const i=Ob.indexOf(t),a=Ob.indexOf(s);return i!==a?i-a:t.localeCompare(s)}(r,e,t))}function Lb(e,t){return(e.level||1)===t.level&&e.listItem===t.listItem}function Mb(e,t,s){return{_type:"@list",_key:`${e._key||`${t}`}-parent`,mode:s,level:e.level||1,listItem:e.listItem,children:[e]}}function Db(e,t){const s=t.level||1,n=t.listItem||"normal",r="string"==typeof t.listItem;if(kb(e)&&(e.level||1)===s&&r&&(e.listItem||"normal")===n)return e;if(!("children"in e))return;const i=e.children[e.children.length-1];return i&&!_b(i)?Db(i,t):void 0}function Ub(e){let t="";return e.children.forEach(e=>{Pb(e)?t+=e.text:Ab(e)&&(t+=Ub(e))}),t}const Fb={textDecoration:"underline"},Vb=(e,t)=>`[@portabletext/react] Unknown ${e}, specify a component for it in the \`components.${t}\` prop`,Bb=e=>Vb(`block type "${e}"`,"types");function zb(e){console.warn(e)}const qb={display:"none"},$b={types:{},block:{normal:({children:e})=>b.jsx("p",{children:e}),blockquote:({children:e})=>b.jsx("blockquote",{children:e}),h1:({children:e})=>b.jsx("h1",{children:e}),h2:({children:e})=>b.jsx("h2",{children:e}),h3:({children:e})=>b.jsx("h3",{children:e}),h4:({children:e})=>b.jsx("h4",{children:e}),h5:({children:e})=>b.jsx("h5",{children:e}),h6:({children:e})=>b.jsx("h6",{children:e})},marks:{em:({children:e})=>b.jsx("em",{children:e}),strong:({children:e})=>b.jsx("strong",{children:e}),code:({children:e})=>b.jsx("code",{children:e}),underline:({children:e})=>b.jsx("span",{style:Fb,children:e}),"strike-through":({children:e})=>b.jsx("del",{children:e}),link:({children:e,value:t})=>b.jsx("a",{href:null==t?void 0:t.href,children:e})},list:{number:({children:e})=>b.jsx("ol",{children:e}),bullet:({children:e})=>b.jsx("ul",{children:e})},listItem:({children:e})=>b.jsx("li",{children:e}),hardBreak:()=>b.jsx("br",{}),unknownType:({value:e,isInline:t})=>{const s=Bb(e._type);return t?b.jsx("span",{style:qb,children:s}):b.jsx("div",{style:qb,children:s})},unknownMark:({markType:e,children:t})=>b.jsx("span",{className:`unknown__pt__mark__${e}`,children:t}),unknownList:({children:e})=>b.jsx("ul",{children:e}),unknownListItem:({children:e})=>b.jsx("li",{children:e}),unknownBlockStyle:({children:e})=>b.jsx("p",{children:e})};function Hb(e,t,s){const n=t[s],r=e[s];return"function"==typeof n||n&&"function"==typeof r?n:n?{...r,...n}:r}function Wb({value:e,components:t,listNestingMode:s,onMissingComponent:r=zb}){const i=r||Yb,a=function(e,t){const s=[];let n;for(let r=0;r<e.length;r++){const i=e[r];if(i){if(!Cb(i)){s.push(i),n=void 0;continue}if(!n){n=Mb(i,r,t),s.push(n);continue}if(Lb(i,n)){n.children.push(i);continue}if((i.level||1)>n.level){const e=Mb(i,r,t);if("html"===t){const t=n.children[n.children.length-1],s={...t,children:[...t.children,e]};n.children[n.children.length-1]=s}else n.children.push(e);n=e;continue}if((i.level||1)<n.level){const e=s[s.length-1],a=e&&Db(e,i);if(a){n=a,n.children.push(i);continue}n=Mb(i,r,t),s.push(n);continue}if(i.listItem!==n.listItem){const e=s[s.length-1],a=e&&Db(e,{level:i.level||1});if(a&&a.listItem===i.listItem){n=a,n.children.push(i);continue}n=Mb(i,r,t),s.push(n);continue}console.warn("Unknown state encountered for block",i),s.push(i)}}return s}(Array.isArray(e)?e:[e],s||"html"),o=n.useMemo(()=>t?function(e,t){const{block:s,list:n,listItem:r,marks:i,types:a,...o}=t;return{...e,block:Hb(e,t,"block"),list:Hb(e,t,"list"),listItem:Hb(e,t,"listItem"),marks:Hb(e,t,"marks"),types:Hb(e,t,"types"),...o}}($b,t):$b,[t]),l=n.useMemo(()=>Gb(o,i),[o,i]),c=a.map((e,t)=>l({node:e,index:t,isInline:!1,renderNode:l}));return b.jsx(b.Fragment,{children:c})}const Gb=(e,t)=>{function s(n){const{node:r,index:i,isInline:a}=n,o=r._key||`node-${i}`;return kb(r)?function(n,r,i){const a=n.children.map((e,t)=>s({node:e._key?e:{...e,_key:`li-${r}-${t}`},index:t,isInline:!1})),o=e.list,l=("function"==typeof o?o:o[n.listItem])||e.unknownList;if(l===e.unknownList){const e=n.listItem||"bullet";t(Vb(`list style "${e}"`,"list"),{nodeType:"listStyle",type:e})}return b.jsx(l,{value:n,index:r,isInline:!1,renderNode:s,children:a},i)}(r,i,o):Cb(r)?function(n,r,i){const a=Kb({node:n,index:r,isInline:!1,renderNode:s}),o=e.listItem,l=("function"==typeof o?o:o[n.listItem])||e.unknownListItem;if(l===e.unknownListItem){const e=n.listItem||"bullet";t(Vb(`list item style "${e}"`,"listItem"),{type:e,nodeType:"listItemStyle"})}let c=a.children;if(n.style&&"normal"!==n.style){const{listItem:e,...t}=n;c=s({node:t,index:r,isInline:!1})}return b.jsx(l,{value:n,index:r,isInline:!1,renderNode:s,children:c},i)}(r,i,o):Ab(r)?function(n,r,i){const{markDef:a,markType:o,markKey:l}=n,c=e.marks[o]||e.unknownMark,d=n.children.map((e,t)=>s({node:e,index:t,isInline:!0}));return c===e.unknownMark&&t((e=>Vb(`mark type "${e}"`,"marks"))(o),{nodeType:"mark",type:o}),b.jsx(c,{text:Ub(n),value:a,markType:o,markKey:l,renderNode:s,children:d},i)}(r,0,o):function(t){return t._type in e.types}(r)?function(t,n,r,i){const a={value:t,isInline:i,index:n,renderNode:s},o=e.types[t._type];return o?b.jsx(o,{...a},r):null}(r,i,o,a):Ib(r)?function(n,r,i,a){const{_key:o,...l}=Kb({node:n,index:r,isInline:a,renderNode:s}),c=l.node.style||"normal",d=("function"==typeof e.block?e.block:e.block[c])||e.unknownBlockStyle;return d===e.unknownBlockStyle&&t((u=c,Vb(`block style "${u}"`,"block")),{nodeType:"blockStyle",type:c}),b.jsx(d,{...l,value:l.node,renderNode:s},i);var u}(r,i,o,a):Pb(r)?function(t,s){if("\n"===t.text){const t=e.hardBreak;return t?b.jsx(t,{},s):"\n"}return t.text}(r,o):function(n,r,i,a){const o={value:n,isInline:a,index:r,renderNode:s};t(Bb(n._type),{nodeType:"block",type:n._type});const l=e.unknownType;return b.jsx(l,{...o},i)}(r,i,o,a)}return s};function Kb(e){const{node:t,index:s,isInline:n,renderNode:r}=e,i=function(e){var t;const{children:s}=e,n=e.markDefs??[];if(!s||!s.length)return[];const r=s.map(Rb),i={_type:"@span",children:[],markType:"<unknown>"};let a=[i];for(let o=0;o<s.length;o++){const e=s[o];if(!e)continue;const i=r[o]||[];let l=1;if(a.length>1)for(;l<a.length;l++){const e=(null==(t=a[l])?void 0:t.markKey)||"",s=i.indexOf(e);if(-1===s)break;i.splice(s,1)}a=a.slice(0,l);let c=a[a.length-1];if(c){for(const t of i){const s=null==n?void 0:n.find(e=>e._key===t),r=s?s._type:t,i={_type:"@span",_key:e._key,children:[],markDef:s,markType:r,markKey:t};c.children.push(i),a.push(i),c=i}if(_b(e)){const t=e.text.split("\n");for(let e=t.length;e-- >1;)t.splice(e,0,"\n");c.children=c.children.concat(t.map(e=>({_type:"@text",text:e})))}else c.children=c.children.concat(e)}}return i.children}(t).map((e,t)=>r({node:e,isInline:!0,index:t,renderNode:r}));return{_key:t._key||`block-${s}`,children:i,index:s,isInline:n,node:t}}function Yb(){}function Qb(){const{slug:e}=d(),[t,s]=n.useState(null),[r,i]=n.useState(!0),[a,o]=n.useState(null),{addToCart:l}=j(),[c,u]=n.useState(1);n.useEffect(()=>{if(console.log("ProgramDetail mounted with slug:",e),!e){const e="No program selected. Please select a program from the programs page.";return console.error(e),o(e),void i(!1)}(async()=>{console.log("Starting to fetch program with slug:",e),i(!0),o(null);try{let t=await(async e=>{if(console.log("getProgramBySlug called with slug:",e),!e)return console.error("No slug provided to getProgramBySlug"),null;try{const t='*[_type == "program" && slug.current == $slug][0]{\n      _id,\n      title,\n      description,\n      price,\n      duration,\n      category,\n      "image": image.asset->{\n        url,\n        alt\n      },\n      "slug": slug.current,\n      includes,\n      benefits,\n      requirements,\n      body[]{\n        ...select(\n          _type == \'block\' => @{\n            ...@,\n            children[]{\n              ...@,\n              marks[]\n            },\n            markDefs[]{\n              ...@,\n              _type == \'link\' => @{\n                _key,\n                _type,\n                href,\n                blank\n              }\n            }\n          },\n          @\n        )\n      },\n      "instructor": instructor->{\n        name,\n        title,\n        bio,\n        "image": image.asset->url\n      }\n    }';console.log("Executing Sanity query with slug:",e);const s=await ix.fetch(t,{slug:e});if(console.log("Sanity query result for slug:",e,s),!s){console.log("No program found for slug:",e);const t=await ix.fetch('*[_type == "program"]{ "slug": slug.current }');console.log("All available program slugs:",t.map(e=>e.slug))}return s}catch(a){throw console.error("Error in getProgramBySlug for slug:",e,{error:a.message,stack:a.stack}),a}})(e);if(t||36!==e.length||(console.log("No program found with slug, trying to fetch by ID:",e),t=await getProgramById(e)),!t)throw new Error("Program not found. It may have been moved or deleted.");let n=[];t.body&&(Array.isArray(t.body)?n=t.body:"object"==typeof t.body&&null!==t.body&&(n=[t.body]));const r={id:t._id,_id:t._id,title:t.title||"Untitled Program",description:t.description,body:n,hasImage:!(!t.image&&!t.imageUrl),imageUrl:t.image?.url||t.imageUrl,price:t.price,includes:Array.isArray(t.includes)?t.includes:[],benefits:Array.isArray(t.benefits)?t.benefits:[],requirements:Array.isArray(t.requirements)?t.requirements:[],slug:t.slug||t._id,category:t.category||"uncategorized",instructor:t.instructor};if(!r.id)throw new Error("Invalid program data: missing _id");!t.slug&&t._id&&window.history.replaceState({},"",`/programs/${t._id}`),s(r)}catch(t){const s=`Failed to load program: ${t.message}`;console.error("Error in fetchProgram:",{error:t,message:t.message,stack:t.stack,slug:e}),o(s)}finally{i(!1)}})().catch(e=>{console.error("Unhandled error in fetchProgram:",e),o("An unexpected error occurred while loading the program"),i(!1)})},[e]);return r?b.jsx("div",{className:"min-h-screen bg-gray-50 pb-32 md:pb-24 pt-12 px-4 sm:px-6 lg:px-8",children:b.jsx("div",{className:"max-w-7xl mx-auto",children:b.jsxs("div",{className:"animate-pulse",children:[b.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-8"}),b.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),b.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"})]})})}):a?b.jsx("div",{className:"min-h-screen flex items-center justify-center",children:b.jsxs("div",{className:"text-center p-6 max-w-md mx-auto bg-white rounded-lg shadow-lg",children:[b.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Error"}),b.jsx("p",{className:"text-gray-700 mb-4",children:a}),b.jsx("button",{onClick:()=>window.history.back(),className:"px-4 py-2 bg-main text-white rounded-md hover:bg-opacity-90 transition-colors",children:"Go Back"})]})}):t?b.jsx("div",{className:"min-h-screen bg-gray-50",children:b.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[b.jsxs("div",{className:"mb-12",children:[b.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:t.title}),b.jsxs("div",{className:"flex items-center text-gray-600",children:[b.jsx("span",{className:"px-3 py-1 text-sm font-medium rounded-full bg-indigo-100 text-main mr-3",children:t.category}),b.jsx("span",{className:"text-gray-500",children:t.duration})]})]}),b.jsx("div",{className:"mb-12 rounded-xl overflow-hidden shadow-lg",children:b.jsx("img",{src:t.imageUrl||"/placeholder-program.jpg",alt:t.title,className:"w-full h-auto max-h-[500px] object-cover",loading:"lazy"})}),b.jsxs("div",{className:"bg-white rounded-xl shadow-md p-8 mb-12",children:[b.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"About This Program"}),t.body&&t.body.length>0?b.jsx("div",{className:"prose max-w-none",children:b.jsx(Wb,{value:t.body,components:{block:{normal:({children:e})=>b.jsx("p",{className:"mb-4",children:e}),h1:({children:e})=>b.jsx("h1",{className:"text-2xl font-bold my-4",children:e}),h2:({children:e})=>b.jsx("h2",{className:"text-xl font-bold mt-6 mb-3",children:e}),h3:({children:e})=>b.jsx("h3",{className:"text-lg font-semibold mt-5 mb-2",children:e}),h4:({children:e})=>b.jsx("h4",{className:"text-base font-medium mt-4 mb-2",children:e}),blockquote:({children:e})=>b.jsx("blockquote",{className:"border-l-4 border-gray-300 pl-4 italic my-4",children:e})},list:{bullet:({children:e})=>b.jsx("ul",{className:"list-disc pl-5 mb-4 space-y-2",children:e}),number:({children:e})=>b.jsx("ol",{className:"list-decimal pl-5 mb-4 space-y-2",children:e})},listItem:{bullet:({children:e})=>b.jsx("li",{className:"mb-1",children:e}),number:({children:e})=>b.jsx("li",{className:"mb-1",children:e})},marks:{link:({value:e,children:t})=>{const s=e?.href||"",n=s.startsWith("http");return b.jsx("a",{href:s,target:n?"_blank":void 0,rel:n?"noopener noreferrer":void 0,className:"text-main hover:underline",children:t})},strong:({children:e})=>b.jsx("strong",{className:"font-semibold",children:e}),em:({children:e})=>b.jsx("em",{className:"italic",children:e}),underline:({children:e})=>b.jsx("u",{children:e}),code:({children:e})=>b.jsx("code",{className:"bg-gray-100 px-1 rounded",children:e})},types:{image:({value:e})=>b.jsxs("div",{className:"my-4",children:[b.jsx("img",{src:e.asset?.url,alt:e.alt||"Image",className:"max-w-full h-auto rounded-lg"}),e.caption&&b.jsx("p",{className:"text-sm text-gray-500 mt-2 text-center",children:e.caption})]})}},onMissingComponent:(e,t)=>(console.warn("PortableText missing component:",{message:e,options:t}),b.jsx("div",{className:"text-yellow-600 my-2",children:"[Content could not be displayed]"}))})}):t.description?b.jsx("div",{className:"prose max-w-none",children:b.jsx("p",{className:"text-gray-700",children:t.description})}):b.jsx("div",{className:"prose max-w-none",children:b.jsx("p",{className:"text-gray-500",children:"No description available for this program."})})]}),b.jsxs("div",{className:"bg-white rounded-xl shadow-md p-8 mb-12",children:[b.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"About the Instructor"}),b.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-start gap-6",children:[b.jsx("div",{className:"w-32 h-32 rounded-full bg-gray-200 overflow-hidden",children:b.jsx("img",{src:t.instructor?.image||"/placeholder-avatar.jpg",alt:t.instructor?.name||"Instructor",className:"w-full h-full object-cover"})}),b.jsxs("div",{className:"flex-1",children:[b.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:t.instructor?.name||"Expert Instructor"}),b.jsx("p",{className:"text-main font-medium mb-3",children:t.instructor?.title||"Certified Instructor"}),b.jsx("p",{className:"text-gray-600",children:t.instructor?.bio||"Our instructor has years of experience in this field and is dedicated to helping you achieve your goals."}),t.requirements?.length>0&&b.jsxs("div",{className:"mt-6",children:[b.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Requirements"}),b.jsx("ul",{className:"space-y-3",children:t.requirements.map((e,t)=>b.jsxs("li",{className:"flex items-start",children:[b.jsx(Tb,{className:"h-5 w-5 text-gray-400 mr-2 mt-0.5 flex-shrink-0"}),b.jsx("span",{className:"text-gray-700",children:e})]},t))})]})]})]})]}),b.jsx("div",{className:"bg-white rounded-xl shadow-md p-8 mt-12 border-t-4 border-main",children:b.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[b.jsxs("div",{children:[b.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Ready to get started?"}),b.jsxs("div",{className:"flex items-baseline mt-2",children:[b.jsxs("span",{className:"text-3xl font-bold text-main",children:["",t.price?.toLocaleString()||"Free"]}),t.originalPrice&&b.jsxs("span",{className:"ml-2 text-lg text-gray-500 line-through",children:["",t.originalPrice.toLocaleString()]}),b.jsxs("span",{className:"ml-2 text-gray-600",children:[" ",t.duration||"Lifetime access"]})]})]}),b.jsx("button",{onClick:()=>{l({id:t._id,name:t.title,price:t.price,image:t.imageUrl,quantity:c,slug:t.slug})},className:"w-full md:w-auto bg-main hover:bg-main-dark text-white font-semibold py-3 px-8 rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-main",children:"Add to Cart"})]})}),t.category&&t._id&&b.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[b.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-8",children:"You might also like"}),b.jsx(Xb,{category:t.category,currentProgramId:t._id})]})]})}):b.jsx("div",{className:"min-h-screen flex items-center justify-center",children:b.jsxs("div",{className:"text-center",children:[b.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Program not found"}),b.jsx("p",{className:"text-gray-600 mb-4",children:"The program you're looking for doesn't exist or has been removed."}),b.jsx("a",{href:"/programs",className:"inline-block px-6 py-2 bg-main text-white rounded-md hover:bg-opacity-90 transition-colors",children:"Browse Programs"})]})})}function Xb({currentProgramId:e,category:t}){const[s,r]=n.useState([]),[i,a]=n.useState(!0),[o,l]=n.useState(null);return n.useEffect(()=>{(async()=>{if(t&&e){a(!0),l(null);try{const s='*[_type == "program" && category == $category && _id != $currentProgramId][0...3]{\n          _id,\n          title,\n          price,\n          duration,\n          "imageUrl": image.asset->url,\n          "slug": slug.current,\n        }',n=await ix.fetch(s,{category:t,currentProgramId:e});r(n||[])}catch(s){console.error("Error fetching related programs:",s),l("Failed to load related programs")}finally{a(!1)}}else a(!1)})()},[t,e]),i?b.jsx("div",{className:"flex justify-center py-8",children:b.jsxs("div",{className:"animate-pulse",children:[b.jsx("div",{className:"h-8 w-48 bg-gray-200 rounded mb-4"}),b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(e=>b.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[b.jsx("div",{className:"w-full h-48 bg-gray-200"}),b.jsxs("div",{className:"p-4",children:[b.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4 mb-2"}),b.jsx("div",{className:"h-4 bg-gray-100 rounded w-1/2"})]})]},e))})]})}):o?b.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mb-8",children:b.jsxs("div",{className:"flex",children:[b.jsx("div",{className:"flex-shrink-0",children:b.jsx(Tb,{className:"h-5 w-5 text-red-400"})}),b.jsx("div",{className:"ml-3",children:b.jsx("p",{className:"text-sm text-red-700",children:o})})]})}):0===s.length?null:b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(e=>b.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-200",children:b.jsxs("a",{href:`/programs/${e.slug||e._id}`,className:"block group",children:[b.jsx("div",{className:"relative overflow-hidden h-48",children:b.jsx("img",{src:e.imageUrl||"/placeholder-program.jpg",alt:e.title,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",loading:"lazy"})}),b.jsxs("div",{className:"p-4",children:[b.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1 group-hover:text-main transition-colors",children:e.title}),e.duration&&b.jsx("p",{className:"text-gray-500 text-sm mb-2",children:e.duration}),e.price&&b.jsxs("p",{className:"text-lg font-bold text-main",children:["",e.price.toLocaleString()]})]})]})},e._id))})}function Jb(){return b.jsxs("div",{className:"max-w-2xl mx-auto py-16",children:[b.jsx("h1",{className:"text-2xl font-bold text-indigo-800 mb-4",children:"Manifest Abundance"}),b.jsx("p",{className:"text-gray-700",children:"Learn to attract abundance into your life with guided meditations and practical exercises."})]})}function Zb(){return b.jsxs("div",{className:"max-w-2xl mx-auto py-16",children:[b.jsx("h1",{className:"text-2xl font-bold text-indigo-800 mb-4",children:"Reduce Stress & Anxiety"}),b.jsx("p",{className:"text-gray-700",children:"Guided sessions and resources to help you manage stress and anxiety effectively."})]})}function ew(){return b.jsxs("div",{className:"max-w-2xl mx-auto py-16",children:[b.jsx("h1",{className:"text-2xl font-bold text-indigo-800 mb-4",children:"Be Extraordinary - Super Brain Techniques"}),b.jsx("p",{className:"text-gray-700",children:"Unlock your brain's potential with advanced techniques and exercises."})]})}function tw(){return b.jsxs("div",{className:"max-w-2xl mx-auto py-16",children:[b.jsx("h1",{className:"text-2xl font-bold text-indigo-800 mb-4",children:"Self Sessions (Mind)"}),b.jsx("p",{className:"text-gray-700",children:"Access self-guided audio and video sessions for mental well-being."})]})}function sw(){return b.jsxs("div",{className:"max-w-2xl mx-auto py-16",children:[b.jsx("h1",{className:"text-2xl font-bold text-green-800 mb-4",children:"Yoga"}),b.jsx("p",{className:"text-gray-700",children:"Yoga sessions and resources for physical and mental well-being."})]})}function nw(){return b.jsxs("div",{className:"max-w-2xl mx-auto py-16",children:[b.jsx("h1",{className:"text-2xl font-bold text-green-800 mb-4",children:"Nutrition"}),b.jsx("p",{className:"text-gray-700",children:"Nutrition guidance and healthy eating tips for a better lifestyle."})]})}function rw(){return b.jsxs("div",{className:"max-w-2xl mx-auto py-16",children:[b.jsx("h1",{className:"text-2xl font-bold text-green-800 mb-4",children:"Naturopathy"}),b.jsx("p",{className:"text-gray-700",children:"Explore natural healing techniques and holistic wellness sessions."})]})}function iw(){return b.jsxs("div",{className:"max-w-2xl mx-auto py-16",children:[b.jsx("h1",{className:"text-2xl font-bold text-green-800 mb-4",children:kv("body.selfSessions.title")}),b.jsx("p",{className:"text-gray-700",children:kv("body.selfSessions.description")})]})}function aw(){return b.jsxs("div",{className:"max-w-2xl mx-auto py-16",children:[b.jsx("h1",{className:"text-2xl font-bold text-purple-800 mb-4",children:"Trauma Healing & Chakra Activations"}),b.jsx("p",{className:"text-gray-700",children:"Sessions focused on healing trauma and activating your chakras for spiritual growth."})]})}function ow(){return b.jsxs("div",{className:"max-w-2xl mx-auto py-16",children:[b.jsx("h1",{className:"text-2xl font-bold text-purple-800 mb-4",children:"Sound Therapy & Healing"}),b.jsx("p",{className:"text-gray-700",children:"Experience healing through sound therapy and vibrational techniques."})]})}function lw(){return b.jsxs("div",{className:"max-w-2xl mx-auto py-16",children:[b.jsx("h1",{className:"text-2xl font-bold text-purple-800 mb-4",children:"Breathwork for Life"}),b.jsx("p",{className:"text-gray-700",children:"Guided breathwork sessions to enhance your well-being and vitality."})]})}function cw(){return b.jsxs("div",{className:"max-w-2xl mx-auto py-16",children:[b.jsx("h1",{className:"text-2xl font-bold text-purple-800 mb-4",children:kv("soul.selfSessions.title")}),b.jsx("p",{className:"text-gray-700",children:kv("soul.selfSessions.description")})]})}function dw(){return b.jsxs("div",{className:"max-w-2xl mx-auto py-16",children:[b.jsx("h1",{className:"text-2xl font-bold text-yellow-800 mb-4",children:"Money Store"}),b.jsx("p",{className:"text-gray-700",children:"Pyrates, Salenites and other prosperity items available for purchase."})]})}function uw({title:e}){const{addToCart:t}=j(),{items:s,loading:r,error:i}=Pv(e),a=n.useCallback(e=>{t({id:e._id||e.slug||e.title,title:e.title,price:e.price||0,quantity:1,image:e.imageUrl})},[t]);return r?b.jsx("div",{className:"min-h-screen w-full bg-background flex items-center justify-center",children:b.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-500"})}):i?b.jsx("div",{className:"min-h-screen w-full bg-background flex items-center justify-center",children:b.jsxs("div",{className:"text-red-500 text-center p-4 max-w-md",children:[b.jsxs("h2",{className:"text-xl font-bold mb-2",children:["Error Loading ",e]}),b.jsx("p",{className:"mb-4",children:i.message}),b.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-accent text-white rounded-lg font-semibold hover:bg-[#704091] transition-colors",children:"Try Again"})]})}):b.jsx("div",{className:"min-h-screen w-full bg-background",children:b.jsxs("div",{className:"max-w-7xl mx-auto py-16 px-4 sm:px-6 lg:px-8",children:[b.jsx("div",{className:"text-center mb-8",children:b.jsx("h1",{className:"text-3xl font-bold text-[#8e6192]",children:e})}),s&&0!==s.length?b.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8",children:s.map(e=>b.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden flex flex-col h-full transition-all duration-300 hover:shadow-xl hover:-translate-y-1",children:[b.jsxs("div",{className:"relative pt-[100%] bg-gray-50",children:[e.imageUrl?b.jsx("img",{src:e.imageUrl,alt:e.title,className:"absolute inset-0 w-full h-full object-cover",loading:"lazy"}):b.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-gray-400",children:b.jsx("span",{className:"text-sm",children:"No Image"})}),e.compareAtPrice>e.price&&b.jsx("span",{className:"absolute top-3 right-3 bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:"SALE"})]}),b.jsxs("div",{className:"p-6 flex flex-col flex-grow",children:[b.jsx("h2",{className:"text-xl font-bold text-[#8e6192] mb-2 line-clamp-2",title:e.title,children:e.title}),b.jsx("p",{className:"text-gray-600 text-sm mb-4 flex-grow",children:(()=>{const t=(e.shortDescription||e.description||"").trim();return t.length>100?t.slice(0,100)+"":t})()}),b.jsx("div",{className:"mt-4 flex items-center justify-between",children:b.jsxs("div",{children:[b.jsxs("span",{className:"text-lg font-bold text-main",children:["",e.price?.toLocaleString("en-IN")]}),e.compareAtPrice>e.price&&b.jsxs("span",{className:"ml-2 text-sm text-gray-400 line-through",children:["",e.compareAtPrice?.toLocaleString("en-IN")]})]})}),b.jsx("div",{className:"mt-4",children:b.jsx("button",{className:"w-full px-4 py-2 bg-main text-white rounded-lg font-semibold text-sm shadow hover:brightness-105 focus:outline-none focus:ring-2 focus:ring-main focus:ring-offset-2 transition",onClick:()=>a(e),children:"Add to Cart"})})]})]},e._id||e.title))}):b.jsx("div",{className:"text-center py-12",children:b.jsx("p",{className:"text-gray-500",children:"No items found."})})]})})}function hw(){return b.jsx(uw,{title:"Rudraksha"})}function pw(){return b.jsx(uw,{title:"Bracelets"})}function mw(){return b.jsx(uw,{title:"Murti"})}function fw(){return b.jsx(uw,{title:"Anklet"})}function gw(){return b.jsx(uw,{title:"Frames"})}function yw(){return b.jsx(uw,{title:"Karungali"})}function xw(){return b.jsx(uw,{title:"Zodiac"})}function vw(){return b.jsx(uw,{title:"Pyrite"})}function bw(){return b.jsx(uw,{title:"Gemstones"})}function ww(){return b.jsx(uw,{title:"Pendant"})}function Nw(){return b.jsxs("div",{className:"max-w-2xl mx-auto py-16",children:[b.jsx("h1",{className:"text-3xl font-bold text-pink-800 mb-8",children:"Cart & Transactions"}),b.jsx("p",{className:"text-gray-700",children:"View your selected products and programs, proceed to checkout, and view your transaction history."})]})}function Sw(){return b.jsxs("div",{className:"max-w-2xl mx-auto py-16",children:[b.jsx("h1",{className:"text-3xl font-bold text-red-800 mb-8",children:"Favorites"}),b.jsx("p",{className:"text-gray-700",children:"Your favorite products, coaches, and meditation audio/video will appear here."})]})}function Ew(){return b.jsxs("div",{className:"max-w-2xl mx-auto py-16",children:[b.jsx("h1",{className:"text-3xl font-bold text-indigo-800 mb-8",children:"Coaching History"}),b.jsx("p",{className:"text-gray-700",children:"View your past coaching sessions and programs here."})]})}const jw=()=>{const{cart:e,isOpen:t,setIsOpen:s,removeFromCart:n,updateQuantity:r,cartTotal:a,itemCount:o,clearCart:l}=j();return t?b.jsx("div",{className:"fixed inset-0 z-50 overflow-hidden",children:b.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[b.jsx("div",{className:"absolute inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:()=>s(!1),"aria-hidden":"true"}),b.jsx("div",{className:"fixed inset-y-0 right-0 max-w-full flex",children:b.jsx("div",{className:"w-screen max-w-md",children:b.jsxs("div",{className:"h-full flex flex-col bg-white shadow-xl overflow-y-scroll",children:[b.jsxs("div",{className:"flex-1 py-6 overflow-y-auto px-4 sm:px-6",children:[b.jsxs("div",{className:"flex items-start justify-between",children:[b.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Shopping cart"}),b.jsx("div",{className:"ml-3 h-7 flex items-center",children:b.jsxs("button",{type:"button",className:"-m-2 p-2 text-gray-400 hover:text-gray-500",onClick:()=>s(!1),children:[b.jsx("span",{className:"sr-only",children:"Close panel"}),b.jsx(_f,{className:"h-6 w-6","aria-hidden":"true"})]})})]}),b.jsx("div",{className:"mt-8",children:b.jsx("div",{className:"flow-root",children:0===e.length?b.jsxs("div",{className:"text-center py-12",children:[b.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),b.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Your cart is empty"}),b.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Start adding some items to your cart"})]}):b.jsx("ul",{className:"-my-6 divide-y divide-gray-200",children:e.map(e=>b.jsxs("li",{className:"py-6 flex",children:[b.jsx("div",{className:"flex-shrink-0 w-24 h-24 border border-gray-200 rounded-md overflow-hidden",children:b.jsx("img",{src:e.image||"/placeholder-program.jpg",alt:e.name,className:"w-full h-full object-cover object-center"})}),b.jsxs("div",{className:"ml-4 flex-1 flex flex-col",children:[b.jsx("div",{children:b.jsxs("div",{className:"flex justify-between text-base font-medium text-gray-900",children:[b.jsx("h3",{children:b.jsx(i,{to:`/programs/${e.slug}`,onClick:()=>s(!1),children:e.name})}),b.jsxs("p",{className:"ml-4",children:["",e.price.toLocaleString()]})]})}),b.jsxs("div",{className:"flex-1 flex items-end justify-between text-sm",children:[b.jsxs("div",{className:"flex items-center border rounded-md overflow-hidden",children:[b.jsx("button",{onClick:()=>r(e.id,e.quantity-1),className:"px-2 py-1 bg-gray-100 hover:bg-gray-200",children:b.jsx(wf,{className:"h-4 w-4"})}),b.jsx("span",{className:"px-3 py-1",children:e.quantity}),b.jsx("button",{onClick:()=>r(e.id,e.quantity+1),className:"px-2 py-1 bg-gray-100 hover:bg-gray-200",children:b.jsx(Sf,{className:"h-4 w-4"})})]}),b.jsx("div",{className:"flex",children:b.jsx("button",{type:"button",onClick:()=>n(e.id),className:"font-medium text-indigo-600 hover:text-indigo-500",children:"Remove"})})]})]})]},e.id))})})})]}),e.length>0&&b.jsxs("div",{className:"border-t border-gray-200 py-6 px-4 sm:px-6",children:[b.jsxs("div",{className:"flex justify-between text-base font-medium text-gray-900 mb-4",children:[b.jsx("p",{children:"Subtotal"}),b.jsxs("p",{children:["",a.toLocaleString()]})]}),b.jsx("p",{className:"mt-0.5 text-sm text-gray-500 mb-6",children:"Shipping and taxes calculated at checkout."}),b.jsxs("div",{className:"space-y-3",children:[b.jsx(i,{to:"/checkout",className:"w-full flex justify-center items-center px-6 py-3 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-main hover:bg-opacity-90",onClick:()=>s(!1),children:"Checkout"}),b.jsx("button",{type:"button",onClick:l,className:"w-full flex justify-center items-center px-6 py-3 border border-gray-300 rounded-md shadow-sm text-base font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Clear Cart"})]})]})]})})})]})}):null};function Tw(){return b.jsx(Jm,{children:b.jsx(E,{children:b.jsxs(u,{children:[b.jsx(Af,{}),b.jsxs("div",{className:"flex flex-col min-h-screen",children:[b.jsx(Cf,{}),b.jsx(jw,{}),b.jsx("main",{className:"flex-grow",children:b.jsxs(h,{children:[b.jsx(p,{path:"/",element:b.jsx(Zv,{})}),b.jsx(p,{path:"/mind",element:b.jsx(eb,{})}),b.jsx(p,{path:"/mind/manifest-abundance",element:b.jsx(Jb,{})}),b.jsx(p,{path:"/mind/reduce-stress",element:b.jsx(Zb,{})}),b.jsx(p,{path:"/mind/super-brain",element:b.jsx(ew,{})}),b.jsx(p,{path:"/mind/self-sessions",element:b.jsx(tw,{})}),b.jsx(p,{path:"/body",element:b.jsx(tb,{})}),b.jsx(p,{path:"/body/yoga",element:b.jsx(sw,{})}),b.jsx(p,{path:"/body/nutrition",element:b.jsx(nw,{})}),b.jsx(p,{path:"/body/naturopathy",element:b.jsx(rw,{})}),b.jsx(p,{path:"/body/self-sessions",element:b.jsx(iw,{})}),b.jsx(p,{path:"/soul",element:b.jsx(sb,{})}),b.jsx(p,{path:"/soul/trauma-healing",element:b.jsx(aw,{})}),b.jsx(p,{path:"/soul/sound-therapy",element:b.jsx(ow,{})}),b.jsx(p,{path:"/soul/breathwork",element:b.jsx(lw,{})}),b.jsx(p,{path:"/soul/self-sessions",element:b.jsx(cw,{})}),b.jsx(p,{path:"/store",element:b.jsx(nb,{})}),b.jsx(p,{path:"/about",element:b.jsx(lb,{})}),b.jsx(p,{path:"/contact",element:b.jsx(cb,{})}),b.jsx(p,{path:"/refund-and-cancellation",element:b.jsx(db,{})}),b.jsx(p,{path:"/shipping-and-delivery",element:b.jsx(ub,{})}),b.jsx(p,{path:"/terms-and-conditions",element:b.jsx(hb,{})}),b.jsx(p,{path:"/privacy-policy",element:b.jsx(pb,{})}),b.jsx(p,{path:"/sessions",element:b.jsx(wb,{})}),b.jsx(p,{path:"/blog",element:b.jsx(Sb,{})}),b.jsx(p,{path:"/all-articles",element:b.jsx(Eb,{})}),b.jsx(p,{path:"/store/money-store",element:b.jsx(dw,{})}),b.jsx(p,{path:"/test-programs",element:b.jsx(Iv,{})}),b.jsx(p,{path:"/store/rudraksha",element:b.jsx(hw,{})}),b.jsx(p,{path:"/store/rudrakshas",element:b.jsx(hw,{})}),b.jsx(p,{path:"/store/bracelets",element:b.jsx(pw,{})}),b.jsx(p,{path:"/store/murti",element:b.jsx(mw,{})}),b.jsx(p,{path:"/store/anklet",element:b.jsx(fw,{})}),b.jsx(p,{path:"/store/frames",element:b.jsx(gw,{})}),b.jsx(p,{path:"/store/karungali",element:b.jsx(yw,{})}),b.jsx(p,{path:"/store/zodiac",element:b.jsx(xw,{})}),b.jsx(p,{path:"/store/pyrite",element:b.jsx(vw,{})}),b.jsx(p,{path:"/store/gemstones",element:b.jsx(bw,{})}),b.jsx(p,{path:"/store/pendant",element:b.jsx(ww,{})}),b.jsx(p,{path:"/login",element:b.jsx(rb,{})}),b.jsx(p,{path:"/signup",element:b.jsx(ab,{})}),b.jsx(p,{path:"/reset-password",element:b.jsx(ob,{})}),b.jsx(p,{path:"/about",element:b.jsx(lb,{})}),b.jsx(p,{path:"/cart",element:b.jsx(kf,{children:b.jsx(Nw,{})})}),b.jsx(p,{path:"/favorites",element:b.jsx(kf,{children:b.jsx(Sw,{})})}),b.jsx(p,{path:"/coaching-history",element:b.jsx(kf,{children:b.jsx(Ew,{})})}),b.jsx(p,{path:"/programs/:slug",element:b.jsx(Qb,{})}),b.jsx(p,{path:"/checkout",element:b.jsx(kf,{children:b.jsx(Zy,{})})}),b.jsx(p,{path:"/dashboard",element:b.jsx(kf,{children:b.jsx(ex,{})})})]})}),b.jsx(Av,{})]})]})})})}const _w=async()=>{try{const e=await bb.fetch('*[_type == "program"][0]');return console.log(" Sanity connection successful"),{success:!0,data:e}}catch(e){return console.error(" Sanity connection failed:",e.message),{success:!1,error:e.message}}};"4173"===window.location.port&&_w(),window.testSanity=_w,N.createRoot(document.getElementById("root")).render(b.jsx(l.StrictMode,{children:b.jsx(Tw,{})})),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{}).catch(e=>{console.error("ServiceWorker registration failed:",e)})});
